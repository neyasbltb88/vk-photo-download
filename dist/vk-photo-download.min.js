!function i(a,r,c){function l(e,t){if(!r[e]){if(!a[e]){var n="function"==typeof require&&require;if(!t&&n)return n(e,!0);if(d)return d(e,!0);var o=new Error("Cannot find module '"+e+"'");throw o.code="MODULE_NOT_FOUND",o}var s=r[e]={exports:{}};a[e][0].call(s.exports,function(t){return l(a[e][1][t]||t)},s,s.exports,i,a,r,c)}return r[e].exports}for(var d="function"==typeof require&&require,t=0;t<c.length;t++)l(c[t]);return l}({1:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var o,s=(o=t("downloadjs"))&&o.__esModule?o:{default:o};function i(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}var a=function(){function n(){var t=this,e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n),this.PhotoDownload=e.PhotoDownload,this.sel=e.selectors,this.timings=e.timings,this.default_event_name="click",this.handlers={preventHandler:this._preventHandler.bind(this),newTabHandler:this._newTabHandler.bind(this),downloadHandler:this._downloadHandler.bind(this),startTimer:this._startTimer.bind(this),checkTimer:this._checkTimer.bind(this),closeTimingSettings:function(){return t.PhotoDownload.state.settings="close"},downloadModeHandler:this._downloadModeHandler.bind(this),showSizeHandler:this._showSizeHandler.bind(this),downloadEffect:this.tempClass.bind(this,this.sel.get("btn.download_effect"),this.timings.settings_open+250,".".concat(this.sel.get("btn.icon"))),loadedUrlsHandler:this._loadedUrlsHandler.bind(this),addLoadedUrl:this._addLoadedUrl.bind(this),clearLoadedUrls:function(){return t.PhotoDownload.loaded_urls.clear()}},this.timers={delay:null,open:null}}var t,e,o;return t=n,(e=[{key:"setHandlers",value:function(){var t=this.PhotoDownload.wrap;if(!t)return!1;var e=t.querySelector("."+this.sel.get("btn.btn"));this.set(e,"startTimer","mousedown"),this.set(e,"checkTimer","mouseup"),this.set(e,"checkTimer","mouseleave"),this.set(e,"preventHandler","click");var n=t.querySelector("."+this.sel.get("sett.settings_close_ico"));this.set(n,"closeTimingSettings","click");var o=t.querySelector("."+this.sel.get("sett.download_mode"));this.set(o,"downloadModeHandler","change");var s=t.querySelector("."+this.sel.get("sett.size_mode"));this.set(s,"showSizeHandler","change");var i=t.querySelector("."+this.sel.get("sett.loaded_urls_mode"));this.set(i,"loadedUrlsHandler","change");var a=t.querySelector("#"+this.sel.get("loaded_urls_mode_clear_control"));this.set(a,"clearLoadedUrls","click")}},{key:"setSettingsState",value:function(){var t=this.PhotoDownload.wrap;if(!t)return!1;var e=this.PhotoDownload.settings.download_mode.toString();t.querySelector("."+this.sel.get("sett.download_mode")).querySelector("input[value=".concat(e,"]")).checked=!0,t.querySelector("#"+this.sel.size_mode_control).checked=this.PhotoDownload.settings.show_size,this.PhotoDownload.settings.show_size?t.classList.remove(this.sel.non_size):t.classList.add(this.sel.non_size),t.querySelector("#"+this.sel.loaded_urls_mode_control).checked=this.PhotoDownload.settings.loaded_urls;var n=t.querySelector("#"+this.sel.loaded_urls_mode_key_control);n.disabled=!this.PhotoDownload.settings.loaded_urls,n.checked=this.PhotoDownload.settings.loaded_urls_PKM}},{key:"applyState",value:function(){switch(this.PhotoDownload.state.settings){case"open_timing":this._openTimingSettings();break;case"open":this._openSettings();break;case"close":this._closeSettings()}}},{key:"_startTimer",value:function(t){var e=this;if(1!==t.which)return this.PhotoDownload.settings.loaded_urls_PKM&&this.PhotoDownload.settings.loaded_urls&&"close"==this.PhotoDownload.state.settings&&this._addLoadedUrl(t),!1;"close"==this.PhotoDownload.state.settings?this.timers.delay=setTimeout(function(){e.PhotoDownload.state.settings="open_timing",e.timers.open=setTimeout(function(){e.PhotoDownload.state.settings="open"},e.timings.open)},this.timings.delay):"open"==this.PhotoDownload.state.settings&&(this.PhotoDownload.wrap.querySelector(".cog").classList.remove(this.sel.draw,this.sel.draw_fill),setTimeout(function(){"open"==e.PhotoDownload.state.settings&&(e.PhotoDownload.state.settings="close")},this.timings.delay))}},{key:"_checkTimer",value:function(t){if(1!==t.which)return!1;this.timers.delay&&!this.timers.open&&"close"==this.PhotoDownload.state.settings&&(this.PhotoDownload.settings.download_mode?this.set(t.currentTarget,["downloadHandler","downloadEffect","addLoadedUrl"]):this.set(t.currentTarget,["newTabHandler","downloadEffect","addLoadedUrl"])),this.timers.delay&&!this.timers.open&&"open"==this.PhotoDownload.state.settings&&(this.PhotoDownload.state.settings="close"),this.timers.delay&&this.timers.open&&"open"==this.PhotoDownload.state.settings&&this.set(t.currentTarget,"preventHandler"),"open_timing"==this.PhotoDownload.state.settings&&(this.set(t.currentTarget,"preventHandler"),this.PhotoDownload.state.settings="close"),clearTimeout(this.timers.delay),this.timers.delay=null,clearTimeout(this.timers.open),this.timers.open=null}},{key:"_openTimingSettings",value:function(){this.PhotoDownload.wrap.classList.add(this.sel.icon_cog),this.PhotoDownload.wrap.querySelector(".cog").classList.add(this.sel.draw)}},{key:"_openSettings",value:function(){var t=this;this._openTimingSettings();var e=function(){t.PhotoDownload.wrap.classList.add(t.sel.settings,t.sel.settings_open),setTimeout(function(){t.PhotoDownload.wrap.querySelector(".cog").classList.add(t.sel.draw_fill)},t.timings.settings_open)};this.PhotoDownload.settings.show_size?e():(this.PhotoDownload.wrap.classList.add(this.sel.slide_in),setTimeout(function(){e()},this.timings.btn_transition_transform))}},{key:"_closeSettings",value:function(){var t=this;this.PhotoDownload.wrap.querySelector(".cog").classList.remove(this.sel.draw,this.sel.draw_fill),this.PhotoDownload.wrap.classList.remove(this.sel.settings_open),setTimeout(function(){t.PhotoDownload.wrap.classList.remove(t.sel.icon_cog),t.PhotoDownload.wrap.classList.remove(t.sel.settings),setTimeout(function(){t.PhotoDownload.wrap.classList.remove(t.sel.slide_in)},t.timings.btn_transition_transform)},this.timings.settings_open)}},{key:"set",value:function(e,t){var n=this,o=2<arguments.length&&void 0!==arguments[2]?arguments[2]:this.default_event_name;if(!e||!t)return!1;var s=!0;return this.removeAll(e,o),t instanceof Array?t.forEach(function(t){n.add(e,t,o)}):"string"==typeof t?this.add(e,t,o):s=!1,s}},{key:"add",value:function(t,e){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:this.default_event_name;return!!(t&&e&&this.getHandler(e))&&(t.addEventListener(n,this.getHandler(e)),!0)}},{key:"remove",value:function(t,e){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:this.default_event_name;return!!(t&&e&&this.getHandler(e))&&(t.removeEventListener(n,this.getHandler(e)),!0)}},{key:"removeAll",value:function(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:this.default_event_name;if(!t)return!1;for(var n in this.handlers)t.removeEventListener(e,this.getHandler(n));return!0}},{key:"getHandlersNames",value:function(){return Object.keys(this.handlers)}},{key:"getHandlers",value:function(){return this.handlers}},{key:"getHandler",value:function(t){return this.handlers[t]}},{key:"tempClass",value:function(t,e,n){n instanceof Event?n=n.currentTarget:"string"==typeof n?n=document.querySelector(n):void 0===n&&(n=this),n.classList.remove(t),setTimeout(function(){n.classList.add(t)},0),setTimeout(function(){n.classList.remove(t)},e)}},{key:"_addLoadedUrl",value:function(t){var e=t.currentTarget.href;this.PhotoDownload._addLoadedUrl(e)}},{key:"_loadedUrlsHandler",value:function(t){t.target.id===this.sel.loaded_urls_mode_control?this.PhotoDownload.settings.loaded_urls=t.target.checked:t.target.id===this.sel.loaded_urls_mode_key_control&&(this.PhotoDownload.settings.loaded_urls_PKM=t.target.checked)}},{key:"_showSizeHandler",value:function(t){this.PhotoDownload.settings.show_size=t.target.checked}},{key:"_downloadModeHandler",value:function(t){var e=t.target.value;"true"===e?this.PhotoDownload.settings.download_mode=!0:"false"===e&&(this.PhotoDownload.settings.download_mode=!1)}},{key:"_preventHandler",value:function(t){return t.preventDefault(),!1}},{key:"_newTabHandler",value:function(t){return this.remove(t.currentTarget,"newTabHandler"),!0}},{key:"_downloadHandler",value:function(t){return t.preventDefault(),(0,s.default)(t.currentTarget.href),this.remove(t.currentTarget,"downloadHandler"),!1}}])&&i(t.prototype,e),o&&i(t,o),n}();n.default=a},{downloadjs:8}],2:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var s=o(t("./templates")),i=o(t("./handlers")),a=o(t("./storage"));function o(t){return t&&t.__esModule?t:{default:t}}function r(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}var c=function(){function e(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var n=this;this.imgContainer_id="pv_photo",this.selectors={_prefix:"PhotoDownload_",photoDownload_id:"PhotoDownload",imgContainer_class:"pv_image_wrap",style_id:"PhotoDownloadStyle",non_size:"non_size",ready:"ready",slide_in:"slide_in",settings:"settings",settings_open:"settings_open",draw:"draw",draw_fill:"draw_fill",icon_cog:"icon_cog",download_mode_true:"download_mode_true",download_mode_false:"download_mode_false",size_mode_control:"size_mode_control",loaded_urls_mode_control:"loaded_urls_mode_control",loaded_urls_mode_key_control:"loaded_urls_mode_key_control",loaded_urls_mode_clear_control:"loaded_urls_mode_clear_control",loaded_urls_active:"loaded_urls_active",sett:{settings_wrap:"settings_wrap",settings:"settings",settings_body:"settings_body",download_mode:"download_mode",size_mode:"size_mode",loaded_urls_mode:"loaded_urls_mode",settings_item:"settings_item",settings_item_action:"settings_item_action",settings_close_ico:"settings_close_ico",settings_section:"settings_section",settings_section_header:"settings_section_header"},btn:{btn:"btn",icon:"icon",main_title_wrap:"main_title_wrap",main_title_inner:"main_title_inner",size:"size",settings_title:"settings_title",download_effect:"download_effect"},get:function(t){t=t.split(".");var e=!1,n=this;return 1===t.length?n=this[t]:1<t.length&&(t.forEach(function(t){try{n=n[t]}catch(t){e=!0}}),n=e||!n?void 0:this._prefix+n),n}},this.triggers={mouseover:[{type:"id",selector:this.imgContainer_id,handler:this._updateBtn,child:!0},{type:"class",selector:this.selectors.get("btn.btn"),handler:this._updateBtn,child:!0}]},this.settings={_download_mode:t.download,get download_mode(){return this._download_mode},set download_mode(t){if("boolean"==typeof t){if(this._download_mode=t,n._saveSettings(),null===n._updateBtn(document.querySelector("#"+n.imgContainer_id)))return null;n.handlers.setSettingsState()}},_show_size:!0,get show_size(){return this._show_size},set show_size(t){if("boolean"==typeof t){if(this._show_size=t,n._saveSettings(),null===n._updateBtn(document.querySelector("#"+n.imgContainer_id)))return null;n.handlers.setSettingsState()}},_loaded_urls:!0,get loaded_urls(){return this._loaded_urls},set loaded_urls(t){"boolean"==typeof t&&(this._loaded_urls=t,n.handlers.setSettingsState(),n._checkLoadedUrl(!0))},_loaded_urls_PKM:!0,get loaded_urls_PKM(){return this._loaded_urls_PKM},set loaded_urls_PKM(t){"boolean"==typeof t&&(this._loaded_urls_PKM=t,n.handlers.setSettingsState(),console.log("%c%s",window.log_color?window.log_color.purple:"","_loaded_urls_PKM: "+t))}},this.loaded_urls={_loaded_urls:[],add:function(t){return"string"==typeof t&&!this.check(t)&&(this._loaded_urls.push(t),n._saveLoadedUrls(),n._checkLoadedUrl(),!0)},check:function(e){return this._loaded_urls.some(function(t){return t===e})},get:function(){return this._loaded_urls},length:function(){return this.get().length},set:function(t){var e=!(1<arguments.length&&void 0!==arguments[1])||arguments[1];return t instanceof Array&&(this._loaded_urls=t,e&&(n._saveLoadedUrls(),n._checkLoadedUrl(!0)),!0)},clear:function(){return this.set([])}},this.state={_settings:"close",get settings(){return this._settings},set settings(t){if("string"==typeof t){if(this._settings=t,n._saveState(),null===n._updateBtn(document.querySelector("#"+n.imgContainer_id)))return null;n.handlers.applyState()}}},this.timings={delay:250,open:600,settings_open:350,fill:100,btn_transition_opacity:250,btn_transition_transform:250},this.wrap=null,this.image_data=null,this.template=new s.default({selectors:this.selectors,timings:this.timings}),this.handlers=new i.default({PhotoDownload:this,selectors:this.selectors,timings:this.timings}),this.storage=new a.default({name:this.selectors.photoDownload_id,default:{settings:this.settings,state:this.state,loaded_urls:[]}}),this.init()}var t,n,o;return t=e,(n=[{key:"_updateBtn",value:function(t){if(!t)return null;if(this.parent=t.closest("."+this.selectors.imgContainer_class),!this.parent)return null;this.parent.querySelector("#"+this.selectors.photoDownload_id)||(this.wrap=this.template.createDownloadContainer(this.parent),this.handlers.setSettingsState(),this.handlers.applyState(),this.handlers.setHandlers());var e=this.wrap.querySelector("."+this.selectors.get("btn.btn"));this.image_data=window.Photoview.genData(window.cur.pvCurPhoto),this._checkLoadedUrl(),e.href=this.image_data.src,this.template.setSize(this.wrap,this.image_data,this.settings.show_size)}},{key:"_addLoadedUrl",value:function(t){this.settings.loaded_urls&&this.loaded_urls.add(t)}},{key:"_checkLoadedUrl",value:function(){if(!(0<arguments.length&&void 0!==arguments[0]&&arguments[0])){if(!this.wrap)return;var t=this.wrap.querySelector("."+this.selectors.get("btn.btn"));if(!t||this.image_data.src===t.href)return}var e=this.loaded_urls.check(this.image_data.src);this.template.setLoadedUrl(this.wrap,this.settings.loaded_urls,e),this.wrap.querySelector("#".concat(this.selectors.loaded_urls_mode_clear_control," span")).textContent=this.loaded_urls.length()}},{key:"_initWatcher",value:function(){var e=this;Object.keys(this.triggers).forEach(function(t){return document.addEventListener(t,e._watchTrigger.bind(e))})}},{key:"_watchTrigger",value:function(e){var n=this,t=this.triggers[e.type];if(void 0!==t){var o=e.target;t.forEach(function(t){!n._checkComplianceTarget(o,t,e.type)&&t.child&&n._checkComplianceChild(o,t,e.type)})}}},{key:"_checkComplianceTarget",value:function(t,e,n){"click"===n&&console.log("_checkComplianceTarget",{target:t,trigger:e});var o=!1;return"id"===e.type&&t.id===e.selector&&(o=!0,e.handler&&e.handler.call(this,t)),"class"===e.type&&t.classList.contains(e.selector)&&(o=!0,e.handler&&e.handler.call(this,t)),o}},{key:"_checkComplianceChild",value:function(t,e,n){"click"===n&&console.log("_checkComplianceChild",{target:t,trigger:e});var o="id"===e.type?t.closest("#"+e.selector):t.closest("."+e.selector);o&&this._checkComplianceTarget(o,e)}},{key:"_saveSettings",value:function(){this.storage.set("settings",this.settings)}},{key:"_saveState",value:function(){this.storage.set("state",this.state)}},{key:"_saveLoadedUrls",value:function(){this.storage.set("loaded_urls",this.loaded_urls)}},{key:"_restoreStorage",value:function(){var t=this.storage.getAll();for(var e in t)for(var n in t[e])"_"===n.charAt(0)&&(this[e][n]=t[e][n]);this._updateBtn(document.querySelector("#"+this.imgContainer_id))}},{key:"init",value:function(){console.clear(),console.log("%c%s",window.log_color?window.log_color.blue:"","PhotoDownload: Init"),this.template.injectCSS(),this._restoreStorage(),this._initWatcher()}}])&&r(t.prototype,n),o&&r(t,o),e}();n.default=c},{"./handlers":1,"./storage":3,"./templates":6}],3:[function(t,e,n){"use strict";function s(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var o=function(){function e(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),this.name=t.name,this.default=t.default,this.init()}var t,n,o;return t=e,(n=[{key:"set",value:function(t,e){if(void 0===e)return!1;var n=JSON.parse(localStorage.getItem(this.name));return n[t]=e,localStorage.setItem(this.name,JSON.stringify(n)),n}},{key:"get",value:function(t){return JSON.parse(localStorage.getItem(this.name))[t]}},{key:"getAll",value:function(){return JSON.parse(localStorage.getItem(this.name))}},{key:"remove",value:function(t){var e=JSON.parse(localStorage.getItem(this.name));return delete e[t],localStorage.setItem(this.name,JSON.stringify(e)),e}},{key:"clear",value:function(){localStorage.removeItem(this.name)}},{key:"prepareStorage",value:function(){return null==localStorage.getItem(this.name)&&(localStorage.setItem(this.name,JSON.stringify(this.default)),!0)}},{key:"init",value:function(){this.prepareStorage()}}])&&s(t.prototype,n),o&&s(t,o),e}();n.default=o},{}],4:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(t,e,n){return"\n    #".concat(t.photoDownload_id," {\n        background-color: transparent;\n        border-top-left-radius: 0;\n        color: #C3CFE0;\n        display: flex;\n        flex-direction: column;\n        position: absolute;\n        bottom: 0;\n        left: 100%;\n        opacity: 0;\n        transform: translate3d(-38px, 0, 1px);\n        will-change: transform, opacity;\n        transition: opacity ").concat(e.btn_transition_opacity,"ms ease-in-out, transform ").concat(e.btn_transition_transform,"ms ease-in-out !important;\n    }\n\n    /* При наведении на блок картинки в просмотрщике */\n    .").concat(t.imgContainer_class,":hover #").concat(t.photoDownload_id,".").concat(t.ready," {\n        opacity: .3;\n    }\n    /* При наведении на wrap кнопки */\n    .").concat(t.imgContainer_class," #").concat(t.photoDownload_id,".").concat(t.ready,":hover {\n        opacity: .8;\n    }\n    /* Если размер картинки должен отображаться */\n    #").concat(t.photoDownload_id,".").concat(t.ready,":not(.").concat(t.non_size,'):hover {\n        transform: translate3d(-100%, 0, 1px);\n    }\n\n    /* Если размер картинки не должен отображаться, в кнопке будет всегда слово "Настройки" */\n    #').concat(t.photoDownload_id,".").concat(t.non_size," .").concat(t.get("btn.main_title_inner")," {\n        transform: translate3d(0, -29px, 1px);\n    }\n\n    /* Выдвинуть кнопку при наличии slide_in */\n    #").concat(t.photoDownload_id,".").concat(t.ready,".").concat(t.slide_in," {\n        opacity: .8;\n        transform: translate3d(-100%, 0, 1px);\n    }\n\n    .").concat(t.get("btn.btn")," {\n        display: flex;\n        align-items: center;\n        position: relative;\n        padding: 10px;\n        background-color: #000;\n        border-top-left-radius: 4px;\n        color: #C3CFE0 !important;\n    }\n\n    .").concat(t.get("btn.btn"),":hover {\n        text-decoration: none;\n    }\n\n    .").concat(t.get("btn.icon")," {\n        background-image: url('").concat(n.get("white","arrow"),"');\n        background-size: contain;\n        background-repeat: no-repeat;\n        height: 18px;\n        width: 18px;\n        position: relative;\n    }\n\n    /* Эффект скачивания */\n    .").concat(t.get("btn.icon"),":before {\n        content: '';\n        background-image: url('").concat(n.get("white","arrow"),"');\n        background-size: contain;\n        background-repeat: no-repeat;\n        height: 90%;\n        width: 90%;\n        position: absolute;\n        left: 50%;\n        top: 50%;\n        opacity: .8;\n        will-change: transform, opacity;\n        transform: translate(-50%, -50%);\n        transition: transform ").concat(e.settings_open-100,"ms cubic-bezier(.22,.73,.43,.65), opacity ").concat(e.settings_open,"ms cubic-bezier(.38,.75,.46,1) !important;\n    }\n\n    .").concat(t.get("btn.icon"),".").concat(t.get("btn.download_effect"),":before {\n        transition: transform ").concat(e.settings_open+100,"ms cubic-bezier(.5,.69,.2,1.6), opacity ").concat(e.settings_open+100,"ms ease-in-out !important;\n        transform: translate(-50%, -50%) scale3d(2, 2, 2);\n        opacity: .1;\n    }\n\n    .").concat(t.get("btn.btn"),":hover .").concat(t.get("btn.icon"),",\n    .").concat(t.get("btn.btn"),":hover .").concat(t.get("btn.icon"),":before {\n        background-image: url('").concat(n.get("green","arrow"),"');\n    }\n\n    /* Отметка о ранее скаченной картинке */\n    .").concat(t.get("btn.btn"),".").concat(t.get("loaded_urls_active")," .").concat(t.get("btn.icon"),",\n    .").concat(t.get("btn.btn"),".").concat(t.get("loaded_urls_active")," .").concat(t.get("btn.icon"),":before {\n        background-image: url('").concat(n.get("yellow","arrow"),"');\n    }\n\n    #").concat(t.photoDownload_id," .").concat(t.get("btn.size")," {\n        color: ").concat(n._colors.grey," !important;\n        flex-grow: 1;\n        text-align: center;\n        height: 15px;\n    }\n\n    /* Для открытых настроек */\n    #").concat(t.photoDownload_id,".").concat(t.ready,".").concat(t.settings," {\n        opacity: .8 !important;\n        transform: translate3d(-100%, 0, 1px);\n    }\n\n    #").concat(t.photoDownload_id,".").concat(t.settings," .").concat(t.get("btn.btn")," {\n        border-top-left-radius: 0;\n    }\n\n    #").concat(t.photoDownload_id,".").concat(t.settings," .").concat(t.get("btn.btn"),":before {\n        content: '';\n        position: absolute;\n        top: -1px;\n        left: 50%;\n        transform: translateX(-50%);\n        width: calc(100% - 20px);\n        height: 1px;\n        background-color: rgba(255, 255, 255, .1);\n    }\n\n    .").concat(t.get("btn.main_title_wrap")," {\n        flex-grow: 1;\n        height: 14px;\n        overflow: hidden;\n        text-align: center;\n        user-select: none;\n    }\n\n    #").concat(t.get("photoDownload_id")," .").concat(t.get("btn.main_title_inner")," {\n        will-change: transform;\n        transition: transform ").concat(e.settings_open,"ms ease-out !important;\n    }\n\n    .").concat(t.get("btn.main_title_inner"),' * {\n        margin-bottom: 14px;\n    }\n\n    /* Для открытых настроек показываем слово "Настройки" */\n    #').concat(t.photoDownload_id,".").concat(t.ready,".").concat(t.settings_open," .").concat(t.get("btn.main_title_inner")," {\n        transform: translate3d(0, -29px, 1px);\n    }\n\n    /* Спрятать иконку стрелки при наличии icon_cog */\n    #").concat(t.photoDownload_id,".").concat(t.ready,".").concat(t.icon_cog," .").concat(t.get("btn.icon"),", \n    #").concat(t.photoDownload_id,".").concat(t.ready,".").concat(t.icon_cog," .").concat(t.get("btn.icon"),":before {\n        background-image: none;\n    }\n\n    #").concat(t.photoDownload_id,":not(.").concat(t.settings,") .").concat(t.get("sett.settings_wrap")," {\n        height: 0;\n        overflow: hidden;\n    }\n\n    #").concat(t.photoDownload_id,".").concat(t.ready,".").concat(t.settings," .").concat(t.get("sett.settings_wrap")," {\n        height: auto;\n    }\n\n    #").concat(t.photoDownload_id,".").concat(t.ready," .").concat(t.get("sett.settings")," {\n        position: relative;\n        background-color: #000;\n        border-top-left-radius: 4px;\n        font-size: 12px;\n        width: 150px;\n        will-change: transform;\n        transform: translate3d(0, 100%, 1px);\n        transition: transform ").concat(e.settings_open,"ms ease-out !important;\n        user-select: none;\n    }\n\n    /* Выдвинуть настройки вверх при наличии settings_open */\n    #").concat(t.photoDownload_id,".").concat(t.ready,".").concat(t.settings_open," .").concat(t.get("sett.settings")," {\n        transform: translate3d(0, 0%, 1px);\n    }\n    \n    .").concat(t.get("sett.settings_body")," {\n        padding: 0 10px;\n    }\n\n    .").concat(t.get("sett.settings_body")," ul {\n        padding: 5px 0;\n        margin: 0;\n        list-style: none;\n        display: flex;\n        flex-direction: column;\n    }\n\n    .").concat(t.get("sett.settings_item")," {\n        display: flex;\n        align-items: center;\n        position: relative;\n        cursor: pointer;\n    }\n\n    .").concat(t.get("sett.settings_item"),":not(:last-child) {\n        margin-bottom: 5px;\n    }\n\n    .").concat(t.get("sett.settings_item")," input[type=radio],\n    .").concat(t.get("sett.settings_item")," input[type=checkbox] {\n        margin: 0;\n        display: none;\n    }\n\n    .").concat(t.get("sett.settings_item")," button {\n        margin: 0 auto;\n        background-color: transparent;\n        font-size: 12px;\n        padding: 2px;\n        border: 1px solid;\n        border-color: ").concat(n._colors.grey,"; \n        border-radius: 2px;\n        width: 100%;\n        cursor: pointer;\n    }\n\n    .").concat(t.get("sett.settings_item")," button:hover,\n    .").concat(t.get("sett.settings_item")," button:hover span {\n        color: ").concat(n._colors.green," !important;\n    }\n\n    .").concat(t.get("sett.settings_item")," button:active,\n    .").concat(t.get("sett.settings_item")," button:active span {\n        color: ").concat(n._colors.green," !important;\n        border-color: ").concat(n._colors.green," !important;\n    }\n\n    .").concat(t.get("sett.settings_item_action")," {\n        display: flex;\n        align-items: center;\n        width: 100%;\n        min-height: 18px;\n        padding-left: 20px;\n        cursor: pointer;\n        background-size: 14px 14px;\n        background-repeat: no-repeat;\n        background-position: 0 center;\n    }\n\n    /* Иконки для радиокнопок */\n    input[type=radio] + .").concat(t.get("sett.settings_item_action")," {\n        background-image: url('").concat(n.get("white","circle"),"');\n    }\n    input[type=radio]:not([disabled]) + .").concat(t.get("sett.settings_item_action"),":hover {\n        background-image: url('").concat(n.get("green","circle"),"');\n    }\n    input[type=radio]:checked + .").concat(t.get("sett.settings_item_action")," {\n        background-image: url('").concat(n.get("white","check_circle"),"');\n    }\n    input[type=radio]:not([disabled]):checked + .").concat(t.get("sett.settings_item_action"),":hover {\n        background-image: url('").concat(n.get("green","check_circle"),"');\n    }\n\n    /* Иконки для чекбоксов */\n    input[type=checkbox] + .").concat(t.get("sett.settings_item_action")," {\n        background-image: url('").concat(n.get("white","square"),"');\n    }\n    input[type=checkbox]:not([disabled]) + .").concat(t.get("sett.settings_item_action"),":hover {\n        background-image: url('").concat(n.get("green","square"),"');\n    }\n    input[type=checkbox]:checked + .").concat(t.get("sett.settings_item_action")," {\n        background-image: url('").concat(n.get("white","check_square"),"');\n    }\n    input[type=checkbox]:not([disabled]):checked + .").concat(t.get("sett.settings_item_action"),":hover {\n        background-image: url('").concat(n.get("green","check_square"),"');\n    }\n\n    input[disabled] + .").concat(t.get("sett.settings_item_action")," {\n        opacity: .4;\n        cursor: default;\n    }\n\n    /* Иконка шестеренки */\n    #").concat(t.get("photoDownload_id")," .cog {\n        width: 18px;\n        height: 18px;\n        transform: rotate(30deg);\n        opacity: 0;\n    }\n\n    #").concat(t.photoDownload_id,".").concat(t.ready,".").concat(t.icon_cog," .").concat(t.get("btn.icon")," .cog {\n        opacity: 1;\n    }\n\n    #").concat(t.get("photoDownload_id")," .cog .cog_circle {\n        fill: none;\n        fill-opacity: 0;\n        stroke-width: 25;\n    }\n\n    #").concat(t.get("photoDownload_id")," .cog .cog_path {\n        fill: none;\n        fill-opacity: 0;\n        stroke-width: 25;\n        stroke-dasharray: 1669;\n        stroke-dashoffset: 1669;\n        transition: stroke-dashoffset ").concat(e.settings_open,"ms linear, fill-opacity ").concat(e.fill,"ms ease-out !important;\n    }\n\n    #").concat(t.get("photoDownload_id")," .cog.").concat(t.draw," .cog_path {\n        transition: stroke-dashoffset ").concat(e.open,"ms linear, fill-opacity ").concat(e.fill,"ms ease-out !important;\n        stroke-dashoffset: 0;\n    }\n\n    #").concat(t.photoDownload_id,".").concat(t.ready," .cog.").concat(t.draw_fill," .cog_path {\n        fill: #00b75a;\n        fill-opacity: 1;\n    }\n\n    #").concat(t.photoDownload_id,".").concat(t.ready," .cog.").concat(t.draw_fill," .cog_circle {\n        fill: #000;\n        stroke-width: 15;\n        fill-opacity: 1;\n    }\n\n    /* === Для настроек с секциями === */\n\n    /* Галочка вверху слева, закрывающая настройки */\n    .").concat(t.get("sett.settings_close_ico")," {\n        position: absolute;\n        top: 0;\n        left: 0;\n        z-index: 10;\n        background-image: url('").concat(n.get("white","ok"),"');\n        background-size: 16px 16px;\n        background-position: center;\n        background-repeat: no-repeat;\n        padding: 6px 10px;\n        width: 18px;\n        height: 18px;\n        cursor: pointer;\n    }\n\n    .").concat(t.get("sett.settings_close_ico"),":hover {\n        background-image: url('").concat(n.get("green","ok"),"');\n    }\n\n    /* Секция настроек */\n    .").concat(t.get("sett.settings_section"),":last-child {\n        padding-bottom: 5px;\n    }\n\n    /* При ховере на секцию, но не на заголовок, заголовку давать зеленый цвет */\n    .").concat(t.get("sett.settings_section"),":hover .").concat(t.get("sett.settings_section_header")," {\n        color: ").concat(n._colors.green," !important;\n    }\n    .").concat(t.get("sett.settings_section")," .").concat(t.get("sett.settings_section_header"),":hover  {\n        color: ").concat(n._colors.grey," !important;\n    }\n\n    /* При ховере на секцию, но не на заголовок, подчеркиванию заголовка давать зеленый цвет */\n    .").concat(t.get("sett.settings_section"),":hover .").concat(t.get("sett.settings_section_header"),":after {\n        background-color: ").concat(n._colors.green,";\n        opacity: .3;\n    }\n    .").concat(t.get("sett.settings_section")," .").concat(t.get("sett.settings_section_header"),":hover:after {\n        background-color: ").concat(n._colors.white,";\n        opacity: .1;\n    }\n\n    /* Заголовок секции настроек */\n    #").concat(t.photoDownload_id," .").concat(t.get("sett.settings_section_header")," {\n        position: relative;\n        cursor: default;\n        font-weight: bold;\n        min-height: 30px;\n        display: flex;\n        justify-content: flex-end;\n        align-items: center;\n        transition: color ").concat(e.fill,"ms ease-out !important;\n    }\n\n    /* Черта под заколовком секции настроек */\n    .").concat(t.get("sett.settings_section_header"),":after {\n        content: '';\n        position: absolute;\n        bottom: 0;\n        left: 50%;\n        transform: translateX(-50%);\n        width: calc(100% - 0px);\n        height: 1px;\n        background-color: ").concat(n._colors.white,";\n        opacity: .1;\n    }\n\n    ")}},{}],5:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(t,e,n){return'\n    <div class="'.concat(t.get("sett.settings_wrap"),'">\n        <div class="').concat(t.get("sett.settings"),'">\n            <div class="').concat(t.get("sett.settings_close_ico"),'"></div>\n\n            <div class="').concat(t.get("sett.settings_body"),'">\n\n                \x3c!-- Режим клика --\x3e\n                <div class="').concat(t.get("sett.settings_section"),'">\n                <div class="').concat(t.get("sett.settings_section_header"),'">Режим клика</div>\n\n                    <ul class="').concat(t.get("sett.download_mode"),'">\n                        <li class="').concat(t.get("sett.settings_item"),'">\n                            <input type="radio" id="').concat(t.download_mode_true,'" name="download_mode" value="true">\n                            <label for="').concat(t.download_mode_true,'" class="').concat(t.get("sett.settings_item_action"),'">Скачать</label>\n                        </li>\n                        <li class="').concat(t.get("sett.settings_item"),'">\n                            <input type="radio" id="').concat(t.download_mode_false,'" name="download_mode" value="false">\n                            <label for="').concat(t.download_mode_false,'" class="').concat(t.get("sett.settings_item_action"),'">В новой вкладке</label>\n                        </li>\n                    </ul>\n                </div>\n                \n                \x3c!-- Размер изображения --\x3e\n                <div class="').concat(t.get("sett.settings_section"),'">\n                <div class="').concat(t.get("sett.settings_section_header"),'">Размер изображения</div>\n\n                    <ul class="').concat(t.get("sett.size_mode"),'">\n                        <li class="').concat(t.get("sett.settings_item"),'">\n                            <input type="checkbox" id="').concat(t.size_mode_control,'" name="size_mode" value="true">\n                            <label for="').concat(t.size_mode_control,'" class="').concat(t.get("sett.settings_item_action"),'">Показывать</label>\n                        </li>\n                    </ul>\n                </div>\n\n                \x3c!-- Отмечать скаченные --\x3e\n                <div class="').concat(t.get("sett.settings_section"),'">\n                <div class="').concat(t.get("sett.settings_section_header"),'">Отмечать скаченные</div>\n\n                    <ul class="').concat(t.get("sett.loaded_urls_mode"),'">\n                        <li class="').concat(t.get("sett.settings_item"),'">\n                            <input type="checkbox" id="').concat(t.loaded_urls_mode_control,'" name="loaded_urls_mode" value="true">\n                            <label for="').concat(t.loaded_urls_mode_control,'" class="').concat(t.get("sett.settings_item_action"),'">Запоминать URL</label>\n                        </li>\n\n                        <li class="').concat(t.get("sett.settings_item"),'">\n                            <input type="checkbox" id="').concat(t.loaded_urls_mode_key_control,'" name="loaded_urls_mode_key" value="true" disabled>\n                            <label for="').concat(t.loaded_urls_mode_key_control,'" class="').concat(t.get("sett.settings_item_action"),'">+ клики ПКМ</label>\n                        </li>\n\n                        <li class="').concat(t.get("sett.settings_item"),'">\n                            <button id="').concat(t.loaded_urls_mode_clear_control,'">Очистить <span></span> URL</button>\n                        </li>\n                    </ul>\n                </div>\n\n            </div>\n        </div>\n\n    </div>\n\n    <a class="').concat(t.get("btn.btn"),'" href="#!" target="_blank" draggable="false">\n        <div class="').concat(t.get("btn.icon"),'">\n            ').concat(n.get("green","cog",!1),'\n        </div>\n        <div class="').concat(t.get("btn.main_title_wrap"),'">\n            <div class="').concat(t.get("btn.main_title_inner"),'">\n                <div class="').concat(t.get("btn.size"),'"></div>\n                <div class="').concat(t.get("btn.settings_title"),'">Настройки</div>\n            </div>\n        </div>\n    </a>\n    ')}},{}],6:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var s=o(t("./template-html")),i=o(t("./template-css"));function o(t){return t&&t.__esModule?t:{default:t}}function a(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}var r=function(){function e(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),this.sel=t.selectors,this.timings=t.timings,this.icons={_colors:{green:"#00B75A",red:"#F92672",white:"#FFFFFF",yellow:"#FFC000",black:"#000000",grey:"#C3CFE0"},_prefix:"data:image/svg+xml;charset=utf-8,",_template:{arrow:'<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" version="1.1" viewBox="0 0 16 16">\n                                <path fill="{{color}}" d="M 4,0 4,8 0,8 8,16 16,8 12,8 12,0 4,0 z"/>\n                            </svg>',ok:'<svg xmlns="http://www.w3.org/2000/svg" width="512" height="512" version="1.1" viewbox="0 0 512 512">\n                            <path fill="{{color}}" d="M173.898 439.404l-166.4-166.4c-9.997-9.997-9.997-26.206 0-36.204l36.203-36.204c9.997-9.998 26.207-9.998 36.204 0L192 312.69 432.095 72.596c9.997-9.997 26.207-9.997 36.204 0l36.203 36.204c9.997 9.997 9.997 26.206 0 36.204l-294.4 294.401c-9.998 9.997-26.207 9.997-36.204-.001z"></path>\n                        </svg>',cog:'<svg class="cog" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 435.29151 456.46127" version="1.1" width="435.2915" height="456.46127">\n                            <g transform="translate(-155.4149,40.478503)">\n                                <path class="cog_path" style="display:inline;stroke:{{color}};stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4;stroke-opacity:1"\n                                    d="m 258.15264,70.630447 c 25.28637,-22.526545 48.63737,-34.408525 71.039,-41.069 v -53.478 c 30.41876,-5.863806 59.48563,-4.968141 87.738,0 v 53.479 c 28.8038,8.565535 51.61963,23.119045 71.039,41.069 l 46.309,-26.759995 c 21.86242,23.783755 35.04856,49.293465 43.929,75.968998 l -46.329,26.74 c 6.50875,27.35967 6.5082,54.71933 0,82.079 l 46.329,26.74 c -8.99458,28.70805 -24.09088,53.75507 -43.929,75.957 l -46.309,-26.74 c -22.06268,20.9628 -46.09268,33.0726 -71.039,41.059 v 53.479 c -31.59152,6.25473 -60.47926,5.29935 -87.738,0 v -53.479 c -25.4605,-7.63148 -49.19415,-21.13429 -71.039,-41.059 l -46.309,26.74 c -20.18428,-21.75708 -33.84909,-47.70525 -43.929,-75.958 l 46.329,-26.74 c -7.19947,-30.9594 -5.78496,-57.61181 0,-82.079 l -46.329,-26.74 c 10.39157,-30.733913 25.59075,-55.349053 43.929,-75.968998 z"/>\n                            </g>\n                            <g transform="translate(-2.3153218e-6)">\n                                <g transform="translate(-9.9997883,-9.9949418)">\n                                    <circle class="cog_circle" cx="227.64554" cy="238.22559" r="78.324982"\n                                        style="stroke:{{color}};stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1"/>\n                                </g>\n                            </g>\n                        </svg>',circle:'<svg viewBox="0 0 512 512" width="512" height="512" xmlns="http://www.w3.org/2000/svg">\n                                <path fill="{{color}}" d="M256 8C119 8 8 119 8 256s111 248 248 248 248-111 248-248S393 8 256 8zm0 448c-110.5 0-200-89.5-200-200S145.5 56 256 56s200 89.5 200 200-89.5 200-200 200z"></path>\n                            </svg>',check_circle:'<svg viewBox="0 0 512 512" width="512" height="512" xmlns="http://www.w3.org/2000/svg">\n                                    <path fill="{{color}}" d="M504 256c0 136.967-111.033 248-248 248S8 392.967 8 256 119.033 8 256 8s248 111.033 248 248zM227.314 387.314l184-184c6.248-6.248 6.248-16.379 0-22.627l-22.627-22.627c-6.248-6.249-16.379-6.249-22.628 0L216 308.118l-70.059-70.059c-6.248-6.248-16.379-6.248-22.628 0l-22.627 22.627c-6.248 6.248-6.248 16.379 0 22.627l104 104c6.249 6.249 16.379 6.249 22.628.001z"></path>\n                                </svg>',square:'<svg viewBox="0 0 448 512" xmlns="http://www.w3.org/2000/svg">\n                                <path fill="{{color}}" d="M400 32H48C21.5 32 0 53.5 0 80v352c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48V80c0-26.5-21.5-48-48-48zm-6 400H54c-3.3 0-6-2.7-6-6V86c0-3.3 2.7-6 6-6h340c3.3 0 6 2.7 6 6v340c0 3.3-2.7 6-6 6z"></path>\n                            </svg>',check_square:'<svg viewBox="0 0 448 512" xmlns="http://www.w3.org/2000/svg">\n                                    <path fill="{{color}}" d="M400 480H48c-26.51 0-48-21.49-48-48V80c0-26.51 21.49-48 48-48h352c26.51 0 48 21.49 48 48v352c0 26.51-21.49 48-48 48zm-204.686-98.059l184-184c6.248-6.248 6.248-16.379 0-22.627l-22.627-22.627c-6.248-6.248-16.379-6.249-22.628 0L184 302.745l-70.059-70.059c-6.248-6.248-16.379-6.248-22.628 0l-22.627 22.627c-6.248 6.248-6.248 16.379 0 22.627l104 104c6.249 6.25 16.379 6.25 22.628.001z"></path>\n                                </svg>'},_temp:function(t,e){return(this._template[t]?this._template[t]:this._template.arrow).replace(/\{\{.*\}\}/gm,e||"white")},get:function(t,e){var n=!(2<arguments.length&&void 0!==arguments[2])||arguments[2],o=this._colors[t]?this._colors[t]:t,s=this._temp(e,o).replace(/[\s]{2,}/gm," ");return n?this._prefix+encodeURIComponent(s):s}}}var t,n,o;return t=e,(n=[{key:"setLoadedUrl",value:function(t,e,n){if(!t)return null;var o=t.querySelector("."+this.sel.get("btn.btn")),s=o.querySelector("."+this.sel.get("btn.icon"));s.title=e&&n?(o.classList.add(this.sel.get("loaded_urls_active")),"Это изображение уже было скачено ранее"):(o.classList.remove(this.sel.get("loaded_urls_active")),"")}},{key:"setSize",value:function(t,e,n){var o=t.querySelector("."+this.sel.get("btn.size"));e.width&&e.height?(n?t.classList.remove(this.sel.non_size):t.classList.add(this.sel.non_size),o.textContent="".concat(e.width,"x").concat(e.height)):(t.classList.add(this.sel.non_size),o.textContent="")}},{key:"createDownloadContainer",value:function(t){var e=this,n=document.createElement("div");return n.id=this.sel.photoDownload_id,n.innerHTML=this.getInnerElems(),setTimeout(function(){n.classList.add(e.sel.ready)},0),t.appendChild(n),n}},{key:"injectCSS",value:function(){var t=document.createElement("style");t.id=this.sel.style_id,t.textContent=this.getStyleContent(),document.head.appendChild(t)}},{key:"getInnerElems",value:function(){return(0,s.default)(this.sel,this.timings,this.icons)}},{key:"getStyleContent",value:function(){return(0,i.default)(this.sel,this.timings,this.icons)}}])&&a(t.prototype,n),o&&a(t,o),e}();n.default=r},{"./template-css":4,"./template-html":5}],7:[function(t,e,n){"use strict";var o,s=(o=t("./modules/photo-download"))&&o.__esModule?o:{default:o};window.photoDownload=new s.default({download:!0})},{"./modules/photo-download":2}],8:[function(t,e,n){var o,s;o=this,s=function(){return function e(t,n,o){var s,i,a=window,r="application/octet-stream",c=o||r,l=t,d=!n&&!o&&l,h=document.createElement("a"),g=function(t){return String(t)},u=a.Blob||a.MozBlob||a.WebKitBlob||g,_=n||"download";if(u=u.call?u.bind(a):Blob,"true"===String(this)&&(c=(l=[l,c])[0],l=l[1]),d&&d.length<2048&&(_=d.split("/").pop().split("?")[0],h.href=d,-1!==h.href.indexOf(d))){var p=new XMLHttpRequest;return p.open("GET",d,!0),p.responseType="blob",p.onload=function(t){e(t.target.response,_,r)},setTimeout(function(){p.send()},0),p}if(/^data:([\w+-]+\/[\w+.-]+)?[,;]/.test(l)){if(!(2096103.424<l.length&&u!==g))return navigator.msSaveBlob?navigator.msSaveBlob(v(l),_):y(l);c=(l=v(l)).type||r}else if(/([\x80-\xff])/.test(l)){for(var m=0,f=new Uint8Array(l.length),w=f.length;m<w;++m)f[m]=l.charCodeAt(m);l=new u([f],{type:c})}function v(t){for(var e=t.split(/[:;,]/),n=e[1],o=("base64"==e[2]?atob:decodeURIComponent)(e.pop()),s=o.length,i=0,a=new Uint8Array(s);i<s;++i)a[i]=o.charCodeAt(i);return new u([a],{type:n})}function y(t,e){if("download"in h)return h.href=t,h.setAttribute("download",_),h.className="download-js-link",h.innerHTML="downloading...",h.style.display="none",document.body.appendChild(h),setTimeout(function(){h.click(),document.body.removeChild(h),!0===e&&setTimeout(function(){a.URL.revokeObjectURL(h.href)},250)},66),!0;if(/(Version)\/(\d+)\.(\d+)(?:\.(\d+))?.*Safari\//.test(navigator.userAgent))return/^data:/.test(t)&&(t="data:"+t.replace(/^data:([\w\/\-\+]+)/,r)),window.open(t)||confirm("Displaying New Document\n\nUse Save As... to download, then click back to return to this page.")&&(location.href=t),!0;var n=document.createElement("iframe");document.body.appendChild(n),!e&&/^data:/.test(t)&&(t="data:"+t.replace(/^data:([\w\/\-\+]+)/,r)),n.src=t,setTimeout(function(){document.body.removeChild(n)},333)}if(s=l instanceof u?l:new u([l],{type:c}),navigator.msSaveBlob)return navigator.msSaveBlob(s,_);if(a.URL)y(a.URL.createObjectURL(s),!0);else{if("string"==typeof s||s.constructor===g)try{return y("data:"+c+";base64,"+a.btoa(s))}catch(t){return y("data:"+c+","+encodeURIComponent(s))}(i=new FileReader).onload=function(t){y(this.result)},i.readAsDataURL(s)}return!0}},"function"==typeof define&&define.amd?define([],s):"object"==typeof n?e.exports=s():o.download=s()},{}]},{},[7]);