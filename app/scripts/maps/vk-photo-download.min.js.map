{"version":3,"sources":["node_modules/browser-pack/_prelude.js","app/scripts/modules/handlers.js","app/scripts/modules/photo-download.js","app/scripts/modules/templates.js","app/scripts/vk-photo-download.js","node_modules/downloadjs/download.js"],"names":[],"mappings":"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CAAW,GAAX,CAAe,OAAf,EAAwB,QAAxB,CAvN7B,4DA0NG,KAAK,GAAL,CAAS,GAAT,CAAa,oBAAb,CA1NH,yCA0NoE,KAAK,GAAL,CAAS,GAAT,CAAa,2BAAb,CA1NpE,wDA2N6B,KAAK,KAAL,CAAW,GAAX,CAAe,OAAf,EAAwB,cAAxB,CA3N7B,4DA8NG,KAAK,GAAL,CAAS,GAAT,CAAa,oBAAb,CA9NH,yCA8NoE,KAAK,GAAL,CAAS,GAAT,CAAa,2BAAb,CA9NpE,8DA+N6B,KAAK,KAAL,CAAW,GAAX,CAAe,OAAf,EAAwB,cAAxB,CA/N7B,2NAwOG,KAAK,GAAL,CAAS,GAAT,CAAa,kBAAb,CAxOH,mBAwO4C,KAAK,GAAL,CAAS,IAxOrD,iMA6OG,KAAK,GAAL,CAAS,GAAT,CAAa,kBAAb,CA7OH,gWAsPG,KAAK,GAAL,CAAS,gBAtPZ,mBAsPqC,KAAK,GAAL,CAAS,SAtP9C,uIA2PG,KAAK,GAAL,CAAS,gBA3PZ,mBA2PqC,KAAK,GAAL,CAAS,SA3P9C;AAAA;AAiQH,K,CAAC;;;;;;;;;;;;ACrYV;;;;AAGA,MAAM,CAAC,aAAP,GAAuB,IAAI,sBAAJ,CAAkB;AACrC,EAAA,QAAQ,EAAE;AAD2B,CAAlB,CAAvB;;;ACHA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"../vk-photo-download.min.js","sourcesContent":["(function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c=\"function\"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error(\"Cannot find module '\"+i+\"'\");throw a.code=\"MODULE_NOT_FOUND\",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u=\"function\"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()","import Download from 'downloadjs';\r\n\r\n// Класс для управления обработчиками внутри кнопки\r\nexport default class HandlersManager {\r\n    constructor(params = {}) {\r\n            // Переданный инстанс главного класса\r\n            this.PhotoDownload = params.PhotoDownload;\r\n\r\n            // Тип события по умолчанию для обработчиков\r\n            this.default_event_name = 'click';\r\n\r\n            // Объект с перечислением всех возможных обработчиков\r\n            this.handlers = {\r\n                testHandler: this._testHandler,\r\n                preventHandler: this._preventHandler,\r\n                preventStopHandler: this._preventStopHandler,\r\n                newTabHandler: this._newTabHandler,\r\n                downloadHandler: this._downloadHandler,\r\n            }\r\n        } // constructor\r\n\r\n    // Установить один или несколько обработчиков на элемент\r\n    // Если на элементе были другие обработчики - они удаляются\r\n    // В итоге на элементе гарантировано только переданный набор обработчиков\r\n    set(elem, handler_name, event_name = this.default_event_name) {\r\n        if (!elem || !handler_name) return false;\r\n\r\n        let result = true;\r\n\r\n        // Удаляем все уже имеющиеся обработчики\r\n        this.removeAll(elem, event_name);\r\n\r\n        // Ставим нужные\r\n        if (handler_name instanceof Array) {\r\n            handler_name.forEach(name => {\r\n                this.add(elem, name, event_name);\r\n            });\r\n        } else if (typeof handler_name === 'string') {\r\n            this.add(elem, handler_name, event_name);\r\n        } else {\r\n            result = false;\r\n        }\r\n\r\n        return result;\r\n    }\r\n\r\n    // Добавить обработчик с переданным именем на элемент\r\n    add(elem, handler_name, event_name = this.default_event_name) {\r\n        if (!elem || !handler_name || !this.getHandler(handler_name)) return false;\r\n\r\n        elem.addEventListener(event_name, this.getHandler(handler_name));\r\n\r\n        return true;\r\n    }\r\n\r\n    // Удалить обработчик с переданным именем с элемента\r\n    remove(elem, handler_name, event_name = this.default_event_name) {\r\n        if (!elem || !handler_name || !this.getHandler(handler_name)) return false;\r\n\r\n        elem.removeEventListener(event_name, this.getHandler(handler_name));\r\n\r\n        return true;\r\n    }\r\n\r\n    // Удалить все обработчики с элемента\r\n    removeAll(elem, event_name = this.default_event_name) {\r\n        if (!elem) return false;\r\n\r\n        for (let handler in this.handlers) {\r\n            elem.removeEventListener(event_name, this.getHandler(handler));\r\n        }\r\n\r\n        return true;\r\n    }\r\n\r\n    // Получить имена всех обработчиков\r\n    getHandlersNames() {\r\n        return Object.keys(this.handlers);\r\n    }\r\n\r\n    // Получить объект всех функций-обработчиков\r\n    getHandlers() {\r\n        return this.handlers;\r\n    }\r\n\r\n    // Получить функцию-обработчик\r\n    getHandler(handler_name) {\r\n        return this.handlers[handler_name];\r\n    }\r\n\r\n    // === Обработчики ===\r\n\r\n    _testHandler() {\r\n        alert('_testHandler');\r\n    }\r\n\r\n    // Отменяет действие браузера\r\n    _preventHandler(e) {\r\n        e.preventDefault();\r\n        return false;\r\n    }\r\n\r\n    // Останавливает всплытие, другие обработчики и отменяет действие браузера\r\n    _preventStopHandler(e) {\r\n        e.preventDefault();\r\n        e.stopPropagation();\r\n        e.stopImmediatePropagation();\r\n        return false;\r\n    }\r\n\r\n    // Обработчик кнопки для режима открытия в новой вкладке\r\n    _newTabHandler() {\r\n        return true;\r\n    }\r\n\r\n    // Обработчик кнопки для режима скачивания\r\n    _downloadHandler(e) {\r\n        e.preventDefault();\r\n        Download(e.currentTarget.href);\r\n        return false;\r\n    }\r\n}","import PhotoDownloadTemplates from './templates';\r\nimport HandlersManager from './handlers';\r\n\r\nexport default class PhotoDownload {\r\n    constructor(params = {}) {\r\n        let that = this;\r\n\r\n        // Ссылка, в которую обернута картинка, \r\n        // здесь нужнв для триггера создания/обновления кнопки\r\n        this.imgContainer_id = 'pv_photo';\r\n\r\n        // Объект всех селекторов, использующихся в кнопке\r\n        this.selectors = {\r\n            _prefix: 'PhotoDownload',\r\n            // id контейнера кнопки\r\n            photoDownload_id: 'PhotoDownload',\r\n            // Контейнер, в котором находится картинка и элементы управления,\r\n            // создавать кнопку будем в нем\r\n            imgContainer_class: 'pv_image_wrap',\r\n            // id, который добавится тегу style\r\n            style_id: 'PhotoDownloadStyle',\r\n\r\n            // Класс-флаг, вешается на .PhotoDownload_size когда нет данных о разрешении\r\n            non_size: 'non_size',\r\n            // Класс-флаг, вешается для плавного opacity кнопки после создания\r\n            ready: 'ready',\r\n\r\n            settings: 'settings',\r\n            settings_open: 'settings_open',\r\n\r\n            draw: 'draw',\r\n            draw_fill: 'draw_fill',\r\n\r\n            download_mode_true: 'download_mode_true',\r\n            download_mode_false: 'download_mode_false',\r\n\r\n            sett: {\r\n                settings_wrap: 'settings_wrap',\r\n                settings: 'settings',\r\n                settings_header: 'settings_header',\r\n                settings_header_ico: 'settings_header_ico',\r\n                settings_header_text: 'settings_header_text',\r\n                settings_body: 'settings_body',\r\n                settings_mode: 'settings_mode',\r\n                settings_item: 'settings_item',\r\n                settings_item_action: 'settings_item_action',\r\n            },\r\n\r\n            btn: {\r\n                // Класс кнопки (тега a)\r\n                btn: 'btn',\r\n                // Класс блока иконки\r\n                icon: 'icon',\r\n                main_title_wrap: 'main_title_wrap',\r\n                main_title_inner: 'main_title_inner',\r\n                // Класс блока, в котором отображается разрешение картинки\r\n                size: 'size',\r\n                settings_title: 'settings_title',\r\n            },\r\n            // Метод получения селектора\r\n            get(sel) {\r\n                sel = sel.split('.');\r\n                let error = false;\r\n                let res = this;\r\n\r\n                // Если селектор на верхнем уровне объекта, он отдается как есть\r\n                if (sel.length === 1) {\r\n                    res = this[sel];\r\n                } else {\r\n                    // Иначе получаем селектор из вложенных уровней\r\n                    sel.forEach(part => {\r\n                        try {\r\n                            res = res[part];\r\n                        } catch (err) {\r\n                            error = true;\r\n                        }\r\n                    })\r\n\r\n                    // И если селектор существует, дописываем к нему префикс\r\n                    res = (error || !res) ? undefined : `${this._prefix}_${res}`;\r\n                }\r\n\r\n                return res;\r\n            }\r\n        };\r\n\r\n        // Объект с описанием обработчиков\r\n        this.triggers = {\r\n            mouseover: [\r\n                // Селектор ссылки, в которую обернута картинка в просмотрщике\r\n                {\r\n                    type: 'id',\r\n                    selector: this.imgContainer_id,\r\n                    // При наведении на контейнер картинки, будем обновлять(создавать) кнопку\r\n                    handler: this._updateBtn,\r\n                    child: true,\r\n                },\r\n                // Селектор родительского блока кнопки\r\n                {\r\n                    type: 'class',\r\n                    selector: this.selectors.PhotoDownload_btn,\r\n                    // При наведении на саму кнопку, будем обновлять в ней данные\r\n                    handler: this._updateBtn,\r\n                    child: true,\r\n                },\r\n            ], // Конец mouseover\r\n        };\r\n\r\n        // Флаг, задающий поведение клика по кнопке\r\n        // Если true, то картинка будет скачиваться\r\n        // Если false, то картинка будет открываться в новой вкладке\r\n        this.flag_download = {\r\n            _flag: params.download,\r\n            get flag() {\r\n                return this._flag;\r\n            },\r\n            set flag(val) {\r\n                if (typeof val === 'boolean') {\r\n                    this._flag = val;\r\n                    that._addBtnHandlers(this._flag);\r\n                }\r\n            }\r\n        };\r\n\r\n        // Здесь будет храниться элемент кнопки\r\n        this.wrap = null;\r\n\r\n        // Создаем инстанс шаблонизатора верстки\r\n        this.template = new PhotoDownloadTemplates({\r\n            selectors: this.selectors\r\n        });\r\n\r\n        // Создаем инстанс контроллера событий внутри кнопки\r\n        this.handlers = new HandlersManager({\r\n            PhotoDownload: this\r\n        });\r\n\r\n\r\n        // Точка входа\r\n        this.init();\r\n    }\r\n\r\n    // Добавляет на кнопку обработчики скачивания/открытия в новой вкладке\r\n    _addBtnHandlers() {\r\n        if (!this.wrap) return false;\r\n\r\n        let btn = this.wrap.querySelector('.' + this.selectors.get('btn.btn'));\r\n\r\n        // В зависимости от флага вешаем либо обработчик скачивания, либо открытия новой вкладки\r\n        if (this.flag_download.flag) {\r\n            this.handlers.set(btn, 'downloadHandler');\r\n        } else {\r\n            this.handlers.set(btn, 'newTabHandler');\r\n        }\r\n    }\r\n\r\n    // Метод обновления данных в кнопке\r\n    _updateBtn(elem) {\r\n        this.parent = elem.closest('.' + this.selectors.imgContainer_class);\r\n\r\n        // Если в родительском контейнере еще нет кнопки\r\n        if (!this.parent.querySelector('#' + this.selectors.photoDownload_id)) {\r\n            // то создадим ее\r\n            this.wrap = this.template.createDownloadContainer(this.parent);\r\n            // И повесим на нее обработчики\r\n            this._addBtnHandlers();\r\n        }\r\n\r\n        let btn = this.wrap.querySelector('.' + this.selectors.get('btn.btn'));\r\n        let size = this.wrap.querySelector('.' + this.selectors.get('btn.size'));\r\n\r\n        // Получаем из недр ВК информацию о максимальной версии открытой в просмотрщике картинки\r\n        let image_data = window.Photoview.genData(window.cur.pvCurPhoto);\r\n\r\n        // Если ссылка в кнопке не та, которая нужна сейчас\r\n        if (btn.href !== image_data.src) {\r\n            // Обновим ссылку в кнопке\r\n            btn.href = image_data.src;\r\n\r\n            // И размеры картинки, которая по ссылке\r\n            this.template.setSize(size, image_data);\r\n        }\r\n    }\r\n\r\n    // Проверка на то, является ли цель события дочерним элементом селектора из объекта триггеров\r\n    _checkComplianceChild(target, trigger) {\r\n        let parent = (trigger.type === 'id') ?\r\n            target.closest('#' + trigger.selector) :\r\n            target.closest('.' + trigger.selector);\r\n\r\n        if (parent) {\r\n            // Если да, запустим обработчик для родителя\r\n            this._checkComplianceTarget(parent, trigger);\r\n        }\r\n    }\r\n\r\n    // Проверка на соответствие цели события с селекторами объекта триггеров\r\n    _checkComplianceTarget(target, trigger) {\r\n        let compliance = false;\r\n\r\n        // Два отдельных условия для того, чтобы была возможность назначить\r\n        // разные обработчики по id и по классу на один элемент, и они сработали оба\r\n        if (trigger.type === 'id') {\r\n            if (target.id === trigger.selector) {\r\n                compliance = true;\r\n\r\n                if (trigger.handler) {\r\n                    trigger.handler.call(this, target);\r\n                }\r\n            }\r\n        }\r\n\r\n        if (trigger.type === 'class') {\r\n            if (target.classList.contains(trigger.selector)) {\r\n                compliance = true;\r\n\r\n                if (trigger.handler) {\r\n                    trigger.handler.call(this, target);\r\n                }\r\n            }\r\n        }\r\n\r\n        return compliance;\r\n    }\r\n\r\n    // Метод, который вызывает нужный обработчик при нужном событии\r\n    _watchTrigger(event) {\r\n        // Смотрим, есть ли обработчики полученного типа события\r\n        // На самом деле они всегда должны быть, но все же\r\n        let triggers = this.triggers[event.type];\r\n        if (triggers === undefined) return;\r\n\r\n        // Берем элемент, на котором сработало событие\r\n        let target = event.target;\r\n\r\n        // Цикл по объекту обработчиков полученного типа события\r\n        triggers.forEach(trigger => {\r\n            // Ищем обработчик для цели события\r\n            // Если вернется false, то не найден\r\n            let compliance = this._checkComplianceTarget(target, trigger);\r\n\r\n            // Если цели события нет в объекте обработчиков, но в обработчике указано, \r\n            // что он может срабатывать на дочернем элементе\r\n            if (!compliance && trigger.child) {\r\n                // Попробуем найти родительский элемент цели, соответствующий селектору\r\n                // из объекта обработчиков\r\n                this._checkComplianceChild(target, trigger);\r\n            }\r\n        });\r\n    }\r\n\r\n    // Установка на document слушателей типов событий, имеющихся в объекте обработчиков\r\n    _initWatcher() {\r\n        let types = Object.keys(this.triggers);\r\n        types.forEach(type => document.addEventListener(type, this._watchTrigger.bind(this)))\r\n    }\r\n\r\n    // Метод добавления на страницу стилей, необходимых для работы PhotoDownload\r\n    _injectCSS() {\r\n        let style = document.createElement('style');\r\n        style.id = this.selectors.style_id;\r\n        style.textContent = this.template.getStyleContent();\r\n\r\n        document.head.appendChild(style);\r\n    }\r\n\r\n\r\n    // Точка входа\r\n    init() {\r\n        console.log('%c%s', (window.log_color) ? window.log_color.blue : '', 'PhotoDownload: Init');\r\n\r\n        // Добавляем стили PhotoDownload\r\n        this._injectCSS();\r\n\r\n        // Инициализируем обработчики глобальных событий на document\r\n        this._initWatcher();\r\n    }\r\n}","// Класс для шаблонизации верстки кнопки и ее стилей\r\nexport default class PhotoDownloadTemplates {\r\n    constructor(params = {}) {\r\n            // Переданный объект селекторов\r\n            this.sel = params.selectors;\r\n\r\n            // Объект, генерирующий разноцветные иконки\r\n            this.icons = {\r\n                _colors: {\r\n                    green: '#00B75A',\r\n                    red: '#F92672',\r\n                    white: '#FFFFFF',\r\n                    yellow: '#FFC000',\r\n                },\r\n                _prefix: 'data:image/svg+xml;charset=utf-8,',\r\n                _template: {\r\n                    /* html */\r\n                    arrow: `<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"16\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\">\r\n                                <path fill=\"{{color}}\" d=\"M 4,0 4,8 0,8 8,16 16,8 12,8 12,0 4,0 z\"/>\r\n                            </svg>`,\r\n                    /* html */\r\n                    ok: `<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"512\" height=\"512\" version=\"1.1\" viewbox=\"0 0 512 512\">\r\n                            <path fill=\"{{color}}\" d=\"M173.898 439.404l-166.4-166.4c-9.997-9.997-9.997-26.206 0-36.204l36.203-36.204c9.997-9.998 26.207-9.998 36.204 0L192 312.69 432.095 72.596c9.997-9.997 26.207-9.997 36.204 0l36.203 36.204c9.997 9.997 9.997 26.206 0 36.204l-294.4 294.401c-9.998 9.997-26.207 9.997-36.204-.001z\"></path>\r\n                        </svg>`,\r\n                    /* html */\r\n                    cog: `<svg class=\"cog\" xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 435.29151 456.46127\" version=\"1.1\" width=\"435.2915\" height=\"456.46127\">\r\n                            <g transform=\"translate(-155.4149,40.478503)\">\r\n                                <path class=\"cog_path\" style=\"display:inline;stroke:{{color}};stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4;stroke-opacity:1\"\r\n                                    d=\"m 258.15264,70.630447 c 25.28637,-22.526545 48.63737,-34.408525 71.039,-41.069 v -53.478 c 30.41876,-5.863806 59.48563,-4.968141 87.738,0 v 53.479 c 28.8038,8.565535 51.61963,23.119045 71.039,41.069 l 46.309,-26.759995 c 21.86242,23.783755 35.04856,49.293465 43.929,75.968998 l -46.329,26.74 c 6.50875,27.35967 6.5082,54.71933 0,82.079 l 46.329,26.74 c -8.99458,28.70805 -24.09088,53.75507 -43.929,75.957 l -46.309,-26.74 c -22.06268,20.9628 -46.09268,33.0726 -71.039,41.059 v 53.479 c -31.59152,6.25473 -60.47926,5.29935 -87.738,0 v -53.479 c -25.4605,-7.63148 -49.19415,-21.13429 -71.039,-41.059 l -46.309,26.74 c -20.18428,-21.75708 -33.84909,-47.70525 -43.929,-75.958 l 46.329,-26.74 c -7.19947,-30.9594 -5.78496,-57.61181 0,-82.079 l -46.329,-26.74 c 10.39157,-30.733913 25.59075,-55.349053 43.929,-75.968998 z\"/>\r\n                            </g>\r\n                            <g transform=\"translate(-2.3153218e-6)\">\r\n                                <g transform=\"translate(-9.9997883,-9.9949418)\">\r\n                                    <circle class=\"cog_circle\" cx=\"227.64554\" cy=\"238.22559\" r=\"78.324982\"\r\n                                        style=\"stroke:{{color}};stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1\"/>\r\n                                </g>\r\n                            </g>\r\n                        </svg>`,\r\n                    /* html */\r\n                    circle: `<svg viewBox=\"0 0 512 512\" width=\"512\" height=\"512\" xmlns=\"http://www.w3.org/2000/svg\">\r\n                                <path fill=\"{{color}}\" d=\"M256 8C119 8 8 119 8 256s111 248 248 248 248-111 248-248S393 8 256 8zm0 448c-110.5 0-200-89.5-200-200S145.5 56 256 56s200 89.5 200 200-89.5 200-200 200z\"></path>\r\n                            </svg>`,\r\n                    /* html */\r\n                    check_circle: `<svg viewBox=\"0 0 512 512\" width=\"512\" height=\"512\" xmlns=\"http://www.w3.org/2000/svg\">\r\n                                    <path fill=\"{{color}}\" d=\"M504 256c0 136.967-111.033 248-248 248S8 392.967 8 256 119.033 8 256 8s248 111.033 248 248zM227.314 387.314l184-184c6.248-6.248 6.248-16.379 0-22.627l-22.627-22.627c-6.248-6.249-16.379-6.249-22.628 0L216 308.118l-70.059-70.059c-6.248-6.248-16.379-6.248-22.628 0l-22.627 22.627c-6.248 6.248-6.248 16.379 0 22.627l104 104c6.249 6.249 16.379 6.249 22.628.001z\"></path>\r\n                                </svg>`,\r\n                },\r\n                _temp(template, color) {\r\n                    let _template = this._template[template] ? this._template[template] : this._template.arrow;\r\n                    return _template.replace(/\\{\\{.*\\}\\}/gm, color ? color : 'white');\r\n                },\r\n                get(color, template, url = true) {\r\n                    let _color = this._colors[color] ? this._colors[color] : color;\r\n                    let svg = this._temp(template, _color).replace(/[\\s]{2,}/gm, ' ');\r\n                    return url ? this._prefix + encodeURIComponent(svg) : svg;\r\n                }\r\n            };\r\n        } // constructor\r\n\r\n    // Метод для отображения размеров картинки в кнопке\r\n    setSize(size, image_data) {\r\n        if (image_data.width && image_data.height) {\r\n            size.classList.remove(this.sel.non_size);\r\n            size.textContent = `${image_data.width}x${image_data.height}`;\r\n        } else {\r\n            size.classList.add(this.sel.non_size);\r\n            size.textContent = '';\r\n        }\r\n    }\r\n\r\n    // Метод создания контейнера с кнопкой\r\n    createDownloadContainer(parent) {\r\n        let wrap = document.createElement('div');\r\n        wrap.id = this.sel.photoDownload_id;\r\n\r\n        // Заполнение контейнера внутренними элементами\r\n        wrap.innerHTML = this.getInnerElems();\r\n\r\n        setTimeout(() => {\r\n            wrap.classList.add(this.sel.ready);\r\n            // Для теста, чтобы настройки сразу открыты были\r\n            wrap.classList.add(this.sel.settings);\r\n            wrap.classList.add(this.sel.settings_open);\r\n\r\n            wrap.querySelector('.cog').classList.add(this.sel.draw);\r\n        }, 0);\r\n\r\n        parent.appendChild(wrap);\r\n\r\n        return wrap;\r\n    }\r\n\r\n    // Метод, генерирующий верстку самой кнопки\r\n    getInnerElems() {\r\n        return /* html */ `\r\n            <div class=\"${this.sel.get('sett.settings_wrap')}\">\r\n                <div class=\"${this.sel.get('sett.settings')}\">\r\n                    <div class=\"${this.sel.get('sett.settings_header')}\">\r\n                        <div class=\"${this.sel.get('sett.settings_header_ico')}\"></div>\r\n                        <div class=\"${this.sel.get('sett.settings_header_text')}\">Режим клика</div>\r\n                    </div>\r\n                    <div class=\"${this.sel.get('sett.settings_body')}\">\r\n                        <ul class=\"${this.sel.get('sett.settings_mode')}\">\r\n                            <li class=\"${this.sel.get('sett.settings_item')}\">\r\n                                <input type=\"radio\" id=\"${this.sel.download_mode_true}\" name=\"download_mode\" value=\"true\" checked>\r\n                                <label for=\"${this.sel.download_mode_true}\" class=\"${this.sel.get('sett.settings_item_action')}\">Скачать</label>\r\n                            </li>\r\n                            <li class=\"${this.sel.get('sett.settings_item')}\">\r\n                                <input type=\"radio\" id=\"${this.sel.download_mode_false}\" name=\"download_mode\" value=\"false\">\r\n                                <label for=\"${this.sel.download_mode_false}\" class=\"${this.sel.get('sett.settings_item_action')}\">В новой вкладке</label>\r\n                            </li>\r\n                        </ul>\r\n                    </div>\r\n                </div>\r\n\r\n            </div>\r\n\r\n            <a class=\"${this.sel.get('btn.btn')}\" href=\"#!\" target=\"_blank\" draggable=\"false\">\r\n                <div class=\"${this.sel.get('btn.icon')}\">\r\n                    ${this.icons.get('green', 'cog', false)}\r\n                </div>\r\n                <div class=\"${this.sel.get('btn.main_title_wrap')}\">\r\n                    <div class=\"${this.sel.get('btn.main_title_inner')}\">\r\n                        <div class=\"${this.sel.get('btn.size')}\"></div>\r\n                        <div class=\"${this.sel.get('btn.settings_title')}\">Настройки</div>\r\n                    </div>\r\n                </div>\r\n            </a>\r\n        `;\r\n    }\r\n\r\n    // Метод, шаблонизирующий стили кнопки\r\n    getStyleContent() {\r\n            return /* css */ `\r\n            #${this.sel.photoDownload_id} {\r\n                background-color: transparent;\r\n                border-top-left-radius: 0;\r\n                color: #C3CFE0;\r\n                display: flex;\r\n                flex-direction: column;\r\n                position: absolute;\r\n                bottom: 0;\r\n                left: 100%;\r\n                opacity: 0;\r\n                transform: translate3d(-38px, 0, 1px);\r\n                will-change: transform, opacity;\r\n                transition: opacity .25s ease-in-out, transform .25s ease-in-out !important;\r\n            }\r\n            \r\n            .${this.sel.imgContainer_class}:hover #${this.sel.photoDownload_id}.${this.sel.ready} {\r\n                opacity: .3;\r\n            }\r\n            \r\n            .${this.sel.imgContainer_class} #${this.sel.photoDownload_id}.${this.sel.ready}:hover {\r\n                opacity: .8;\r\n                transform: translate3d(-100%, 0, 1px);\r\n            }\r\n            \r\n            .${this.sel.get('btn.btn')} {\r\n                display: flex;\r\n                align-items: center;\r\n                padding: 10px;\r\n                background-color: #000;\r\n                border-top-left-radius: 4px;\r\n                color: #C3CFE0 !important;\r\n            }\r\n            \r\n            .${this.sel.get('btn.btn')}:hover {\r\n                text-decoration: none;\r\n            }\r\n            \r\n            .${this.sel.get('btn.icon')} {\r\n                background-image: url('${this.icons.get('white', 'arrow')}');\r\n                background-size: contain;\r\n                background-repeat: no-repeat;\r\n                height: 18px;\r\n                width: 18px;\r\n            }\r\n            \r\n            .${this.sel.get('btn.btn')}:hover .${this.sel.get('btn.icon')} {\r\n                background-image: url('${this.icons.get('green', 'arrow')}');\r\n            }\r\n            \r\n            #${this.sel.photoDownload_id} .${this.sel.get('btn.size')}:not(.non_size) {\r\n                padding-left: 10px;\r\n                color: #C3CFE0 !important;\r\n                flex-grow: 1;\r\n                text-align: center;\r\n            }\r\n            \r\n            #${this.sel.photoDownload_id}.${this.sel.settings} {\r\n                opacity: .8 !important;\r\n                transform: translate3d(-100%, 0, 1px);\r\n            }\r\n            \r\n            #${this.sel.photoDownload_id}.${this.sel.settings} .${this.sel.get('btn.btn')} {\r\n                border-top-left-radius: 0;\r\n                position: relative;\r\n            }\r\n            \r\n            #${this.sel.photoDownload_id}.${this.sel.settings} .${this.sel.get('btn.btn')}:before {\r\n                content: '';\r\n                position: absolute;\r\n                top: -1px;\r\n                left: 50%;\r\n                transform: translateX(-50%);\r\n                width: calc(100% - 30px);\r\n                height: 1px;\r\n                background-color: rgba(255, 255, 255, .1);\r\n            }\r\n            \r\n            .${this.sel.get('btn.main_title_wrap')} {\r\n                flex-grow: 1;\r\n                height: 14px;\r\n                overflow: hidden;\r\n                text-align: center;\r\n                user-select: none;\r\n            }\r\n            \r\n            #${this.sel.get('photoDownload_id')} .${this.sel.get('btn.main_title_inner')} {\r\n                will-change: transform;\r\n                transition: transform .25s ease-out !important;\r\n            }\r\n            \r\n            .${this.sel.get('btn.main_title_inner')} * {\r\n                margin-bottom: 14px;\r\n            }\r\n            \r\n            #${this.sel.photoDownload_id}.${this.sel.settings} .${this.sel.get('btn.main_title_inner')} {\r\n                transform: translate3d(0, -28px, 1px);\r\n            }\r\n            \r\n            #${this.sel.photoDownload_id}.${this.sel.settings} .${this.sel.get('btn.icon')} {\r\n                background-image: none;\r\n            }\r\n            \r\n            #${this.sel.photoDownload_id}.${this.sel.settings} .${this.sel.get('btn.icon')} .cog {\r\n                width: 18px;\r\n                height: 18px;\r\n                transform: rotate(30deg);\r\n            }\r\n            \r\n            #${this.sel.photoDownload_id}:not(.${this.sel.settings}) .${this.sel.get('sett.settings_wrap')} {\r\n                height: 0;\r\n                overflow: hidden;\r\n            }\r\n            \r\n            #${this.sel.photoDownload_id}.${this.sel.settings} .${this.sel.get('sett.settings_wrap')} {\r\n                height: auto;\r\n            }\r\n            \r\n            #${this.sel.get('photoDownload_id')} .${this.sel.get('sett.settings')} {\r\n                background-color: #000;\r\n                border-top-left-radius: 4px;\r\n                font-size: 12px;\r\n                width: 150px;\r\n                will-change: transform;\r\n                transform: translate3d(0, 100%, 1px);\r\n                transition: transform .25s ease-out !important;\r\n                user-select: none;\r\n            }\r\n            \r\n            #${this.sel.photoDownload_id}.${this.sel.settings_open} .${this.sel.get('sett.settings')} {\r\n                transform: translate3d(0, 0%, 1px);\r\n            }\r\n            \r\n            .${this.sel.get('sett.settings_header')} {\r\n                position: relative;\r\n                display: flex;\r\n                align-items: center;\r\n                padding-right: 16px;\r\n            }\r\n            \r\n            .${this.sel.get('sett.settings_header')}:after {\r\n                content: '';\r\n                position: absolute;\r\n                bottom: 0;\r\n                left: 50%;\r\n                transform: translateX(-50%);\r\n                width: calc(100% - 30px);\r\n                height: 1px;\r\n                background-color: rgba(255, 255, 255, .1);\r\n            }\r\n            \r\n            .${this.sel.get('sett.settings_body')} {\r\n                padding: 10px;\r\n            }\r\n            \r\n            .${this.sel.get('sett.settings_header_ico')} {\r\n                background-image: url('${this.icons.get('white', 'ok')}');\r\n                background-size: 16px 16px;\r\n                background-position: center;\r\n                background-repeat: no-repeat;\r\n                padding: 6px 10px;\r\n                width: 18px;\r\n                height: 18px;\r\n                cursor: pointer;\r\n            }\r\n            \r\n            .${this.sel.get('sett.settings_header_ico')}:hover {\r\n                background-image: url('${this.icons.get('green', 'ok')}');\r\n            }\r\n            \r\n            .${this.sel.get('sett.settings_header_text')} {\r\n                text-align: right;\r\n                flex-grow: 1;\r\n                cursor: default;\r\n                font-weight: bold;\r\n            }\r\n            \r\n            .${this.sel.get('sett.settings_mode')} {\r\n                padding: 0;\r\n                margin: 0;\r\n                list-style: none;\r\n                display: flex;\r\n                flex-direction: column;\r\n            }\r\n            \r\n            .${this.sel.get('sett.settings_item')} {\r\n                display: flex;\r\n                align-items: center;\r\n                position: relative;\r\n                cursor: pointer;\r\n            }\r\n            \r\n            .${this.sel.get('sett.settings_item')}:not(:last-child) {\r\n                margin-bottom: 5px;\r\n            }\r\n            \r\n            .${this.sel.get('sett.settings_item')} input[type=radio] {\r\n                margin: 0;\r\n                display: none;\r\n            }\r\n            \r\n            .${this.sel.get('sett.settings_item_action')} {\r\n                display: flex;\r\n                align-items: center;\r\n                width: 100%;\r\n                height: 18px;\r\n                padding-left: 20px;\r\n                cursor: pointer;\r\n                background-image: url('${this.icons.get('white', 'circle')}');\r\n                background-size: 14px 14px;\r\n                background-repeat: no-repeat;\r\n                background-position: 0 center;\r\n            }\r\n            \r\n            .${this.sel.get('sett.settings_item_action')}:hover {\r\n                background-image: url('${this.icons.get('green', 'circle')}');\r\n            }\r\n            \r\n            .${this.sel.get('sett.settings_item')} input[type=radio]:checked~.${this.sel.get('sett.settings_item_action')} {\r\n                background-image: url('${this.icons.get('white', 'check_circle')}');\r\n            }\r\n            \r\n            .${this.sel.get('sett.settings_item')} input[type=radio]:checked~.${this.sel.get('sett.settings_item_action')}:hover {\r\n                background-image: url('${this.icons.get('green', 'check_circle')}');\r\n            }\r\n            \r\n            .cog .cog_circle {\r\n                fill: none;\r\n                fill-opacity: 0;\r\n                stroke-width: 25;\r\n            }\r\n            \r\n            #${this.sel.get('photoDownload_id')} .cog.${this.sel.draw} .cog_path {\r\n                transition: stroke-dashoffset .5s linear, fill-opacity .1s ease-out !important;\r\n                stroke-dashoffset: 0;\r\n            }\r\n\r\n            #${this.sel.get('photoDownload_id')} .cog .cog_path {\r\n                fill: none;\r\n                fill-opacity: 0;\r\n                stroke-width: 25;\r\n                stroke-dasharray: 1669;\r\n                stroke-dashoffset: 1669;\r\n                transition: stroke-dashoffset .1s linear, fill-opacity .1s ease-out !important;\r\n            }\r\n            \r\n            #${this.sel.photoDownload_id} .cog.${this.sel.draw_fill} .cog_path {\r\n                fill: #00b75a;\r\n                fill-opacity: 1;\r\n            }\r\n            \r\n            #${this.sel.photoDownload_id} .cog.${this.sel.draw_fill} .cog_circle {\r\n                fill: #000;\r\n                stroke-width: 15;\r\n                fill-opacity: 1;\r\n            }\r\n        `;\r\n        } // getStyleContent\r\n\r\n}","import PhotoDownload from './modules/photo-download';\r\n\r\n\r\nwindow.photoDownload = new PhotoDownload({\r\n    download: true\r\n});","//download.js v4.2, by dandavis; 2008-2016. [MIT] see http://danml.com/download.html for tests/usage\n// v1 landed a FF+Chrome compat way of downloading strings to local un-named files, upgraded to use a hidden frame and optional mime\n// v2 added named files via a[download], msSaveBlob, IE (10+) support, and window.URL support for larger+faster saves than dataURLs\n// v3 added dataURL and Blob Input, bind-toggle arity, and legacy dataURL fallback was improved with force-download mime and base64 support. 3.1 improved safari handling.\n// v4 adds AMD/UMD, commonJS, and plain browser support\n// v4.1 adds url download capability via solo URL argument (same domain/CORS only)\n// v4.2 adds semantic variable names, long (over 2MB) dataURL support, and hidden by default temp anchors\n// https://github.com/rndme/download\n\n(function (root, factory) {\n\tif (typeof define === 'function' && define.amd) {\n\t\t// AMD. Register as an anonymous module.\n\t\tdefine([], factory);\n\t} else if (typeof exports === 'object') {\n\t\t// Node. Does not work with strict CommonJS, but\n\t\t// only CommonJS-like environments that support module.exports,\n\t\t// like Node.\n\t\tmodule.exports = factory();\n\t} else {\n\t\t// Browser globals (root is window)\n\t\troot.download = factory();\n  }\n}(this, function () {\n\n\treturn function download(data, strFileName, strMimeType) {\n\n\t\tvar self = window, // this script is only for browsers anyway...\n\t\t\tdefaultMime = \"application/octet-stream\", // this default mime also triggers iframe downloads\n\t\t\tmimeType = strMimeType || defaultMime,\n\t\t\tpayload = data,\n\t\t\turl = !strFileName && !strMimeType && payload,\n\t\t\tanchor = document.createElement(\"a\"),\n\t\t\ttoString = function(a){return String(a);},\n\t\t\tmyBlob = (self.Blob || self.MozBlob || self.WebKitBlob || toString),\n\t\t\tfileName = strFileName || \"download\",\n\t\t\tblob,\n\t\t\treader;\n\t\t\tmyBlob= myBlob.call ? myBlob.bind(self) : Blob ;\n\t  \n\t\tif(String(this)===\"true\"){ //reverse arguments, allowing download.bind(true, \"text/xml\", \"export.xml\") to act as a callback\n\t\t\tpayload=[payload, mimeType];\n\t\t\tmimeType=payload[0];\n\t\t\tpayload=payload[1];\n\t\t}\n\n\n\t\tif(url && url.length< 2048){ // if no filename and no mime, assume a url was passed as the only argument\n\t\t\tfileName = url.split(\"/\").pop().split(\"?\")[0];\n\t\t\tanchor.href = url; // assign href prop to temp anchor\n\t\t  \tif(anchor.href.indexOf(url) !== -1){ // if the browser determines that it's a potentially valid url path:\n        \t\tvar ajax=new XMLHttpRequest();\n        \t\tajax.open( \"GET\", url, true);\n        \t\tajax.responseType = 'blob';\n        \t\tajax.onload= function(e){ \n\t\t\t\t  download(e.target.response, fileName, defaultMime);\n\t\t\t\t};\n        \t\tsetTimeout(function(){ ajax.send();}, 0); // allows setting custom ajax headers using the return:\n\t\t\t    return ajax;\n\t\t\t} // end if valid url?\n\t\t} // end if url?\n\n\n\t\t//go ahead and download dataURLs right away\n\t\tif(/^data:([\\w+-]+\\/[\\w+.-]+)?[,;]/.test(payload)){\n\t\t\n\t\t\tif(payload.length > (1024*1024*1.999) && myBlob !== toString ){\n\t\t\t\tpayload=dataUrlToBlob(payload);\n\t\t\t\tmimeType=payload.type || defaultMime;\n\t\t\t}else{\t\t\t\n\t\t\t\treturn navigator.msSaveBlob ?  // IE10 can't do a[download], only Blobs:\n\t\t\t\t\tnavigator.msSaveBlob(dataUrlToBlob(payload), fileName) :\n\t\t\t\t\tsaver(payload) ; // everyone else can save dataURLs un-processed\n\t\t\t}\n\t\t\t\n\t\t}else{//not data url, is it a string with special needs?\n\t\t\tif(/([\\x80-\\xff])/.test(payload)){\t\t\t  \n\t\t\t\tvar i=0, tempUiArr= new Uint8Array(payload.length), mx=tempUiArr.length;\n\t\t\t\tfor(i;i<mx;++i) tempUiArr[i]= payload.charCodeAt(i);\n\t\t\t \tpayload=new myBlob([tempUiArr], {type: mimeType});\n\t\t\t}\t\t  \n\t\t}\n\t\tblob = payload instanceof myBlob ?\n\t\t\tpayload :\n\t\t\tnew myBlob([payload], {type: mimeType}) ;\n\n\n\t\tfunction dataUrlToBlob(strUrl) {\n\t\t\tvar parts= strUrl.split(/[:;,]/),\n\t\t\ttype= parts[1],\n\t\t\tdecoder= parts[2] == \"base64\" ? atob : decodeURIComponent,\n\t\t\tbinData= decoder( parts.pop() ),\n\t\t\tmx= binData.length,\n\t\t\ti= 0,\n\t\t\tuiArr= new Uint8Array(mx);\n\n\t\t\tfor(i;i<mx;++i) uiArr[i]= binData.charCodeAt(i);\n\n\t\t\treturn new myBlob([uiArr], {type: type});\n\t\t }\n\n\t\tfunction saver(url, winMode){\n\n\t\t\tif ('download' in anchor) { //html5 A[download]\n\t\t\t\tanchor.href = url;\n\t\t\t\tanchor.setAttribute(\"download\", fileName);\n\t\t\t\tanchor.className = \"download-js-link\";\n\t\t\t\tanchor.innerHTML = \"downloading...\";\n\t\t\t\tanchor.style.display = \"none\";\n\t\t\t\tdocument.body.appendChild(anchor);\n\t\t\t\tsetTimeout(function() {\n\t\t\t\t\tanchor.click();\n\t\t\t\t\tdocument.body.removeChild(anchor);\n\t\t\t\t\tif(winMode===true){setTimeout(function(){ self.URL.revokeObjectURL(anchor.href);}, 250 );}\n\t\t\t\t}, 66);\n\t\t\t\treturn true;\n\t\t\t}\n\n\t\t\t// handle non-a[download] safari as best we can:\n\t\t\tif(/(Version)\\/(\\d+)\\.(\\d+)(?:\\.(\\d+))?.*Safari\\//.test(navigator.userAgent)) {\n\t\t\t\tif(/^data:/.test(url))\turl=\"data:\"+url.replace(/^data:([\\w\\/\\-\\+]+)/, defaultMime);\n\t\t\t\tif(!window.open(url)){ // popup blocked, offer direct download:\n\t\t\t\t\tif(confirm(\"Displaying New Document\\n\\nUse Save As... to download, then click back to return to this page.\")){ location.href=url; }\n\t\t\t\t}\n\t\t\t\treturn true;\n\t\t\t}\n\n\t\t\t//do iframe dataURL download (old ch+FF):\n\t\t\tvar f = document.createElement(\"iframe\");\n\t\t\tdocument.body.appendChild(f);\n\n\t\t\tif(!winMode && /^data:/.test(url)){ // force a mime that will download:\n\t\t\t\turl=\"data:\"+url.replace(/^data:([\\w\\/\\-\\+]+)/, defaultMime);\n\t\t\t}\n\t\t\tf.src=url;\n\t\t\tsetTimeout(function(){ document.body.removeChild(f); }, 333);\n\n\t\t}//end saver\n\n\n\n\n\t\tif (navigator.msSaveBlob) { // IE10+ : (has Blob, but not a[download] or URL)\n\t\t\treturn navigator.msSaveBlob(blob, fileName);\n\t\t}\n\n\t\tif(self.URL){ // simple fast and modern way using Blob and URL:\n\t\t\tsaver(self.URL.createObjectURL(blob), true);\n\t\t}else{\n\t\t\t// handle non-Blob()+non-URL browsers:\n\t\t\tif(typeof blob === \"string\" || blob.constructor===toString ){\n\t\t\t\ttry{\n\t\t\t\t\treturn saver( \"data:\" +  mimeType   + \";base64,\"  +  self.btoa(blob)  );\n\t\t\t\t}catch(y){\n\t\t\t\t\treturn saver( \"data:\" +  mimeType   + \",\" + encodeURIComponent(blob)  );\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Blob but not URL support:\n\t\t\treader=new FileReader();\n\t\t\treader.onload=function(e){\n\t\t\t\tsaver(this.result);\n\t\t\t};\n\t\t\treader.readAsDataURL(blob);\n\t\t}\n\t\treturn true;\n\t}; /* end download() */\n}));\n"],"preExistingComment":"//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJhcHAvc2NyaXB0cy9tb2R1bGVzL2hhbmRsZXJzLmpzIiwiYXBwL3NjcmlwdHMvbW9kdWxlcy9waG90by1kb3dubG9hZC5qcyIsImFwcC9zY3JpcHRzL21vZHVsZXMvdGVtcGxhdGVzLmpzIiwiYXBwL3NjcmlwdHMvdmstcGhvdG8tZG93bmxvYWQuanMiLCJub2RlX21vZHVsZXMvZG93bmxvYWRqcy9kb3dubG9hZC5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTs7Ozs7Ozs7QUNBQTs7Ozs7Ozs7OztBQUVBO0lBQ3FCLGU7OztBQUNqQiw2QkFBeUI7QUFBQSxRQUFiLE1BQWEsdUVBQUosRUFBSTs7QUFBQTs7QUFDakI7QUFDQSxTQUFLLGFBQUwsR0FBcUIsTUFBTSxDQUFDLGFBQTVCLENBRmlCLENBSWpCOztBQUNBLFNBQUssa0JBQUwsR0FBMEIsT0FBMUIsQ0FMaUIsQ0FPakI7O0FBQ0EsU0FBSyxRQUFMLEdBQWdCO0FBQ1osTUFBQSxXQUFXLEVBQUUsS0FBSyxZQUROO0FBRVosTUFBQSxjQUFjLEVBQUUsS0FBSyxlQUZUO0FBR1osTUFBQSxrQkFBa0IsRUFBRSxLQUFLLG1CQUhiO0FBSVosTUFBQSxhQUFhLEVBQUUsS0FBSyxjQUpSO0FBS1osTUFBQSxlQUFlLEVBQUUsS0FBSztBQUxWLEtBQWhCO0FBT0gsRyxDQUFDO0FBRU47QUFDQTtBQUNBOzs7Ozt3QkFDSSxJLEVBQU0sWSxFQUFvRDtBQUFBOztBQUFBLFVBQXRDLFVBQXNDLHVFQUF6QixLQUFLLGtCQUFvQjtBQUMxRCxVQUFJLENBQUMsSUFBRCxJQUFTLENBQUMsWUFBZCxFQUE0QixPQUFPLEtBQVA7QUFFNUIsVUFBSSxNQUFNLEdBQUcsSUFBYixDQUgwRCxDQUsxRDs7QUFDQSxXQUFLLFNBQUwsQ0FBZSxJQUFmLEVBQXFCLFVBQXJCLEVBTjBELENBUTFEOztBQUNBLFVBQUksWUFBWSxZQUFZLEtBQTVCLEVBQW1D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O0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBIiwiZmlsZSI6ImdlbmVyYXRlZC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzQ29udGVudCI6WyIoZnVuY3Rpb24oKXtmdW5jdGlvbiByKGUsbix0KXtmdW5jdGlvbiBvKGksZil7aWYoIW5baV0pe2lmKCFlW2ldKXt2YXIgYz1cImZ1bmN0aW9uXCI9PXR5cGVvZiByZXF1aXJlJiZyZXF1aXJlO2lmKCFmJiZjKXJldHVybiBjKGksITApO2lmKHUpcmV0dXJuIHUoaSwhMCk7dmFyIGE9bmV3IEVycm9yKFwiQ2Fubm90IGZpbmQgbW9kdWxlICdcIitpK1wiJ1wiKTt0aHJvdyBhLmNvZGU9XCJNT0RVTEVfTk9UX0ZPVU5EXCIsYX12YXIgcD1uW2ldPXtleHBvcnRzOnt9fTtlW2ldWzBdLmNhbGwocC5leHBvcnRzLGZ1bmN0aW9uKHIpe3ZhciBuPWVbaV1bMV1bcl07cmV0dXJuIG8obnx8cil9LHAscC5leHBvcnRzLHIsZSxuLHQpfXJldHVybiBuW2ldLmV4cG9ydHN9Zm9yKHZhciB1PVwiZnVuY3Rpb25cIj09dHlwZW9mIHJlcXVpcmUmJnJlcXVpcmUsaT0wO2k8dC5sZW5ndGg7aSsrKW8odFtpXSk7cmV0dXJuIG99cmV0dXJuIHJ9KSgpIiwiaW1wb3J0IERvd25sb2FkIGZyb20gJ2Rvd25sb2FkanMnO1xyXG5cclxuLy8g0JrQu9Cw0YHRgSDQtNC70Y8g0YPQv9GA0LDQstC70LXQvdC40Y8g0L7QsdGA0LDQsdC+0YLRh9C40LrQsNC80Lgg0LLQvdGD0YLRgNC4INC60L3QvtC/0LrQuFxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBIYW5kbGVyc01hbmFnZXIge1xyXG4gICAgY29uc3RydWN0b3IocGFyYW1zID0ge30pIHtcclxuICAgICAgICAgICAgLy8g0J/QtdGA0LXQtNCw0L3QvdGL0Lkg0LjQvdGB0YLQsNC90YEg0LPQu9Cw0LLQvdC+0LPQviDQutC70LDRgdGB0LBcclxuICAgICAgICAgICAgdGhpcy5QaG90b0Rvd25sb2FkID0gcGFyYW1zLlBob3RvRG93bmxvYWQ7XHJcblxyXG4gICAgICAgICAgICAvLyDQotC40L8g0YHQvtCx0YvRgtC40Y8g0L/QviDRg9C80L7Qu9GH0LDQvdC40Y4g0LTQu9GPINC+0LHRgNCw0LHQvtGC0YfQuNC60L7QslxyXG4gICAgICAgICAgICB0aGlzLmRlZmF1bHRfZXZlbnRfbmFtZSA9ICdjbGljayc7XHJcblxyXG4gICAgICAgICAgICAvLyDQntCx0YrQtdC60YIg0YEg0L/QtdGA0LXRh9C40YHQu9C10L3QuNC10Lwg0LLRgdC10YUg0LLQvtC30LzQvtC20L3Ri9GFINC+0LHRgNCw0LHQvtGC0YfQuNC60L7QslxyXG4gICAgICAgICAgICB0aGlzLmhhbmRsZXJzID0ge1xyXG4gICAgICAgICAgICAgICAgdGVzdEhhbmRsZXI6IHRoaXMuX3Rlc3RIYW5kbGVyLFxyXG4gICAgICAgICAgICAgICAgcHJldmVudEhhbmRsZXI6IHRoaXMuX3ByZXZlbnRIYW5kbGVyLFxyXG4gICAgICAgICAgICAgICAgcHJldmVudFN0b3BIYW5kbGVyOiB0aGlzLl9wcmV2ZW50U3RvcEhhbmRsZXIsXHJcbiAgICAgICAgICAgICAgICBuZXdUYWJIYW5kbGVyOiB0aGlzLl9uZXdUYWJIYW5kbGVyLFxyXG4gICAgICAgICAgICAgICAgZG93bmxvYWRIYW5kbGVyOiB0aGlzLl9kb3dubG9hZEhhbmRsZXIsXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9IC8vIGNvbnN0cnVjdG9yXHJcblxyXG4gICAgLy8g0KPRgdGC0LDQvdC+0LLQuNGC0Ywg0L7QtNC40L0g0LjQu9C4INC90LXRgdC60L7Qu9GM0LrQviDQvtCx0YDQsNCx0L7RgtGH0LjQutC+0LIg0L3QsCDRjdC70LXQvNC10L3RglxyXG4gICAgLy8g0JXRgdC70Lgg0L3QsCDRjdC70LXQvNC10L3RgtC1INCx0YvQu9C4INC00YDRg9Cz0LjQtSDQvtCx0YDQsNCx0L7RgtGH0LjQutC4IC0g0L7QvdC4INGD0LTQsNC70Y/RjtGC0YHRj1xyXG4gICAgLy8g0JIg0LjRgtC+0LPQtSDQvdCwINGN0LvQtdC80LXQvdGC0LUg0LPQsNGA0LDQvdGC0LjRgNC+0LLQsNC90L4g0YLQvtC70YzQutC+INC/0LXRgNC10LTQsNC90L3Ri9C5INC90LDQsdC+0YAg0L7QsdGA0LDQsdC+0YLRh9C40LrQvtCyXHJcbiAgICBzZXQoZWxlbSwgaGFuZGxlcl9uYW1lLCBldmVudF9uYW1lID0gdGhpcy5kZWZhdWx0X2V2ZW50X25hbWUpIHtcclxuICAgICAgICBpZiAoIWVsZW0gfHwgIWhhbmRsZXJfbmFtZSkgcmV0dXJuIGZhbHNlO1xyXG5cclxuICAgICAgICBsZXQgcmVzdWx0ID0gdHJ1ZTtcclxuXHJcbiAgICAgICAgLy8g0KPQtNCw0LvRj9C10Lwg0LLRgdC1INGD0LbQtSDQuNC80LXRjtGJ0LjQtdGB0Y8g0L7QsdGA0LDQsdC+0YLRh9C40LrQuFxyXG4gICAgICAgIHRoaXMucmVtb3ZlQWxsKGVsZW0sIGV2ZW50X25hbWUpO1xyXG5cclxuICAgICAgICAvLyDQodGC0LDQstC40Lwg0L3Rg9C20L3Ri9C1XHJcbiAgICAgICAgaWYgKGhhbmRsZXJfbmFtZSBpbnN0YW5jZW9mIEFycmF5KSB7XHJcbiAgICAgICAgICAgIGhhbmRsZXJfbmFtZS5mb3JFYWNoKG5hbWUgPT4ge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5hZGQoZWxlbSwgbmFtZSwgZXZlbnRfbmFtZSk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0gZWxzZSBpZiAodHlwZW9mIGhhbmRsZXJfbmFtZSA9PT0gJ3N0cmluZycpIHtcclxuICAgICAgICAgICAgdGhpcy5hZGQoZWxlbSwgaGFuZGxlcl9uYW1lLCBldmVudF9uYW1lKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICByZXN1bHQgPSBmYWxzZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiByZXN1bHQ7XHJcbiAgICB9XHJcblxyXG4gICAgLy8g0JTQvtCx0LDQstC40YLRjCDQvtCx0YDQsNCx0L7RgtGH0LjQuiDRgSDQv9C10YDQtdC00LDQvdC90YvQvCDQuNC80LXQvdC10Lwg0L3QsCDRjdC70LXQvNC10L3RglxyXG4gICAgYWRkKGVsZW0sIGhhbmRsZXJfbmFtZSwgZXZlbnRfbmFtZSA9IHRoaXMuZGVmYXVsdF9ldmVudF9uYW1lKSB7XHJcbiAgICAgICAgaWYgKCFlbGVtIHx8ICFoYW5kbGVyX25hbWUgfHwgIXRoaXMuZ2V0SGFuZGxlcihoYW5kbGVyX25hbWUpKSByZXR1cm4gZmFsc2U7XHJcblxyXG4gICAgICAgIGVsZW0uYWRkRXZlbnRMaXN0ZW5lcihldmVudF9uYW1lLCB0aGlzLmdldEhhbmRsZXIoaGFuZGxlcl9uYW1lKSk7XHJcblxyXG4gICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgfVxyXG5cclxuICAgIC8vINCj0LTQsNC70LjRgtGMINC+0LHRgNCw0LHQvtGC0YfQuNC6INGBINC/0LXRgNC10LTQsNC90L3Ri9C8INC40LzQtdC90LXQvCDRgSDRjdC70LXQvNC10L3RgtCwXHJcbiAgICByZW1vdmUoZWxlbSwgaGFuZGxlcl9uYW1lLCBldmVudF9uYW1lID0gdGhpcy5kZWZhdWx0X2V2ZW50X25hbWUpIHtcclxuICAgICAgICBpZiAoIWVsZW0gfHwgIWhhbmRsZXJfbmFtZSB8fCAhdGhpcy5nZXRIYW5kbGVyKGhhbmRsZXJfbmFtZSkpIHJldHVybiBmYWxzZTtcclxuXHJcbiAgICAgICAgZWxlbS5yZW1vdmVFdmVudExpc3RlbmVyKGV2ZW50X25hbWUsIHRoaXMuZ2V0SGFuZGxlcihoYW5kbGVyX25hbWUpKTtcclxuXHJcbiAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICB9XHJcblxyXG4gICAgLy8g0KPQtNCw0LvQuNGC0Ywg0LLRgdC1INC+0LHRgNCw0LHQvtGC0YfQuNC60Lgg0YEg0Y3Qu9C10LzQtdC90YLQsFxyXG4gICAgcmVtb3ZlQWxsKGVsZW0sIGV2ZW50X25hbWUgPSB0aGlzLmRlZmF1bHRfZXZlbnRfbmFtZSkge1xyXG4gICAgICAgIGlmICghZWxlbSkgcmV0dXJuIGZhbHNlO1xyXG5cclxuICAgICAgICBmb3IgKGxldCBoYW5kbGVyIGluIHRoaXMuaGFuZGxlcnMpIHtcclxuICAgICAgICAgICAgZWxlbS5yZW1vdmVFdmVudExpc3RlbmVyKGV2ZW50X25hbWUsIHRoaXMuZ2V0SGFuZGxlcihoYW5kbGVyKSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgIH1cclxuXHJcbiAgICAvLyDQn9C+0LvRg9GH0LjRgtGMINC40LzQtdC90LAg0LLRgdC10YUg0L7QsdGA0LDQsdC+0YLRh9C40LrQvtCyXHJcbiAgICBnZXRIYW5kbGVyc05hbWVzKCkge1xyXG4gICAgICAgIHJldHVybiBPYmplY3Qua2V5cyh0aGlzLmhhbmRsZXJzKTtcclxuICAgIH1cclxuXHJcbiAgICAvLyDQn9C+0LvRg9GH0LjRgtGMINC+0LHRitC10LrRgiDQstGB0LXRhSDRhNGD0L3QutGG0LjQuS3QvtCx0YDQsNCx0L7RgtGH0LjQutC+0LJcclxuICAgIGdldEhhbmRsZXJzKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmhhbmRsZXJzO1xyXG4gICAgfVxyXG5cclxuICAgIC8vINCf0L7Qu9GD0YfQuNGC0Ywg0YTRg9C90LrRhtC40Y4t0L7QsdGA0LDQsdC+0YLRh9C40LpcclxuICAgIGdldEhhbmRsZXIoaGFuZGxlcl9uYW1lKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuaGFuZGxlcnNbaGFuZGxlcl9uYW1lXTtcclxuICAgIH1cclxuXHJcbiAgICAvLyA9PT0g0J7QsdGA0LDQsdC+0YLRh9C40LrQuCA9PT1cclxuXHJcbiAgICBfdGVzdEhhbmRsZXIoKSB7XHJcbiAgICAgICAgYWxlcnQoJ190ZXN0SGFuZGxlcicpO1xyXG4gICAgfVxyXG5cclxuICAgIC8vINCe0YLQvNC10L3Rj9C10YIg0LTQtdC50YHRgtCy0LjQtSDQsdGA0LDRg9C30LXRgNCwXHJcbiAgICBfcHJldmVudEhhbmRsZXIoZSkge1xyXG4gICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICB9XHJcblxyXG4gICAgLy8g0J7RgdGC0LDQvdCw0LLQu9C40LLQsNC10YIg0LLRgdC/0LvRi9GC0LjQtSwg0LTRgNGD0LPQuNC1INC+0LHRgNCw0LHQvtGC0YfQuNC60Lgg0Lgg0L7RgtC80LXQvdGP0LXRgiDQtNC10LnRgdGC0LLQuNC1INCx0YDQsNGD0LfQtdGA0LBcclxuICAgIF9wcmV2ZW50U3RvcEhhbmRsZXIoZSkge1xyXG4gICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICBlLnN0b3BQcm9wYWdhdGlvbigpO1xyXG4gICAgICAgIGUuc3RvcEltbWVkaWF0ZVByb3BhZ2F0aW9uKCk7XHJcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgfVxyXG5cclxuICAgIC8vINCe0LHRgNCw0LHQvtGC0YfQuNC6INC60L3QvtC/0LrQuCDQtNC70Y8g0YDQtdC20LjQvNCwINC+0YLQutGA0YvRgtC40Y8g0LIg0L3QvtCy0L7QuSDQstC60LvQsNC00LrQtVxyXG4gICAgX25ld1RhYkhhbmRsZXIoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICB9XHJcblxyXG4gICAgLy8g0J7QsdGA0LDQsdC+0YLRh9C40Log0LrQvdC+0L/QutC4INC00LvRjyDRgNC10LbQuNC80LAg0YHQutCw0YfQuNCy0LDQvdC40Y9cclxuICAgIF9kb3dubG9hZEhhbmRsZXIoZSkge1xyXG4gICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICBEb3dubG9hZChlLmN1cnJlbnRUYXJnZXQuaHJlZik7XHJcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgfVxyXG59IiwiaW1wb3J0IFBob3RvRG93bmxvYWRUZW1wbGF0ZXMgZnJvbSAnLi90ZW1wbGF0ZXMnO1xyXG5pbXBvcnQgSGFuZGxlcnNNYW5hZ2VyIGZyb20gJy4vaGFuZGxlcnMnO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUGhvdG9Eb3dubG9hZCB7XHJcbiAgICBjb25zdHJ1Y3RvcihwYXJhbXMgPSB7fSkge1xyXG4gICAgICAgIGxldCB0aGF0ID0gdGhpcztcclxuXHJcbiAgICAgICAgLy8g0KHRgdGL0LvQutCwLCDQsiDQutC+0YLQvtGA0YPRjiDQvtCx0LXRgNC90YPRgtCwINC60LDRgNGC0LjQvdC60LAsIFxyXG4gICAgICAgIC8vINC30LTQtdGB0Ywg0L3Rg9C20L3QsiDQtNC70Y8g0YLRgNC40LPQs9C10YDQsCDRgdC+0LfQtNCw0L3QuNGPL9C+0LHQvdC+0LLQu9C10L3QuNGPINC60L3QvtC/0LrQuFxyXG4gICAgICAgIHRoaXMuaW1nQ29udGFpbmVyX2lkID0gJ3B2X3Bob3RvJztcclxuXHJcbiAgICAgICAgLy8g0J7QsdGK0LXQutGCINCy0YHQtdGFINGB0LXQu9C10LrRgtC+0YDQvtCyLCDQuNGB0L/QvtC70YzQt9GD0Y7RidC40YXRgdGPINCyINC60L3QvtC/0LrQtVxyXG4gICAgICAgIHRoaXMuc2VsZWN0b3JzID0ge1xyXG4gICAgICAgICAgICBfcHJlZml4OiAnUGhvdG9Eb3dubG9hZCcsXHJcbiAgICAgICAgICAgIC8vIGlkINC60L7QvdGC0LXQudC90LXRgNCwINC60L3QvtC/0LrQuFxyXG4gICAgICAgICAgICBwaG90b0Rvd25sb2FkX2lkOiAnUGhvdG9Eb3dubG9hZCcsXHJcbiAgICAgICAgICAgIC8vINCa0L7QvdGC0LXQudC90LXRgCwg0LIg0LrQvtGC0L7RgNC+0Lwg0L3QsNGF0L7QtNC40YLRgdGPINC60LDRgNGC0LjQvdC60LAg0Lgg0Y3Qu9C10LzQtdC90YLRiyDRg9C/0YDQsNCy0LvQtdC90LjRjyxcclxuICAgICAgICAgICAgLy8g0YHQvtC30LTQsNCy0LDRgtGMINC60L3QvtC/0LrRgyDQsdGD0LTQtdC8INCyINC90LXQvFxyXG4gICAgICAgICAgICBpbWdDb250YWluZXJfY2xhc3M6ICdwdl9pbWFnZV93cmFwJyxcclxuICAgICAgICAgICAgLy8gaWQsINC60L7RgtC+0YDRi9C5INC00L7QsdCw0LLQuNGC0YHRjyDRgtC10LPRgyBzdHlsZVxyXG4gICAgICAgICAgICBzdHlsZV9pZDogJ1Bob3RvRG93bmxvYWRTdHlsZScsXHJcblxyXG4gICAgICAgICAgICAvLyDQmtC70LDRgdGBLdGE0LvQsNCzLCDQstC10YjQsNC10YLRgdGPINC90LAgLlBob3RvRG93bmxvYWRfc2l6ZSDQutC+0LPQtNCwINC90LXRgiDQtNCw0L3QvdGL0YUg0L4g0YDQsNC30YDQtdGI0LXQvdC40LhcclxuICAgICAgICAgICAgbm9uX3NpemU6ICdub25fc2l6ZScsXHJcbiAgICAgICAgICAgIC8vINCa0LvQsNGB0YEt0YTQu9Cw0LMsINCy0LXRiNCw0LXRgtGB0Y8g0LTQu9GPINC/0LvQsNCy0L3QvtCz0L4gb3BhY2l0eSDQutC90L7Qv9C60Lgg0L/QvtGB0LvQtSDRgdC+0LfQtNCw0L3QuNGPXHJcbiAgICAgICAgICAgIHJlYWR5OiAncmVhZHknLFxyXG5cclxuICAgICAgICAgICAgc2V0dGluZ3M6ICdzZXR0aW5ncycsXHJcbiAgICAgICAgICAgIHNldHRpbmdzX29wZW46ICdzZXR0aW5nc19vcGVuJyxcclxuXHJcbiAgICAgICAgICAgIGRyYXc6ICdkcmF3JyxcclxuICAgICAgICAgICAgZHJhd19maWxsOiAnZHJhd19maWxsJyxcclxuXHJcbiAgICAgICAgICAgIGRvd25sb2FkX21vZGVfdHJ1ZTogJ2Rvd25sb2FkX21vZGVfdHJ1ZScsXHJcbiAgICAgICAgICAgIGRvd25sb2FkX21vZGVfZmFsc2U6ICdkb3dubG9hZF9tb2RlX2ZhbHNlJyxcclxuXHJcbiAgICAgICAgICAgIHNldHQ6IHtcclxuICAgICAgICAgICAgICAgIHNldHRpbmdzX3dyYXA6ICdzZXR0aW5nc193cmFwJyxcclxuICAgICAgICAgICAgICAgIHNldHRpbmdzOiAnc2V0dGluZ3MnLFxyXG4gICAgICAgICAgICAgICAgc2V0dGluZ3NfaGVhZGVyOiAnc2V0dGluZ3NfaGVhZGVyJyxcclxuICAgICAgICAgICAgICAgIHNldHRpbmdzX2hlYWRlcl9pY286ICdzZXR0aW5nc19oZWFkZXJfaWNvJyxcclxuICAgICAgICAgICAgICAgIHNldHRpbmdzX2hlYWRlcl90ZXh0OiAnc2V0dGluZ3NfaGVhZGVyX3RleHQnLFxyXG4gICAgICAgICAgICAgICAgc2V0dGluZ3NfYm9keTogJ3NldHRpbmdzX2JvZHknLFxyXG4gICAgICAgICAgICAgICAgc2V0dGluZ3NfbW9kZTogJ3NldHRpbmdzX21vZGUnLFxyXG4gICAgICAgICAgICAgICAgc2V0dGluZ3NfaXRlbTogJ3NldHRpbmdzX2l0ZW0nLFxyXG4gICAgICAgICAgICAgICAgc2V0dGluZ3NfaXRlbV9hY3Rpb246ICdzZXR0aW5nc19pdGVtX2FjdGlvbicsXHJcbiAgICAgICAgICAgIH0sXHJcblxyXG4gICAgICAgICAgICBidG46IHtcclxuICAgICAgICAgICAgICAgIC8vINCa0LvQsNGB0YEg0LrQvdC+0L/QutC4ICjRgtC10LPQsCBhKVxyXG4gICAgICAgICAgICAgICAgYnRuOiAnYnRuJyxcclxuICAgICAgICAgICAgICAgIC8vINCa0LvQsNGB0YEg0LHQu9C+0LrQsCDQuNC60L7QvdC60LhcclxuICAgICAgICAgICAgICAgIGljb246ICdpY29uJyxcclxuICAgICAgICAgICAgICAgIG1haW5fdGl0bGVfd3JhcDogJ21haW5fdGl0bGVfd3JhcCcsXHJcbiAgICAgICAgICAgICAgICBtYWluX3RpdGxlX2lubmVyOiAnbWFpbl90aXRsZV9pbm5lcicsXHJcbiAgICAgICAgICAgICAgICAvLyDQmtC70LDRgdGBINCx0LvQvtC60LAsINCyINC60L7RgtC+0YDQvtC8INC+0YLQvtCx0YDQsNC20LDQtdGC0YHRjyDRgNCw0LfRgNC10YjQtdC90LjQtSDQutCw0YDRgtC40L3QutC4XHJcbiAgICAgICAgICAgICAgICBzaXplOiAnc2l6ZScsXHJcbiAgICAgICAgICAgICAgICBzZXR0aW5nc190aXRsZTogJ3NldHRpbmdzX3RpdGxlJyxcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgLy8g0JzQtdGC0L7QtCDQv9C+0LvRg9GH0LXQvdC40Y8g0YHQtdC70LXQutGC0L7RgNCwXHJcbiAgICAgICAgICAgIGdldChzZWwpIHtcclxuICAgICAgICAgICAgICAgIHNlbCA9IHNlbC5zcGxpdCgnLicpO1xyXG4gICAgICAgICAgICAgICAgbGV0IGVycm9yID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICBsZXQgcmVzID0gdGhpcztcclxuXHJcbiAgICAgICAgICAgICAgICAvLyDQldGB0LvQuCDRgdC10LvQtdC60YLQvtGAINC90LAg0LLQtdGA0YXQvdC10Lwg0YPRgNC+0LLQvdC1INC+0LHRitC10LrRgtCwLCDQvtC9INC+0YLQtNCw0LXRgtGB0Y8g0LrQsNC6INC10YHRgtGMXHJcbiAgICAgICAgICAgICAgICBpZiAoc2VsLmxlbmd0aCA9PT0gMSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJlcyA9IHRoaXNbc2VsXTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8g0JjQvdCw0YfQtSDQv9C+0LvRg9GH0LDQtdC8INGB0LXQu9C10LrRgtC+0YAg0LjQtyDQstC70L7QttC10L3QvdGL0YUg0YPRgNC+0LLQvdC10LlcclxuICAgICAgICAgICAgICAgICAgICBzZWwuZm9yRWFjaChwYXJ0ID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlcyA9IHJlc1twYXJ0XTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSBjYXRjaCAoZXJyKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlcnJvciA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9KVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAvLyDQmCDQtdGB0LvQuCDRgdC10LvQtdC60YLQvtGAINGB0YPRidC10YHRgtCy0YPQtdGCLCDQtNC+0L/QuNGB0YvQstCw0LXQvCDQuiDQvdC10LzRgyDQv9GA0LXRhNC40LrRgVxyXG4gICAgICAgICAgICAgICAgICAgIHJlcyA9IChlcnJvciB8fCAhcmVzKSA/IHVuZGVmaW5lZCA6IGAke3RoaXMuX3ByZWZpeH1fJHtyZXN9YDtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gcmVzO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgLy8g0J7QsdGK0LXQutGCINGBINC+0L/QuNGB0LDQvdC40LXQvCDQvtCx0YDQsNCx0L7RgtGH0LjQutC+0LJcclxuICAgICAgICB0aGlzLnRyaWdnZXJzID0ge1xyXG4gICAgICAgICAgICBtb3VzZW92ZXI6IFtcclxuICAgICAgICAgICAgICAgIC8vINCh0LXQu9C10LrRgtC+0YAg0YHRgdGL0LvQutC4LCDQsiDQutC+0YLQvtGA0YPRjiDQvtCx0LXRgNC90YPRgtCwINC60LDRgNGC0LjQvdC60LAg0LIg0L/RgNC+0YHQvNC+0YLRgNGJ0LjQutC1XHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgdHlwZTogJ2lkJyxcclxuICAgICAgICAgICAgICAgICAgICBzZWxlY3RvcjogdGhpcy5pbWdDb250YWluZXJfaWQsXHJcbiAgICAgICAgICAgICAgICAgICAgLy8g0J/RgNC4INC90LDQstC10LTQtdC90LjQuCDQvdCwINC60L7QvdGC0LXQudC90LXRgCDQutCw0YDRgtC40L3QutC4LCDQsdGD0LTQtdC8INC+0LHQvdC+0LLQu9GP0YLRjCjRgdC+0LfQtNCw0LLQsNGC0YwpINC60L3QvtC/0LrRg1xyXG4gICAgICAgICAgICAgICAgICAgIGhhbmRsZXI6IHRoaXMuX3VwZGF0ZUJ0bixcclxuICAgICAgICAgICAgICAgICAgICBjaGlsZDogdHJ1ZSxcclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICAvLyDQodC10LvQtdC60YLQvtGAINGA0L7QtNC40YLQtdC70YzRgdC60L7Qs9C+INCx0LvQvtC60LAg0LrQvdC+0L/QutC4XHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgdHlwZTogJ2NsYXNzJyxcclxuICAgICAgICAgICAgICAgICAgICBzZWxlY3RvcjogdGhpcy5zZWxlY3RvcnMuUGhvdG9Eb3dubG9hZF9idG4sXHJcbiAgICAgICAgICAgICAgICAgICAgLy8g0J/RgNC4INC90LDQstC10LTQtdC90LjQuCDQvdCwINGB0LDQvNGDINC60L3QvtC/0LrRgywg0LHRg9C00LXQvCDQvtCx0L3QvtCy0LvRj9GC0Ywg0LIg0L3QtdC5INC00LDQvdC90YvQtVxyXG4gICAgICAgICAgICAgICAgICAgIGhhbmRsZXI6IHRoaXMuX3VwZGF0ZUJ0bixcclxuICAgICAgICAgICAgICAgICAgICBjaGlsZDogdHJ1ZSxcclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIF0sIC8vINCa0L7QvdC10YYgbW91c2VvdmVyXHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgLy8g0KTQu9Cw0LMsINC30LDQtNCw0Y7RidC40Lkg0L/QvtCy0LXQtNC10L3QuNC1INC60LvQuNC60LAg0L/QviDQutC90L7Qv9C60LVcclxuICAgICAgICAvLyDQldGB0LvQuCB0cnVlLCDRgtC+INC60LDRgNGC0LjQvdC60LAg0LHRg9C00LXRgiDRgdC60LDRh9C40LLQsNGC0YzRgdGPXHJcbiAgICAgICAgLy8g0JXRgdC70LggZmFsc2UsINGC0L4g0LrQsNGA0YLQuNC90LrQsCDQsdGD0LTQtdGCINC+0YLQutGA0YvQstCw0YLRjNGB0Y8g0LIg0L3QvtCy0L7QuSDQstC60LvQsNC00LrQtVxyXG4gICAgICAgIHRoaXMuZmxhZ19kb3dubG9hZCA9IHtcclxuICAgICAgICAgICAgX2ZsYWc6IHBhcmFtcy5kb3dubG9hZCxcclxuICAgICAgICAgICAgZ2V0IGZsYWcoKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5fZmxhZztcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgc2V0IGZsYWcodmFsKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAodHlwZW9mIHZhbCA9PT0gJ2Jvb2xlYW4nKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5fZmxhZyA9IHZhbDtcclxuICAgICAgICAgICAgICAgICAgICB0aGF0Ll9hZGRCdG5IYW5kbGVycyh0aGlzLl9mbGFnKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIC8vINCX0LTQtdGB0Ywg0LHRg9C00LXRgiDRhdGA0LDQvdC40YLRjNGB0Y8g0Y3Qu9C10LzQtdC90YIg0LrQvdC+0L/QutC4XHJcbiAgICAgICAgdGhpcy53cmFwID0gbnVsbDtcclxuXHJcbiAgICAgICAgLy8g0KHQvtC30LTQsNC10Lwg0LjQvdGB0YLQsNC90YEg0YjQsNCx0LvQvtC90LjQt9Cw0YLQvtGA0LAg0LLQtdGA0YHRgtC60LhcclxuICAgICAgICB0aGlzLnRlbXBsYXRlID0gbmV3IFBob3RvRG93bmxvYWRUZW1wbGF0ZXMoe1xyXG4gICAgICAgICAgICBzZWxlY3RvcnM6IHRoaXMuc2VsZWN0b3JzXHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIC8vINCh0L7Qt9C00LDQtdC8INC40L3RgdGC0LDQvdGBINC60L7QvdGC0YDQvtC70LvQtdGA0LAg0YHQvtCx0YvRgtC40Lkg0LLQvdGD0YLRgNC4INC60L3QvtC/0LrQuFxyXG4gICAgICAgIHRoaXMuaGFuZGxlcnMgPSBuZXcgSGFuZGxlcnNNYW5hZ2VyKHtcclxuICAgICAgICAgICAgUGhvdG9Eb3dubG9hZDogdGhpc1xyXG4gICAgICAgIH0pO1xyXG5cclxuXHJcbiAgICAgICAgLy8g0KLQvtGH0LrQsCDQstGF0L7QtNCwXHJcbiAgICAgICAgdGhpcy5pbml0KCk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8g0JTQvtCx0LDQstC70Y/QtdGCINC90LAg0LrQvdC+0L/QutGDINC+0LHRgNCw0LHQvtGC0YfQuNC60Lgg0YHQutCw0YfQuNCy0LDQvdC40Y8v0L7RgtC60YDRi9GC0LjRjyDQsiDQvdC+0LLQvtC5INCy0LrQu9Cw0LTQutC1XHJcbiAgICBfYWRkQnRuSGFuZGxlcnMoKSB7XHJcbiAgICAgICAgaWYgKCF0aGlzLndyYXApIHJldHVybiBmYWxzZTtcclxuXHJcbiAgICAgICAgbGV0IGJ0biA9IHRoaXMud3JhcC5xdWVyeVNlbGVjdG9yKCcuJyArIHRoaXMuc2VsZWN0b3JzLmdldCgnYnRuLmJ0bicpKTtcclxuXHJcbiAgICAgICAgLy8g0JIg0LfQsNCy0LjRgdC40LzQvtGB0YLQuCDQvtGCINGE0LvQsNCz0LAg0LLQtdGI0LDQtdC8INC70LjQsdC+INC+0LHRgNCw0LHQvtGC0YfQuNC6INGB0LrQsNGH0LjQstCw0L3QuNGPLCDQu9C40LHQviDQvtGC0LrRgNGL0YLQuNGPINC90L7QstC+0Lkg0LLQutC70LDQtNC60LhcclxuICAgICAgICBpZiAodGhpcy5mbGFnX2Rvd25sb2FkLmZsYWcpIHtcclxuICAgICAgICAgICAgdGhpcy5oYW5kbGVycy5zZXQoYnRuLCAnZG93bmxvYWRIYW5kbGVyJyk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgdGhpcy5oYW5kbGVycy5zZXQoYnRuLCAnbmV3VGFiSGFuZGxlcicpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvLyDQnNC10YLQvtC0INC+0LHQvdC+0LLQu9C10L3QuNGPINC00LDQvdC90YvRhSDQsiDQutC90L7Qv9C60LVcclxuICAgIF91cGRhdGVCdG4oZWxlbSkge1xyXG4gICAgICAgIHRoaXMucGFyZW50ID0gZWxlbS5jbG9zZXN0KCcuJyArIHRoaXMuc2VsZWN0b3JzLmltZ0NvbnRhaW5lcl9jbGFzcyk7XHJcblxyXG4gICAgICAgIC8vINCV0YHQu9C4INCyINGA0L7QtNC40YLQtdC70YzRgdC60L7QvCDQutC+0L3RgtC10LnQvdC10YDQtSDQtdGJ0LUg0L3QtdGCINC60L3QvtC/0LrQuFxyXG4gICAgICAgIGlmICghdGhpcy5wYXJlbnQucXVlcnlTZWxlY3RvcignIycgKyB0aGlzLnNlbGVjdG9ycy5waG90b0Rvd25sb2FkX2lkKSkge1xyXG4gICAgICAgICAgICAvLyDRgtC+INGB0L7Qt9C00LDQtNC40Lwg0LXQtVxyXG4gICAgICAgICAgICB0aGlzLndyYXAgPSB0aGlzLnRlbXBsYXRlLmNyZWF0ZURvd25sb2FkQ29udGFpbmVyKHRoaXMucGFyZW50KTtcclxuICAgICAgICAgICAgLy8g0Jgg0L/QvtCy0LXRgdC40Lwg0L3QsCDQvdC10LUg0L7QsdGA0LDQsdC+0YLRh9C40LrQuFxyXG4gICAgICAgICAgICB0aGlzLl9hZGRCdG5IYW5kbGVycygpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgbGV0IGJ0biA9IHRoaXMud3JhcC5xdWVyeVNlbGVjdG9yKCcuJyArIHRoaXMuc2VsZWN0b3JzLmdldCgnYnRuLmJ0bicpKTtcclxuICAgICAgICBsZXQgc2l6ZSA9IHRoaXMud3JhcC5xdWVyeVNlbGVjdG9yKCcuJyArIHRoaXMuc2VsZWN0b3JzLmdldCgnYnRuLnNpemUnKSk7XHJcblxyXG4gICAgICAgIC8vINCf0L7Qu9GD0YfQsNC10Lwg0LjQtyDQvdC10LTRgCDQktCaINC40L3RhNC+0YDQvNCw0YbQuNGOINC+INC80LDQutGB0LjQvNCw0LvRjNC90L7QuSDQstC10YDRgdC40Lgg0L7RgtC60YDRi9GC0L7QuSDQsiDQv9GA0L7RgdC80L7RgtGA0YnQuNC60LUg0LrQsNGA0YLQuNC90LrQuFxyXG4gICAgICAgIGxldCBpbWFnZV9kYXRhID0gd2luZG93LlBob3Rvdmlldy5nZW5EYXRhKHdpbmRvdy5jdXIucHZDdXJQaG90byk7XHJcblxyXG4gICAgICAgIC8vINCV0YHQu9C4INGB0YHRi9C70LrQsCDQsiDQutC90L7Qv9C60LUg0L3QtSDRgtCwLCDQutC+0YLQvtGA0LDRjyDQvdGD0LbQvdCwINGB0LXQudGH0LDRgVxyXG4gICAgICAgIGlmIChidG4uaHJlZiAhPT0gaW1hZ2VfZGF0YS5zcmMpIHtcclxuICAgICAgICAgICAgLy8g0J7QsdC90L7QstC40Lwg0YHRgdGL0LvQutGDINCyINC60L3QvtC/0LrQtVxyXG4gICAgICAgICAgICBidG4uaHJlZiA9IGltYWdlX2RhdGEuc3JjO1xyXG5cclxuICAgICAgICAgICAgLy8g0Jgg0YDQsNC30LzQtdGA0Ysg0LrQsNGA0YLQuNC90LrQuCwg0LrQvtGC0L7RgNCw0Y8g0L/QviDRgdGB0YvQu9C60LVcclxuICAgICAgICAgICAgdGhpcy50ZW1wbGF0ZS5zZXRTaXplKHNpemUsIGltYWdlX2RhdGEpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvLyDQn9GA0L7QstC10YDQutCwINC90LAg0YLQviwg0Y/QstC70Y/QtdGC0YHRjyDQu9C4INGG0LXQu9GMINGB0L7QsdGL0YLQuNGPINC00L7Rh9C10YDQvdC40Lwg0Y3Qu9C10LzQtdC90YLQvtC8INGB0LXQu9C10LrRgtC+0YDQsCDQuNC3INC+0LHRitC10LrRgtCwINGC0YDQuNCz0LPQtdGA0L7QslxyXG4gICAgX2NoZWNrQ29tcGxpYW5jZUNoaWxkKHRhcmdldCwgdHJpZ2dlcikge1xyXG4gICAgICAgIGxldCBwYXJlbnQgPSAodHJpZ2dlci50eXBlID09PSAnaWQnKSA/XHJcbiAgICAgICAgICAgIHRhcmdldC5jbG9zZXN0KCcjJyArIHRyaWdnZXIuc2VsZWN0b3IpIDpcclxuICAgICAgICAgICAgdGFyZ2V0LmNsb3Nlc3QoJy4nICsgdHJpZ2dlci5zZWxlY3Rvcik7XHJcblxyXG4gICAgICAgIGlmIChwYXJlbnQpIHtcclxuICAgICAgICAgICAgLy8g0JXRgdC70Lgg0LTQsCwg0LfQsNC/0YPRgdGC0LjQvCDQvtCx0YDQsNCx0L7RgtGH0LjQuiDQtNC70Y8g0YDQvtC00LjRgtC10LvRj1xyXG4gICAgICAgICAgICB0aGlzLl9jaGVja0NvbXBsaWFuY2VUYXJnZXQocGFyZW50LCB0cmlnZ2VyKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLy8g0J/RgNC+0LLQtdGA0LrQsCDQvdCwINGB0L7QvtGC0LLQtdGC0YHRgtCy0LjQtSDRhtC10LvQuCDRgdC+0LHRi9GC0LjRjyDRgSDRgdC10LvQtdC60YLQvtGA0LDQvNC4INC+0LHRitC10LrRgtCwINGC0YDQuNCz0LPQtdGA0L7QslxyXG4gICAgX2NoZWNrQ29tcGxpYW5jZVRhcmdldCh0YXJnZXQsIHRyaWdnZXIpIHtcclxuICAgICAgICBsZXQgY29tcGxpYW5jZSA9IGZhbHNlO1xyXG5cclxuICAgICAgICAvLyDQlNCy0LAg0L7RgtC00LXQu9GM0L3Ri9GFINGD0YHQu9C+0LLQuNGPINC00LvRjyDRgtC+0LPQviwg0YfRgtC+0LHRiyDQsdGL0LvQsCDQstC+0LfQvNC+0LbQvdC+0YHRgtGMINC90LDQt9C90LDRh9C40YLRjFxyXG4gICAgICAgIC8vINGA0LDQt9C90YvQtSDQvtCx0YDQsNCx0L7RgtGH0LjQutC4INC/0L4gaWQg0Lgg0L/QviDQutC70LDRgdGB0YMg0L3QsCDQvtC00LjQvSDRjdC70LXQvNC10L3Rgiwg0Lgg0L7QvdC4INGB0YDQsNCx0L7RgtCw0LvQuCDQvtCx0LBcclxuICAgICAgICBpZiAodHJpZ2dlci50eXBlID09PSAnaWQnKSB7XHJcbiAgICAgICAgICAgIGlmICh0YXJnZXQuaWQgPT09IHRyaWdnZXIuc2VsZWN0b3IpIHtcclxuICAgICAgICAgICAgICAgIGNvbXBsaWFuY2UgPSB0cnVlO1xyXG5cclxuICAgICAgICAgICAgICAgIGlmICh0cmlnZ2VyLmhhbmRsZXIpIHtcclxuICAgICAgICAgICAgICAgICAgICB0cmlnZ2VyLmhhbmRsZXIuY2FsbCh0aGlzLCB0YXJnZXQpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAodHJpZ2dlci50eXBlID09PSAnY2xhc3MnKSB7XHJcbiAgICAgICAgICAgIGlmICh0YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKHRyaWdnZXIuc2VsZWN0b3IpKSB7XHJcbiAgICAgICAgICAgICAgICBjb21wbGlhbmNlID0gdHJ1ZTtcclxuXHJcbiAgICAgICAgICAgICAgICBpZiAodHJpZ2dlci5oYW5kbGVyKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdHJpZ2dlci5oYW5kbGVyLmNhbGwodGhpcywgdGFyZ2V0KTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIGNvbXBsaWFuY2U7XHJcbiAgICB9XHJcblxyXG4gICAgLy8g0JzQtdGC0L7QtCwg0LrQvtGC0L7RgNGL0Lkg0LLRi9C30YvQstCw0LXRgiDQvdGD0LbQvdGL0Lkg0L7QsdGA0LDQsdC+0YLRh9C40Log0L/RgNC4INC90YPQttC90L7QvCDRgdC+0LHRi9GC0LjQuFxyXG4gICAgX3dhdGNoVHJpZ2dlcihldmVudCkge1xyXG4gICAgICAgIC8vINCh0LzQvtGC0YDQuNC8LCDQtdGB0YLRjCDQu9C4INC+0LHRgNCw0LHQvtGC0YfQuNC60Lgg0L/QvtC70YPRh9C10L3QvdC+0LPQviDRgtC40L/QsCDRgdC+0LHRi9GC0LjRj1xyXG4gICAgICAgIC8vINCd0LAg0YHQsNC80L7QvCDQtNC10LvQtSDQvtC90Lgg0LLRgdC10LPQtNCwINC00L7Qu9C20L3RiyDQsdGL0YLRjCwg0L3QviDQstGB0LUg0LbQtVxyXG4gICAgICAgIGxldCB0cmlnZ2VycyA9IHRoaXMudHJpZ2dlcnNbZXZlbnQudHlwZV07XHJcbiAgICAgICAgaWYgKHRyaWdnZXJzID09PSB1bmRlZmluZWQpIHJldHVybjtcclxuXHJcbiAgICAgICAgLy8g0JHQtdGA0LXQvCDRjdC70LXQvNC10L3Rgiwg0L3QsCDQutC+0YLQvtGA0L7QvCDRgdGA0LDQsdC+0YLQsNC70L4g0YHQvtCx0YvRgtC40LVcclxuICAgICAgICBsZXQgdGFyZ2V0ID0gZXZlbnQudGFyZ2V0O1xyXG5cclxuICAgICAgICAvLyDQptC40LrQuyDQv9C+INC+0LHRitC10LrRgtGDINC+0LHRgNCw0LHQvtGC0YfQuNC60L7QsiDQv9C+0LvRg9GH0LXQvdC90L7Qs9C+INGC0LjQv9CwINGB0L7QsdGL0YLQuNGPXHJcbiAgICAgICAgdHJpZ2dlcnMuZm9yRWFjaCh0cmlnZ2VyID0+IHtcclxuICAgICAgICAgICAgLy8g0JjRidC10Lwg0L7QsdGA0LDQsdC+0YLRh9C40Log0LTQu9GPINGG0LXQu9C4INGB0L7QsdGL0YLQuNGPXHJcbiAgICAgICAgICAgIC8vINCV0YHQu9C4INCy0LXRgNC90LXRgtGB0Y8gZmFsc2UsINGC0L4g0L3QtSDQvdCw0LnQtNC10L1cclxuICAgICAgICAgICAgbGV0IGNvbXBsaWFuY2UgPSB0aGlzLl9jaGVja0NvbXBsaWFuY2VUYXJnZXQodGFyZ2V0LCB0cmlnZ2VyKTtcclxuXHJcbiAgICAgICAgICAgIC8vINCV0YHQu9C4INGG0LXQu9C4INGB0L7QsdGL0YLQuNGPINC90LXRgiDQsiDQvtCx0YrQtdC60YLQtSDQvtCx0YDQsNCx0L7RgtGH0LjQutC+0LIsINC90L4g0LIg0L7QsdGA0LDQsdC+0YLRh9C40LrQtSDRg9C60LDQt9Cw0L3QviwgXHJcbiAgICAgICAgICAgIC8vINGH0YLQviDQvtC9INC80L7QttC10YIg0YHRgNCw0LHQsNGC0YvQstCw0YLRjCDQvdCwINC00L7Rh9C10YDQvdC10Lwg0Y3Qu9C10LzQtdC90YLQtVxyXG4gICAgICAgICAgICBpZiAoIWNvbXBsaWFuY2UgJiYgdHJpZ2dlci5jaGlsZCkge1xyXG4gICAgICAgICAgICAgICAgLy8g0J/QvtC/0YDQvtCx0YPQtdC8INC90LDQudGC0Lgg0YDQvtC00LjRgtC10LvRjNGB0LrQuNC5INGN0LvQtdC80LXQvdGCINGG0LXQu9C4LCDRgdC+0L7RgtCy0LXRgtGB0YLQstGD0Y7RidC40Lkg0YHQtdC70LXQutGC0L7RgNGDXHJcbiAgICAgICAgICAgICAgICAvLyDQuNC3INC+0LHRitC10LrRgtCwINC+0LHRgNCw0LHQvtGC0YfQuNC60L7QslxyXG4gICAgICAgICAgICAgICAgdGhpcy5fY2hlY2tDb21wbGlhbmNlQ2hpbGQodGFyZ2V0LCB0cmlnZ2VyKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIC8vINCj0YHRgtCw0L3QvtCy0LrQsCDQvdCwIGRvY3VtZW50INGB0LvRg9GI0LDRgtC10LvQtdC5INGC0LjQv9C+0LIg0YHQvtCx0YvRgtC40LksINC40LzQtdGO0YnQuNGF0YHRjyDQsiDQvtCx0YrQtdC60YLQtSDQvtCx0YDQsNCx0L7RgtGH0LjQutC+0LJcclxuICAgIF9pbml0V2F0Y2hlcigpIHtcclxuICAgICAgICBsZXQgdHlwZXMgPSBPYmplY3Qua2V5cyh0aGlzLnRyaWdnZXJzKTtcclxuICAgICAgICB0eXBlcy5mb3JFYWNoKHR5cGUgPT4gZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcih0eXBlLCB0aGlzLl93YXRjaFRyaWdnZXIuYmluZCh0aGlzKSkpXHJcbiAgICB9XHJcblxyXG4gICAgLy8g0JzQtdGC0L7QtCDQtNC+0LHQsNCy0LvQtdC90LjRjyDQvdCwINGB0YLRgNCw0L3QuNGG0YMg0YHRgtC40LvQtdC5LCDQvdC10L7QsdGF0L7QtNC40LzRi9GFINC00LvRjyDRgNCw0LHQvtGC0YsgUGhvdG9Eb3dubG9hZFxyXG4gICAgX2luamVjdENTUygpIHtcclxuICAgICAgICBsZXQgc3R5bGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzdHlsZScpO1xyXG4gICAgICAgIHN0eWxlLmlkID0gdGhpcy5zZWxlY3RvcnMuc3R5bGVfaWQ7XHJcbiAgICAgICAgc3R5bGUudGV4dENvbnRlbnQgPSB0aGlzLnRlbXBsYXRlLmdldFN0eWxlQ29udGVudCgpO1xyXG5cclxuICAgICAgICBkb2N1bWVudC5oZWFkLmFwcGVuZENoaWxkKHN0eWxlKTtcclxuICAgIH1cclxuXHJcblxyXG4gICAgLy8g0KLQvtGH0LrQsCDQstGF0L7QtNCwXHJcbiAgICBpbml0KCkge1xyXG4gICAgICAgIGNvbnNvbGUubG9nKCclYyVzJywgKHdpbmRvdy5sb2dfY29sb3IpID8gd2luZG93LmxvZ19jb2xvci5ibHVlIDogJycsICdQaG90b0Rvd25sb2FkOiBJbml0Jyk7XHJcblxyXG4gICAgICAgIC8vINCU0L7QsdCw0LLQu9GP0LXQvCDRgdGC0LjQu9C4IFBob3RvRG93bmxvYWRcclxuICAgICAgICB0aGlzLl9pbmplY3RDU1MoKTtcclxuXHJcbiAgICAgICAgLy8g0JjQvdC40YbQuNCw0LvQuNC30LjRgNGD0LXQvCDQvtCx0YDQsNCx0L7RgtGH0LjQutC4INCz0LvQvtCx0LDQu9GM0L3Ri9GFINGB0L7QsdGL0YLQuNC5INC90LAgZG9jdW1lbnRcclxuICAgICAgICB0aGlzLl9pbml0V2F0Y2hlcigpO1xyXG4gICAgfVxyXG59IiwiLy8g0JrQu9Cw0YHRgSDQtNC70Y8g0YjQsNCx0LvQvtC90LjQt9Cw0YbQuNC4INCy0LXRgNGB0YLQutC4INC60L3QvtC/0LrQuCDQuCDQtdC1INGB0YLQuNC70LXQuVxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQaG90b0Rvd25sb2FkVGVtcGxhdGVzIHtcclxuICAgIGNvbnN0cnVjdG9yKHBhcmFtcyA9IHt9KSB7XHJcbiAgICAgICAgICAgIC8vINCf0LXRgNC10LTQsNC90L3Ri9C5INC+0LHRitC10LrRgiDRgdC10LvQtdC60YLQvtGA0L7QslxyXG4gICAgICAgICAgICB0aGlzLnNlbCA9IHBhcmFtcy5zZWxlY3RvcnM7XHJcblxyXG4gICAgICAgICAgICAvLyDQntCx0YrQtdC60YIsINCz0LXQvdC10YDQuNGA0YPRjtGJ0LjQuSDRgNCw0LfQvdC+0YbQstC10YLQvdGL0LUg0LjQutC+0L3QutC4XHJcbiAgICAgICAgICAgIHRoaXMuaWNvbnMgPSB7XHJcbiAgICAgICAgICAgICAgICBfY29sb3JzOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgZ3JlZW46ICcjMDBCNzVBJyxcclxuICAgICAgICAgICAgICAgICAgICByZWQ6ICcjRjkyNjcyJyxcclxuICAgICAgICAgICAgICAgICAgICB3aGl0ZTogJyNGRkZGRkYnLFxyXG4gICAgICAgICAgICAgICAgICAgIHllbGxvdzogJyNGRkMwMDAnLFxyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIF9wcmVmaXg6ICdkYXRhOmltYWdlL3N2Zyt4bWw7Y2hhcnNldD11dGYtOCwnLFxyXG4gICAgICAgICAgICAgICAgX3RlbXBsYXRlOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgLyogaHRtbCAqL1xyXG4gICAgICAgICAgICAgICAgICAgIGFycm93OiBgPHN2ZyB4bWxucz1cImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXCIgd2lkdGg9XCIxNlwiIGhlaWdodD1cIjE2XCIgdmVyc2lvbj1cIjEuMVwiIHZpZXdCb3g9XCIwIDAgMTYgMTZcIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8cGF0aCBmaWxsPVwie3tjb2xvcn19XCIgZD1cIk0gNCwwIDQsOCAwLDggOCwxNiAxNiw4IDEyLDggMTIsMCA0LDAgelwiLz5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvc3ZnPmAsXHJcbiAgICAgICAgICAgICAgICAgICAgLyogaHRtbCAqL1xyXG4gICAgICAgICAgICAgICAgICAgIG9rOiBgPHN2ZyB4bWxucz1cImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXCIgd2lkdGg9XCI1MTJcIiBoZWlnaHQ9XCI1MTJcIiB2ZXJzaW9uPVwiMS4xXCIgdmlld2JveD1cIjAgMCA1MTIgNTEyXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8cGF0aCBmaWxsPVwie3tjb2xvcn19XCIgZD1cIk0xNzMuODk4IDQzOS40MDRsLTE2Ni40LTE2Ni40Yy05Ljk5Ny05Ljk5Ny05Ljk5Ny0yNi4yMDYgMC0zNi4yMDRsMzYuMjAzLTM2LjIwNGM5Ljk5Ny05Ljk5OCAyNi4yMDctOS45OTggMzYuMjA0IDBMMTkyIDMxMi42OSA0MzIuMDk1IDcyLjU5NmM5Ljk5Ny05Ljk5NyAyNi4yMDctOS45OTcgMzYuMjA0IDBsMzYuMjAzIDM2LjIwNGM5Ljk5NyA5Ljk5NyA5Ljk5NyAyNi4yMDYgMCAzNi4yMDRsLTI5NC40IDI5NC40MDFjLTkuOTk4IDkuOTk3LTI2LjIwNyA5Ljk5Ny0zNi4yMDQtLjAwMXpcIj48L3BhdGg+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDwvc3ZnPmAsXHJcbiAgICAgICAgICAgICAgICAgICAgLyogaHRtbCAqL1xyXG4gICAgICAgICAgICAgICAgICAgIGNvZzogYDxzdmcgY2xhc3M9XCJjb2dcIiB4bWxucz1cImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXCIgdmlld0JveD1cIjAgMCA0MzUuMjkxNTEgNDU2LjQ2MTI3XCIgdmVyc2lvbj1cIjEuMVwiIHdpZHRoPVwiNDM1LjI5MTVcIiBoZWlnaHQ9XCI0NTYuNDYxMjdcIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxnIHRyYW5zZm9ybT1cInRyYW5zbGF0ZSgtMTU1LjQxNDksNDAuNDc4NTAzKVwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxwYXRoIGNsYXNzPVwiY29nX3BhdGhcIiBzdHlsZT1cImRpc3BsYXk6aW5saW5lO3N0cm9rZTp7e2NvbG9yfX07c3Ryb2tlLWxpbmVjYXA6cm91bmQ7c3Ryb2tlLWxpbmVqb2luOnJvdW5kO3N0cm9rZS1taXRlcmxpbWl0OjQ7c3Ryb2tlLW9wYWNpdHk6MVwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGQ9XCJtIDI1OC4xNTI2NCw3MC42MzA0NDcgYyAyNS4yODYzNywtMjIuNTI2NTQ1IDQ4LjYzNzM3LC0zNC40MDg1MjUgNzEuMDM5LC00MS4wNjkgdiAtNTMuNDc4IGMgMzAuNDE4NzYsLTUuODYzODA2IDU5LjQ4NTYzLC00Ljk2ODE0MSA4Ny43MzgsMCB2IDUzLjQ3OSBjIDI4LjgwMzgsOC41NjU1MzUgNTEuNjE5NjMsMjMuMTE5MDQ1IDcxLjAzOSw0MS4wNjkgbCA0Ni4zMDksLTI2Ljc1OTk5NSBjIDIxLjg2MjQyLDIzLjc4Mzc1NSAzNS4wNDg1Niw0OS4yOTM0NjUgNDMuOTI5LDc1Ljk2ODk5OCBsIC00Ni4zMjksMjYuNzQgYyA2LjUwODc1LDI3LjM1OTY3IDYuNTA4Miw1NC43MTkzMyAwLDgyLjA3OSBsIDQ2LjMyOSwyNi43NCBjIC04Ljk5NDU4LDI4LjcwODA1IC0yNC4wOTA4OCw1My43NTUwNyAtNDMuOTI5LDc1Ljk1NyBsIC00Ni4zMDksLTI2Ljc0IGMgLTIyLjA2MjY4LDIwLjk2MjggLTQ2LjA5MjY4LDMzLjA3MjYgLTcxLjAzOSw0MS4wNTkgdiA1My40NzkgYyAtMzEuNTkxNTIsNi4yNTQ3MyAtNjAuNDc5MjYsNS4yOTkzNSAtODcuNzM4LDAgdiAtNTMuNDc5IGMgLTI1LjQ2MDUsLTcuNjMxNDggLTQ5LjE5NDE1LC0yMS4xMzQyOSAtNzEuMDM5LC00MS4wNTkgbCAtNDYuMzA5LDI2Ljc0IGMgLTIwLjE4NDI4LC0yMS43NTcwOCAtMzMuODQ5MDksLTQ3LjcwNTI1IC00My45MjksLTc1Ljk1OCBsIDQ2LjMyOSwtMjYuNzQgYyAtNy4xOTk0NywtMzAuOTU5NCAtNS43ODQ5NiwtNTcuNjExODEgMCwtODIuMDc5IGwgLTQ2LjMyOSwtMjYuNzQgYyAxMC4zOTE1NywtMzAuNzMzOTEzIDI1LjU5MDc1LC01NS4zNDkwNTMgNDMuOTI5LC03NS45Njg5OTggelwiLz5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZz5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxnIHRyYW5zZm9ybT1cInRyYW5zbGF0ZSgtMi4zMTUzMjE4ZS02KVwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxnIHRyYW5zZm9ybT1cInRyYW5zbGF0ZSgtOS45OTk3ODgzLC05Ljk5NDk0MTgpXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxjaXJjbGUgY2xhc3M9XCJjb2dfY2lyY2xlXCIgY3g9XCIyMjcuNjQ1NTRcIiBjeT1cIjIzOC4yMjU1OVwiIHI9XCI3OC4zMjQ5ODJcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3R5bGU9XCJzdHJva2U6e3tjb2xvcn19O3N0cm9rZS1saW5lY2FwOnJvdW5kO3N0cm9rZS1saW5lam9pbjpyb3VuZDtzdHJva2UtbWl0ZXJsaW1pdDo0O3N0cm9rZS1kYXNoYXJyYXk6bm9uZTtzdHJva2Utb3BhY2l0eToxXCIvPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZz5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZz5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPC9zdmc+YCxcclxuICAgICAgICAgICAgICAgICAgICAvKiBodG1sICovXHJcbiAgICAgICAgICAgICAgICAgICAgY2lyY2xlOiBgPHN2ZyB2aWV3Qm94PVwiMCAwIDUxMiA1MTJcIiB3aWR0aD1cIjUxMlwiIGhlaWdodD1cIjUxMlwiIHhtbG5zPVwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8cGF0aCBmaWxsPVwie3tjb2xvcn19XCIgZD1cIk0yNTYgOEMxMTkgOCA4IDExOSA4IDI1NnMxMTEgMjQ4IDI0OCAyNDggMjQ4LTExMSAyNDgtMjQ4UzM5MyA4IDI1NiA4em0wIDQ0OGMtMTEwLjUgMC0yMDAtODkuNS0yMDAtMjAwUzE0NS41IDU2IDI1NiA1NnMyMDAgODkuNSAyMDAgMjAwLTg5LjUgMjAwLTIwMCAyMDB6XCI+PC9wYXRoPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9zdmc+YCxcclxuICAgICAgICAgICAgICAgICAgICAvKiBodG1sICovXHJcbiAgICAgICAgICAgICAgICAgICAgY2hlY2tfY2lyY2xlOiBgPHN2ZyB2aWV3Qm94PVwiMCAwIDUxMiA1MTJcIiB3aWR0aD1cIjUxMlwiIGhlaWdodD1cIjUxMlwiIHhtbG5zPVwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHBhdGggZmlsbD1cInt7Y29sb3J9fVwiIGQ9XCJNNTA0IDI1NmMwIDEzNi45NjctMTExLjAzMyAyNDgtMjQ4IDI0OFM4IDM5Mi45NjcgOCAyNTYgMTE5LjAzMyA4IDI1NiA4czI0OCAxMTEuMDMzIDI0OCAyNDh6TTIyNy4zMTQgMzg3LjMxNGwxODQtMTg0YzYuMjQ4LTYuMjQ4IDYuMjQ4LTE2LjM3OSAwLTIyLjYyN2wtMjIuNjI3LTIyLjYyN2MtNi4yNDgtNi4yNDktMTYuMzc5LTYuMjQ5LTIyLjYyOCAwTDIxNiAzMDguMTE4bC03MC4wNTktNzAuMDU5Yy02LjI0OC02LjI0OC0xNi4zNzktNi4yNDgtMjIuNjI4IDBsLTIyLjYyNyAyMi42MjdjLTYuMjQ4IDYuMjQ4LTYuMjQ4IDE2LjM3OSAwIDIyLjYyN2wxMDQgMTA0YzYuMjQ5IDYuMjQ5IDE2LjM3OSA2LjI0OSAyMi42MjguMDAxelwiPjwvcGF0aD5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3N2Zz5gLFxyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIF90ZW1wKHRlbXBsYXRlLCBjb2xvcikge1xyXG4gICAgICAgICAgICAgICAgICAgIGxldCBfdGVtcGxhdGUgPSB0aGlzLl90ZW1wbGF0ZVt0ZW1wbGF0ZV0gPyB0aGlzLl90ZW1wbGF0ZVt0ZW1wbGF0ZV0gOiB0aGlzLl90ZW1wbGF0ZS5hcnJvdztcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gX3RlbXBsYXRlLnJlcGxhY2UoL1xce1xcey4qXFx9XFx9L2dtLCBjb2xvciA/IGNvbG9yIDogJ3doaXRlJyk7XHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgZ2V0KGNvbG9yLCB0ZW1wbGF0ZSwgdXJsID0gdHJ1ZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGxldCBfY29sb3IgPSB0aGlzLl9jb2xvcnNbY29sb3JdID8gdGhpcy5fY29sb3JzW2NvbG9yXSA6IGNvbG9yO1xyXG4gICAgICAgICAgICAgICAgICAgIGxldCBzdmcgPSB0aGlzLl90ZW1wKHRlbXBsYXRlLCBfY29sb3IpLnJlcGxhY2UoL1tcXHNdezIsfS9nbSwgJyAnKTtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdXJsID8gdGhpcy5fcHJlZml4ICsgZW5jb2RlVVJJQ29tcG9uZW50KHN2ZykgOiBzdmc7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgfSAvLyBjb25zdHJ1Y3RvclxyXG5cclxuICAgIC8vINCc0LXRgtC+0LQg0LTQu9GPINC+0YLQvtCx0YDQsNC20LXQvdC40Y8g0YDQsNC30LzQtdGA0L7QsiDQutCw0YDRgtC40L3QutC4INCyINC60L3QvtC/0LrQtVxyXG4gICAgc2V0U2l6ZShzaXplLCBpbWFnZV9kYXRhKSB7XHJcbiAgICAgICAgaWYgKGltYWdlX2RhdGEud2lkdGggJiYgaW1hZ2VfZGF0YS5oZWlnaHQpIHtcclxuICAgICAgICAgICAgc2l6ZS5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuc2VsLm5vbl9zaXplKTtcclxuICAgICAgICAgICAgc2l6ZS50ZXh0Q29udGVudCA9IGAke2ltYWdlX2RhdGEud2lkdGh9eCR7aW1hZ2VfZGF0YS5oZWlnaHR9YDtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBzaXplLmNsYXNzTGlzdC5hZGQodGhpcy5zZWwubm9uX3NpemUpO1xyXG4gICAgICAgICAgICBzaXplLnRleHRDb250ZW50ID0gJyc7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8vINCc0LXRgtC+0LQg0YHQvtC30LTQsNC90LjRjyDQutC+0L3RgtC10LnQvdC10YDQsCDRgSDQutC90L7Qv9C60L7QuVxyXG4gICAgY3JlYXRlRG93bmxvYWRDb250YWluZXIocGFyZW50KSB7XHJcbiAgICAgICAgbGV0IHdyYXAgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcclxuICAgICAgICB3cmFwLmlkID0gdGhpcy5zZWwucGhvdG9Eb3dubG9hZF9pZDtcclxuXHJcbiAgICAgICAgLy8g0JfQsNC/0L7Qu9C90LXQvdC40LUg0LrQvtC90YLQtdC50L3QtdGA0LAg0LLQvdGD0YLRgNC10L3QvdC40LzQuCDRjdC70LXQvNC10L3RgtCw0LzQuFxyXG4gICAgICAgIHdyYXAuaW5uZXJIVE1MID0gdGhpcy5nZXRJbm5lckVsZW1zKCk7XHJcblxyXG4gICAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xyXG4gICAgICAgICAgICB3cmFwLmNsYXNzTGlzdC5hZGQodGhpcy5zZWwucmVhZHkpO1xyXG4gICAgICAgICAgICAvLyDQlNC70Y8g0YLQtdGB0YLQsCwg0YfRgtC+0LHRiyDQvdCw0YHRgtGA0L7QudC60Lgg0YHRgNCw0LfRgyDQvtGC0LrRgNGL0YLRiyDQsdGL0LvQuFxyXG4gICAgICAgICAgICB3cmFwLmNsYXNzTGlzdC5hZGQodGhpcy5zZWwuc2V0dGluZ3MpO1xyXG4gICAgICAgICAgICB3cmFwLmNsYXNzTGlzdC5hZGQodGhpcy5zZWwuc2V0dGluZ3Nfb3Blbik7XHJcblxyXG4gICAgICAgICAgICB3cmFwLnF1ZXJ5U2VsZWN0b3IoJy5jb2cnKS5jbGFzc0xpc3QuYWRkKHRoaXMuc2VsLmRyYXcpO1xyXG4gICAgICAgIH0sIDApO1xyXG5cclxuICAgICAgICBwYXJlbnQuYXBwZW5kQ2hpbGQod3JhcCk7XHJcblxyXG4gICAgICAgIHJldHVybiB3cmFwO1xyXG4gICAgfVxyXG5cclxuICAgIC8vINCc0LXRgtC+0LQsINCz0LXQvdC10YDQuNGA0YPRjtGJ0LjQuSDQstC10YDRgdGC0LrRgyDRgdCw0LzQvtC5INC60L3QvtC/0LrQuFxyXG4gICAgZ2V0SW5uZXJFbGVtcygpIHtcclxuICAgICAgICByZXR1cm4gLyogaHRtbCAqLyBgXHJcbiAgICAgICAgICAgIDxkaXYgY2xhc3M9XCIke3RoaXMuc2VsLmdldCgnc2V0dC5zZXR0aW5nc193cmFwJyl9XCI+XHJcbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiJHt0aGlzLnNlbC5nZXQoJ3NldHQuc2V0dGluZ3MnKX1cIj5cclxuICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiJHt0aGlzLnNlbC5nZXQoJ3NldHQuc2V0dGluZ3NfaGVhZGVyJyl9XCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCIke3RoaXMuc2VsLmdldCgnc2V0dC5zZXR0aW5nc19oZWFkZXJfaWNvJyl9XCI+PC9kaXY+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCIke3RoaXMuc2VsLmdldCgnc2V0dC5zZXR0aW5nc19oZWFkZXJfdGV4dCcpfVwiPtCg0LXQttC40Lwg0LrQu9C40LrQsDwvZGl2PlxyXG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCIke3RoaXMuc2VsLmdldCgnc2V0dC5zZXR0aW5nc19ib2R5Jyl9XCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDx1bCBjbGFzcz1cIiR7dGhpcy5zZWwuZ2V0KCdzZXR0LnNldHRpbmdzX21vZGUnKX1cIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxsaSBjbGFzcz1cIiR7dGhpcy5zZWwuZ2V0KCdzZXR0LnNldHRpbmdzX2l0ZW0nKX1cIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aW5wdXQgdHlwZT1cInJhZGlvXCIgaWQ9XCIke3RoaXMuc2VsLmRvd25sb2FkX21vZGVfdHJ1ZX1cIiBuYW1lPVwiZG93bmxvYWRfbW9kZVwiIHZhbHVlPVwidHJ1ZVwiIGNoZWNrZWQ+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGxhYmVsIGZvcj1cIiR7dGhpcy5zZWwuZG93bmxvYWRfbW9kZV90cnVlfVwiIGNsYXNzPVwiJHt0aGlzLnNlbC5nZXQoJ3NldHQuc2V0dGluZ3NfaXRlbV9hY3Rpb24nKX1cIj7QodC60LDRh9Cw0YLRjDwvbGFiZWw+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2xpPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGxpIGNsYXNzPVwiJHt0aGlzLnNlbC5nZXQoJ3NldHQuc2V0dGluZ3NfaXRlbScpfVwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxpbnB1dCB0eXBlPVwicmFkaW9cIiBpZD1cIiR7dGhpcy5zZWwuZG93bmxvYWRfbW9kZV9mYWxzZX1cIiBuYW1lPVwiZG93bmxvYWRfbW9kZVwiIHZhbHVlPVwiZmFsc2VcIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8bGFiZWwgZm9yPVwiJHt0aGlzLnNlbC5kb3dubG9hZF9tb2RlX2ZhbHNlfVwiIGNsYXNzPVwiJHt0aGlzLnNlbC5nZXQoJ3NldHQuc2V0dGluZ3NfaXRlbV9hY3Rpb24nKX1cIj7QkiDQvdC+0LLQvtC5INCy0LrQu9Cw0LTQutC1PC9sYWJlbD5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvbGk+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDwvdWw+XHJcbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICA8L2Rpdj5cclxuXHJcbiAgICAgICAgICAgIDwvZGl2PlxyXG5cclxuICAgICAgICAgICAgPGEgY2xhc3M9XCIke3RoaXMuc2VsLmdldCgnYnRuLmJ0bicpfVwiIGhyZWY9XCIjIVwiIHRhcmdldD1cIl9ibGFua1wiIGRyYWdnYWJsZT1cImZhbHNlXCI+XHJcbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiJHt0aGlzLnNlbC5nZXQoJ2J0bi5pY29uJyl9XCI+XHJcbiAgICAgICAgICAgICAgICAgICAgJHt0aGlzLmljb25zLmdldCgnZ3JlZW4nLCAnY29nJywgZmFsc2UpfVxyXG4gICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiJHt0aGlzLnNlbC5nZXQoJ2J0bi5tYWluX3RpdGxlX3dyYXAnKX1cIj5cclxuICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiJHt0aGlzLnNlbC5nZXQoJ2J0bi5tYWluX3RpdGxlX2lubmVyJyl9XCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCIke3RoaXMuc2VsLmdldCgnYnRuLnNpemUnKX1cIj48L2Rpdj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cIiR7dGhpcy5zZWwuZ2V0KCdidG4uc2V0dGluZ3NfdGl0bGUnKX1cIj7QndCw0YHRgtGA0L7QudC60Lg8L2Rpdj5cclxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICA8L2E+XHJcbiAgICAgICAgYDtcclxuICAgIH1cclxuXHJcbiAgICAvLyDQnNC10YLQvtC0LCDRiNCw0LHQu9C+0L3QuNC30LjRgNGD0Y7RidC40Lkg0YHRgtC40LvQuCDQutC90L7Qv9C60LhcclxuICAgIGdldFN0eWxlQ29udGVudCgpIHtcclxuICAgICAgICAgICAgcmV0dXJuIC8qIGNzcyAqLyBgXHJcbiAgICAgICAgICAgICMke3RoaXMuc2VsLnBob3RvRG93bmxvYWRfaWR9IHtcclxuICAgICAgICAgICAgICAgIGJhY2tncm91bmQtY29sb3I6IHRyYW5zcGFyZW50O1xyXG4gICAgICAgICAgICAgICAgYm9yZGVyLXRvcC1sZWZ0LXJhZGl1czogMDtcclxuICAgICAgICAgICAgICAgIGNvbG9yOiAjQzNDRkUwO1xyXG4gICAgICAgICAgICAgICAgZGlzcGxheTogZmxleDtcclxuICAgICAgICAgICAgICAgIGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47XHJcbiAgICAgICAgICAgICAgICBwb3NpdGlvbjogYWJzb2x1dGU7XHJcbiAgICAgICAgICAgICAgICBib3R0b206IDA7XHJcbiAgICAgICAgICAgICAgICBsZWZ0OiAxMDAlO1xyXG4gICAgICAgICAgICAgICAgb3BhY2l0eTogMDtcclxuICAgICAgICAgICAgICAgIHRyYW5zZm9ybTogdHJhbnNsYXRlM2QoLTM4cHgsIDAsIDFweCk7XHJcbiAgICAgICAgICAgICAgICB3aWxsLWNoYW5nZTogdHJhbnNmb3JtLCBvcGFjaXR5O1xyXG4gICAgICAgICAgICAgICAgdHJhbnNpdGlvbjogb3BhY2l0eSAuMjVzIGVhc2UtaW4tb3V0LCB0cmFuc2Zvcm0gLjI1cyBlYXNlLWluLW91dCAhaW1wb3J0YW50O1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAuJHt0aGlzLnNlbC5pbWdDb250YWluZXJfY2xhc3N9OmhvdmVyICMke3RoaXMuc2VsLnBob3RvRG93bmxvYWRfaWR9LiR7dGhpcy5zZWwucmVhZHl9IHtcclxuICAgICAgICAgICAgICAgIG9wYWNpdHk6IC4zO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAuJHt0aGlzLnNlbC5pbWdDb250YWluZXJfY2xhc3N9ICMke3RoaXMuc2VsLnBob3RvRG93bmxvYWRfaWR9LiR7dGhpcy5zZWwucmVhZHl9OmhvdmVyIHtcclxuICAgICAgICAgICAgICAgIG9wYWNpdHk6IC44O1xyXG4gICAgICAgICAgICAgICAgdHJhbnNmb3JtOiB0cmFuc2xhdGUzZCgtMTAwJSwgMCwgMXB4KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgLiR7dGhpcy5zZWwuZ2V0KCdidG4uYnRuJyl9IHtcclxuICAgICAgICAgICAgICAgIGRpc3BsYXk6IGZsZXg7XHJcbiAgICAgICAgICAgICAgICBhbGlnbi1pdGVtczogY2VudGVyO1xyXG4gICAgICAgICAgICAgICAgcGFkZGluZzogMTBweDtcclxuICAgICAgICAgICAgICAgIGJhY2tncm91bmQtY29sb3I6ICMwMDA7XHJcbiAgICAgICAgICAgICAgICBib3JkZXItdG9wLWxlZnQtcmFkaXVzOiA0cHg7XHJcbiAgICAgICAgICAgICAgICBjb2xvcjogI0MzQ0ZFMCAhaW1wb3J0YW50O1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAuJHt0aGlzLnNlbC5nZXQoJ2J0bi5idG4nKX06aG92ZXIge1xyXG4gICAgICAgICAgICAgICAgdGV4dC1kZWNvcmF0aW9uOiBub25lO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAuJHt0aGlzLnNlbC5nZXQoJ2J0bi5pY29uJyl9IHtcclxuICAgICAgICAgICAgICAgIGJhY2tncm91bmQtaW1hZ2U6IHVybCgnJHt0aGlzLmljb25zLmdldCgnd2hpdGUnLCAnYXJyb3cnKX0nKTtcclxuICAgICAgICAgICAgICAgIGJhY2tncm91bmQtc2l6ZTogY29udGFpbjtcclxuICAgICAgICAgICAgICAgIGJhY2tncm91bmQtcmVwZWF0OiBuby1yZXBlYXQ7XHJcbiAgICAgICAgICAgICAgICBoZWlnaHQ6IDE4cHg7XHJcbiAgICAgICAgICAgICAgICB3aWR0aDogMThweDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgLiR7dGhpcy5zZWwuZ2V0KCdidG4uYnRuJyl9OmhvdmVyIC4ke3RoaXMuc2VsLmdldCgnYnRuLmljb24nKX0ge1xyXG4gICAgICAgICAgICAgICAgYmFja2dyb3VuZC1pbWFnZTogdXJsKCcke3RoaXMuaWNvbnMuZ2V0KCdncmVlbicsICdhcnJvdycpfScpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAjJHt0aGlzLnNlbC5waG90b0Rvd25sb2FkX2lkfSAuJHt0aGlzLnNlbC5nZXQoJ2J0bi5zaXplJyl9Om5vdCgubm9uX3NpemUpIHtcclxuICAgICAgICAgICAgICAgIHBhZGRpbmctbGVmdDogMTBweDtcclxuICAgICAgICAgICAgICAgIGNvbG9yOiAjQzNDRkUwICFpbXBvcnRhbnQ7XHJcbiAgICAgICAgICAgICAgICBmbGV4LWdyb3c6IDE7XHJcbiAgICAgICAgICAgICAgICB0ZXh0LWFsaWduOiBjZW50ZXI7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICMke3RoaXMuc2VsLnBob3RvRG93bmxvYWRfaWR9LiR7dGhpcy5zZWwuc2V0dGluZ3N9IHtcclxuICAgICAgICAgICAgICAgIG9wYWNpdHk6IC44ICFpbXBvcnRhbnQ7XHJcbiAgICAgICAgICAgICAgICB0cmFuc2Zvcm06IHRyYW5zbGF0ZTNkKC0xMDAlLCAwLCAxcHgpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAjJHt0aGlzLnNlbC5waG90b0Rvd25sb2FkX2lkfS4ke3RoaXMuc2VsLnNldHRpbmdzfSAuJHt0aGlzLnNlbC5nZXQoJ2J0bi5idG4nKX0ge1xyXG4gICAgICAgICAgICAgICAgYm9yZGVyLXRvcC1sZWZ0LXJhZGl1czogMDtcclxuICAgICAgICAgICAgICAgIHBvc2l0aW9uOiByZWxhdGl2ZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgIyR7dGhpcy5zZWwucGhvdG9Eb3dubG9hZF9pZH0uJHt0aGlzLnNlbC5zZXR0aW5nc30gLiR7dGhpcy5zZWwuZ2V0KCdidG4uYnRuJyl9OmJlZm9yZSB7XHJcbiAgICAgICAgICAgICAgICBjb250ZW50OiAnJztcclxuICAgICAgICAgICAgICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTtcclxuICAgICAgICAgICAgICAgIHRvcDogLTFweDtcclxuICAgICAgICAgICAgICAgIGxlZnQ6IDUwJTtcclxuICAgICAgICAgICAgICAgIHRyYW5zZm9ybTogdHJhbnNsYXRlWCgtNTAlKTtcclxuICAgICAgICAgICAgICAgIHdpZHRoOiBjYWxjKDEwMCUgLSAzMHB4KTtcclxuICAgICAgICAgICAgICAgIGhlaWdodDogMXB4O1xyXG4gICAgICAgICAgICAgICAgYmFja2dyb3VuZC1jb2xvcjogcmdiYSgyNTUsIDI1NSwgMjU1LCAuMSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIC4ke3RoaXMuc2VsLmdldCgnYnRuLm1haW5fdGl0bGVfd3JhcCcpfSB7XHJcbiAgICAgICAgICAgICAgICBmbGV4LWdyb3c6IDE7XHJcbiAgICAgICAgICAgICAgICBoZWlnaHQ6IDE0cHg7XHJcbiAgICAgICAgICAgICAgICBvdmVyZmxvdzogaGlkZGVuO1xyXG4gICAgICAgICAgICAgICAgdGV4dC1hbGlnbjogY2VudGVyO1xyXG4gICAgICAgICAgICAgICAgdXNlci1zZWxlY3Q6IG5vbmU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICMke3RoaXMuc2VsLmdldCgncGhvdG9Eb3dubG9hZF9pZCcpfSAuJHt0aGlzLnNlbC5nZXQoJ2J0bi5tYWluX3RpdGxlX2lubmVyJyl9IHtcclxuICAgICAgICAgICAgICAgIHdpbGwtY2hhbmdlOiB0cmFuc2Zvcm07XHJcbiAgICAgICAgICAgICAgICB0cmFuc2l0aW9uOiB0cmFuc2Zvcm0gLjI1cyBlYXNlLW91dCAhaW1wb3J0YW50O1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAuJHt0aGlzLnNlbC5nZXQoJ2J0bi5tYWluX3RpdGxlX2lubmVyJyl9ICoge1xyXG4gICAgICAgICAgICAgICAgbWFyZ2luLWJvdHRvbTogMTRweDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgIyR7dGhpcy5zZWwucGhvdG9Eb3dubG9hZF9pZH0uJHt0aGlzLnNlbC5zZXR0aW5nc30gLiR7dGhpcy5zZWwuZ2V0KCdidG4ubWFpbl90aXRsZV9pbm5lcicpfSB7XHJcbiAgICAgICAgICAgICAgICB0cmFuc2Zvcm06IHRyYW5zbGF0ZTNkKDAsIC0yOHB4LCAxcHgpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAjJHt0aGlzLnNlbC5waG90b0Rvd25sb2FkX2lkfS4ke3RoaXMuc2VsLnNldHRpbmdzfSAuJHt0aGlzLnNlbC5nZXQoJ2J0bi5pY29uJyl9IHtcclxuICAgICAgICAgICAgICAgIGJhY2tncm91bmQtaW1hZ2U6IG5vbmU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICMke3RoaXMuc2VsLnBob3RvRG93bmxvYWRfaWR9LiR7dGhpcy5zZWwuc2V0dGluZ3N9IC4ke3RoaXMuc2VsLmdldCgnYnRuLmljb24nKX0gLmNvZyB7XHJcbiAgICAgICAgICAgICAgICB3aWR0aDogMThweDtcclxuICAgICAgICAgICAgICAgIGhlaWdodDogMThweDtcclxuICAgICAgICAgICAgICAgIHRyYW5zZm9ybTogcm90YXRlKDMwZGVnKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgIyR7dGhpcy5zZWwucGhvdG9Eb3dubG9hZF9pZH06bm90KC4ke3RoaXMuc2VsLnNldHRpbmdzfSkgLiR7dGhpcy5zZWwuZ2V0KCdzZXR0LnNldHRpbmdzX3dyYXAnKX0ge1xyXG4gICAgICAgICAgICAgICAgaGVpZ2h0OiAwO1xyXG4gICAgICAgICAgICAgICAgb3ZlcmZsb3c6IGhpZGRlbjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgIyR7dGhpcy5zZWwucGhvdG9Eb3dubG9hZF9pZH0uJHt0aGlzLnNlbC5zZXR0aW5nc30gLiR7dGhpcy5zZWwuZ2V0KCdzZXR0LnNldHRpbmdzX3dyYXAnKX0ge1xyXG4gICAgICAgICAgICAgICAgaGVpZ2h0OiBhdXRvO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAjJHt0aGlzLnNlbC5nZXQoJ3Bob3RvRG93bmxvYWRfaWQnKX0gLiR7dGhpcy5zZWwuZ2V0KCdzZXR0LnNldHRpbmdzJyl9IHtcclxuICAgICAgICAgICAgICAgIGJhY2tncm91bmQtY29sb3I6ICMwMDA7XHJcbiAgICAgICAgICAgICAgICBib3JkZXItdG9wLWxlZnQtcmFkaXVzOiA0cHg7XHJcbiAgICAgICAgICAgICAgICBmb250LXNpemU6IDEycHg7XHJcbiAgICAgICAgICAgICAgICB3aWR0aDogMTUwcHg7XHJcbiAgICAgICAgICAgICAgICB3aWxsLWNoYW5nZTogdHJhbnNmb3JtO1xyXG4gICAgICAgICAgICAgICAgdHJhbnNmb3JtOiB0cmFuc2xhdGUzZCgwLCAxMDAlLCAxcHgpO1xyXG4gICAgICAgICAgICAgICAgdHJhbnNpdGlvbjogdHJhbnNmb3JtIC4yNXMgZWFzZS1vdXQgIWltcG9ydGFudDtcclxuICAgICAgICAgICAgICAgIHVzZXItc2VsZWN0OiBub25lO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAjJHt0aGlzLnNlbC5waG90b0Rvd25sb2FkX2lkfS4ke3RoaXMuc2VsLnNldHRpbmdzX29wZW59IC4ke3RoaXMuc2VsLmdldCgnc2V0dC5zZXR0aW5ncycpfSB7XHJcbiAgICAgICAgICAgICAgICB0cmFuc2Zvcm06IHRyYW5zbGF0ZTNkKDAsIDAlLCAxcHgpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAuJHt0aGlzLnNlbC5nZXQoJ3NldHQuc2V0dGluZ3NfaGVhZGVyJyl9IHtcclxuICAgICAgICAgICAgICAgIHBvc2l0aW9uOiByZWxhdGl2ZTtcclxuICAgICAgICAgICAgICAgIGRpc3BsYXk6IGZsZXg7XHJcbiAgICAgICAgICAgICAgICBhbGlnbi1pdGVtczogY2VudGVyO1xyXG4gICAgICAgICAgICAgICAgcGFkZGluZy1yaWdodDogMTZweDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgLiR7dGhpcy5zZWwuZ2V0KCdzZXR0LnNldHRpbmdzX2hlYWRlcicpfTphZnRlciB7XHJcbiAgICAgICAgICAgICAgICBjb250ZW50OiAnJztcclxuICAgICAgICAgICAgICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTtcclxuICAgICAgICAgICAgICAgIGJvdHRvbTogMDtcclxuICAgICAgICAgICAgICAgIGxlZnQ6IDUwJTtcclxuICAgICAgICAgICAgICAgIHRyYW5zZm9ybTogdHJhbnNsYXRlWCgtNTAlKTtcclxuICAgICAgICAgICAgICAgIHdpZHRoOiBjYWxjKDEwMCUgLSAzMHB4KTtcclxuICAgICAgICAgICAgICAgIGhlaWdodDogMXB4O1xyXG4gICAgICAgICAgICAgICAgYmFja2dyb3VuZC1jb2xvcjogcmdiYSgyNTUsIDI1NSwgMjU1LCAuMSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIC4ke3RoaXMuc2VsLmdldCgnc2V0dC5zZXR0aW5nc19ib2R5Jyl9IHtcclxuICAgICAgICAgICAgICAgIHBhZGRpbmc6IDEwcHg7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIC4ke3RoaXMuc2VsLmdldCgnc2V0dC5zZXR0aW5nc19oZWFkZXJfaWNvJyl9IHtcclxuICAgICAgICAgICAgICAgIGJhY2tncm91bmQtaW1hZ2U6IHVybCgnJHt0aGlzLmljb25zLmdldCgnd2hpdGUnLCAnb2snKX0nKTtcclxuICAgICAgICAgICAgICAgIGJhY2tncm91bmQtc2l6ZTogMTZweCAxNnB4O1xyXG4gICAgICAgICAgICAgICAgYmFja2dyb3VuZC1wb3NpdGlvbjogY2VudGVyO1xyXG4gICAgICAgICAgICAgICAgYmFja2dyb3VuZC1yZXBlYXQ6IG5vLXJlcGVhdDtcclxuICAgICAgICAgICAgICAgIHBhZGRpbmc6IDZweCAxMHB4O1xyXG4gICAgICAgICAgICAgICAgd2lkdGg6IDE4cHg7XHJcbiAgICAgICAgICAgICAgICBoZWlnaHQ6IDE4cHg7XHJcbiAgICAgICAgICAgICAgICBjdXJzb3I6IHBvaW50ZXI7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIC4ke3RoaXMuc2VsLmdldCgnc2V0dC5zZXR0aW5nc19oZWFkZXJfaWNvJyl9OmhvdmVyIHtcclxuICAgICAgICAgICAgICAgIGJhY2tncm91bmQtaW1hZ2U6IHVybCgnJHt0aGlzLmljb25zLmdldCgnZ3JlZW4nLCAnb2snKX0nKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgLiR7dGhpcy5zZWwuZ2V0KCdzZXR0LnNldHRpbmdzX2hlYWRlcl90ZXh0Jyl9IHtcclxuICAgICAgICAgICAgICAgIHRleHQtYWxpZ246IHJpZ2h0O1xyXG4gICAgICAgICAgICAgICAgZmxleC1ncm93OiAxO1xyXG4gICAgICAgICAgICAgICAgY3Vyc29yOiBkZWZhdWx0O1xyXG4gICAgICAgICAgICAgICAgZm9udC13ZWlnaHQ6IGJvbGQ7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIC4ke3RoaXMuc2VsLmdldCgnc2V0dC5zZXR0aW5nc19tb2RlJyl9IHtcclxuICAgICAgICAgICAgICAgIHBhZGRpbmc6IDA7XHJcbiAgICAgICAgICAgICAgICBtYXJnaW46IDA7XHJcbiAgICAgICAgICAgICAgICBsaXN0LXN0eWxlOiBub25lO1xyXG4gICAgICAgICAgICAgICAgZGlzcGxheTogZmxleDtcclxuICAgICAgICAgICAgICAgIGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIC4ke3RoaXMuc2VsLmdldCgnc2V0dC5zZXR0aW5nc19pdGVtJyl9IHtcclxuICAgICAgICAgICAgICAgIGRpc3BsYXk6IGZsZXg7XHJcbiAgICAgICAgICAgICAgICBhbGlnbi1pdGVtczogY2VudGVyO1xyXG4gICAgICAgICAgICAgICAgcG9zaXRpb246IHJlbGF0aXZlO1xyXG4gICAgICAgICAgICAgICAgY3Vyc29yOiBwb2ludGVyO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAuJHt0aGlzLnNlbC5nZXQoJ3NldHQuc2V0dGluZ3NfaXRlbScpfTpub3QoOmxhc3QtY2hpbGQpIHtcclxuICAgICAgICAgICAgICAgIG1hcmdpbi1ib3R0b206IDVweDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgLiR7dGhpcy5zZWwuZ2V0KCdzZXR0LnNldHRpbmdzX2l0ZW0nKX0gaW5wdXRbdHlwZT1yYWRpb10ge1xyXG4gICAgICAgICAgICAgICAgbWFyZ2luOiAwO1xyXG4gICAgICAgICAgICAgICAgZGlzcGxheTogbm9uZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgLiR7dGhpcy5zZWwuZ2V0KCdzZXR0LnNldHRpbmdzX2l0ZW1fYWN0aW9uJyl9IHtcclxuICAgICAgICAgICAgICAgIGRpc3BsYXk6IGZsZXg7XHJcbiAgICAgICAgICAgICAgICBhbGlnbi1pdGVtczogY2VudGVyO1xyXG4gICAgICAgICAgICAgICAgd2lkdGg6IDEwMCU7XHJcbiAgICAgICAgICAgICAgICBoZWlnaHQ6IDE4cHg7XHJcbiAgICAgICAgICAgICAgICBwYWRkaW5nLWxlZnQ6IDIwcHg7XHJcbiAgICAgICAgICAgICAgICBjdXJzb3I6IHBvaW50ZXI7XHJcbiAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kLWltYWdlOiB1cmwoJyR7dGhpcy5pY29ucy5nZXQoJ3doaXRlJywgJ2NpcmNsZScpfScpO1xyXG4gICAgICAgICAgICAgICAgYmFja2dyb3VuZC1zaXplOiAxNHB4IDE0cHg7XHJcbiAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kLXJlcGVhdDogbm8tcmVwZWF0O1xyXG4gICAgICAgICAgICAgICAgYmFja2dyb3VuZC1wb3NpdGlvbjogMCBjZW50ZXI7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIC4ke3RoaXMuc2VsLmdldCgnc2V0dC5zZXR0aW5nc19pdGVtX2FjdGlvbicpfTpob3ZlciB7XHJcbiAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kLWltYWdlOiB1cmwoJyR7dGhpcy5pY29ucy5nZXQoJ2dyZWVuJywgJ2NpcmNsZScpfScpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAuJHt0aGlzLnNlbC5nZXQoJ3NldHQuc2V0dGluZ3NfaXRlbScpfSBpbnB1dFt0eXBlPXJhZGlvXTpjaGVja2Vkfi4ke3RoaXMuc2VsLmdldCgnc2V0dC5zZXR0aW5nc19pdGVtX2FjdGlvbicpfSB7XHJcbiAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kLWltYWdlOiB1cmwoJyR7dGhpcy5pY29ucy5nZXQoJ3doaXRlJywgJ2NoZWNrX2NpcmNsZScpfScpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAuJHt0aGlzLnNlbC5nZXQoJ3NldHQuc2V0dGluZ3NfaXRlbScpfSBpbnB1dFt0eXBlPXJhZGlvXTpjaGVja2Vkfi4ke3RoaXMuc2VsLmdldCgnc2V0dC5zZXR0aW5nc19pdGVtX2FjdGlvbicpfTpob3ZlciB7XHJcbiAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kLWltYWdlOiB1cmwoJyR7dGhpcy5pY29ucy5nZXQoJ2dyZWVuJywgJ2NoZWNrX2NpcmNsZScpfScpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAuY29nIC5jb2dfY2lyY2xlIHtcclxuICAgICAgICAgICAgICAgIGZpbGw6IG5vbmU7XHJcbiAgICAgICAgICAgICAgICBmaWxsLW9wYWNpdHk6IDA7XHJcbiAgICAgICAgICAgICAgICBzdHJva2Utd2lkdGg6IDI1O1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAjJHt0aGlzLnNlbC5nZXQoJ3Bob3RvRG93bmxvYWRfaWQnKX0gLmNvZy4ke3RoaXMuc2VsLmRyYXd9IC5jb2dfcGF0aCB7XHJcbiAgICAgICAgICAgICAgICB0cmFuc2l0aW9uOiBzdHJva2UtZGFzaG9mZnNldCAuNXMgbGluZWFyLCBmaWxsLW9wYWNpdHkgLjFzIGVhc2Utb3V0ICFpbXBvcnRhbnQ7XHJcbiAgICAgICAgICAgICAgICBzdHJva2UtZGFzaG9mZnNldDogMDtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgIyR7dGhpcy5zZWwuZ2V0KCdwaG90b0Rvd25sb2FkX2lkJyl9IC5jb2cgLmNvZ19wYXRoIHtcclxuICAgICAgICAgICAgICAgIGZpbGw6IG5vbmU7XHJcbiAgICAgICAgICAgICAgICBmaWxsLW9wYWNpdHk6IDA7XHJcbiAgICAgICAgICAgICAgICBzdHJva2Utd2lkdGg6IDI1O1xyXG4gICAgICAgICAgICAgICAgc3Ryb2tlLWRhc2hhcnJheTogMTY2OTtcclxuICAgICAgICAgICAgICAgIHN0cm9rZS1kYXNob2Zmc2V0OiAxNjY5O1xyXG4gICAgICAgICAgICAgICAgdHJhbnNpdGlvbjogc3Ryb2tlLWRhc2hvZmZzZXQgLjFzIGxpbmVhciwgZmlsbC1vcGFjaXR5IC4xcyBlYXNlLW91dCAhaW1wb3J0YW50O1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAjJHt0aGlzLnNlbC5waG90b0Rvd25sb2FkX2lkfSAuY29nLiR7dGhpcy5zZWwuZHJhd19maWxsfSAuY29nX3BhdGgge1xyXG4gICAgICAgICAgICAgICAgZmlsbDogIzAwYjc1YTtcclxuICAgICAgICAgICAgICAgIGZpbGwtb3BhY2l0eTogMTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgIyR7dGhpcy5zZWwucGhvdG9Eb3dubG9hZF9pZH0gLmNvZy4ke3RoaXMuc2VsLmRyYXdfZmlsbH0gLmNvZ19jaXJjbGUge1xyXG4gICAgICAgICAgICAgICAgZmlsbDogIzAwMDtcclxuICAgICAgICAgICAgICAgIHN0cm9rZS13aWR0aDogMTU7XHJcbiAgICAgICAgICAgICAgICBmaWxsLW9wYWNpdHk6IDE7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICBgO1xyXG4gICAgICAgIH0gLy8gZ2V0U3R5bGVDb250ZW50XHJcblxyXG59IiwiaW1wb3J0IFBob3RvRG93bmxvYWQgZnJvbSAnLi9tb2R1bGVzL3Bob3RvLWRvd25sb2FkJztcclxuXHJcblxyXG53aW5kb3cucGhvdG9Eb3dubG9hZCA9IG5ldyBQaG90b0Rvd25sb2FkKHtcclxuICAgIGRvd25sb2FkOiB0cnVlXHJcbn0pOyIsIi8vZG93bmxvYWQuanMgdjQuMiwgYnkgZGFuZGF2aXM7IDIwMDgtMjAxNi4gW01JVF0gc2VlIGh0dHA6Ly9kYW5tbC5jb20vZG93bmxvYWQuaHRtbCBmb3IgdGVzdHMvdXNhZ2Vcbi8vIHYxIGxhbmRlZCBhIEZGK0Nocm9tZSBjb21wYXQgd2F5IG9mIGRvd25sb2FkaW5nIHN0cmluZ3MgdG8gbG9jYWwgdW4tbmFtZWQgZmlsZXMsIHVwZ3JhZGVkIHRvIHVzZSBhIGhpZGRlbiBmcmFtZSBhbmQgb3B0aW9uYWwgbWltZVxuLy8gdjIgYWRkZWQgbmFtZWQgZmlsZXMgdmlhIGFbZG93bmxvYWRdLCBtc1NhdmVCbG9iLCBJRSAoMTArKSBzdXBwb3J0LCBhbmQgd2luZG93LlVSTCBzdXBwb3J0IGZvciBsYXJnZXIrZmFzdGVyIHNhdmVzIHRoYW4gZGF0YVVSTHNcbi8vIHYzIGFkZGVkIGRhdGFVUkwgYW5kIEJsb2IgSW5wdXQsIGJpbmQtdG9nZ2xlIGFyaXR5LCBhbmQgbGVnYWN5IGRhdGFVUkwgZmFsbGJhY2sgd2FzIGltcHJvdmVkIHdpdGggZm9yY2UtZG93bmxvYWQgbWltZSBhbmQgYmFzZTY0IHN1cHBvcnQuIDMuMSBpbXByb3ZlZCBzYWZhcmkgaGFuZGxpbmcuXG4vLyB2NCBhZGRzIEFNRC9VTUQsIGNvbW1vbkpTLCBhbmQgcGxhaW4gYnJvd3NlciBzdXBwb3J0XG4vLyB2NC4xIGFkZHMgdXJsIGRvd25sb2FkIGNhcGFiaWxpdHkgdmlhIHNvbG8gVVJMIGFyZ3VtZW50IChzYW1lIGRvbWFpbi9DT1JTIG9ubHkpXG4vLyB2NC4yIGFkZHMgc2VtYW50aWMgdmFyaWFibGUgbmFtZXMsIGxvbmcgKG92ZXIgMk1CKSBkYXRhVVJMIHN1cHBvcnQsIGFuZCBoaWRkZW4gYnkgZGVmYXVsdCB0ZW1wIGFuY2hvcnNcbi8vIGh0dHBzOi8vZ2l0aHViLmNvbS9ybmRtZS9kb3dubG9hZFxuXG4oZnVuY3Rpb24gKHJvb3QsIGZhY3RvcnkpIHtcblx0aWYgKHR5cGVvZiBkZWZpbmUgPT09ICdmdW5jdGlvbicgJiYgZGVmaW5lLmFtZCkge1xuXHRcdC8vIEFNRC4gUmVnaXN0ZXIgYXMgYW4gYW5vbnltb3VzIG1vZHVsZS5cblx0XHRkZWZpbmUoW10sIGZhY3RvcnkpO1xuXHR9IGVsc2UgaWYgKHR5cGVvZiBleHBvcnRzID09PSAnb2JqZWN0Jykge1xuXHRcdC8vIE5vZGUuIERvZXMgbm90IHdvcmsgd2l0aCBzdHJpY3QgQ29tbW9uSlMsIGJ1dFxuXHRcdC8vIG9ubHkgQ29tbW9uSlMtbGlrZSBlbnZpcm9ubWVudHMgdGhhdCBzdXBwb3J0IG1vZHVsZS5leHBvcnRzLFxuXHRcdC8vIGxpa2UgTm9kZS5cblx0XHRtb2R1bGUuZXhwb3J0cyA9IGZhY3RvcnkoKTtcblx0fSBlbHNlIHtcblx0XHQvLyBCcm93c2VyIGdsb2JhbHMgKHJvb3QgaXMgd2luZG93KVxuXHRcdHJvb3QuZG93bmxvYWQgPSBmYWN0b3J5KCk7XG4gIH1cbn0odGhpcywgZnVuY3Rpb24gKCkge1xuXG5cdHJldHVybiBmdW5jdGlvbiBkb3dubG9hZChkYXRhLCBzdHJGaWxlTmFtZSwgc3RyTWltZVR5cGUpIHtcblxuXHRcdHZhciBzZWxmID0gd2luZG93LCAvLyB0aGlzIHNjcmlwdCBpcyBvbmx5IGZvciBicm93c2VycyBhbnl3YXkuLi5cblx0XHRcdGRlZmF1bHRNaW1lID0gXCJhcHBsaWNhdGlvbi9vY3RldC1zdHJlYW1cIiwgLy8gdGhpcyBkZWZhdWx0IG1pbWUgYWxzbyB0cmlnZ2VycyBpZnJhbWUgZG93bmxvYWRzXG5cdFx0XHRtaW1lVHlwZSA9IHN0ck1pbWVUeXBlIHx8IGRlZmF1bHRNaW1lLFxuXHRcdFx0cGF5bG9hZCA9IGRhdGEsXG5cdFx0XHR1cmwgPSAhc3RyRmlsZU5hbWUgJiYgIXN0ck1pbWVUeXBlICYmIHBheWxvYWQsXG5cdFx0XHRhbmNob3IgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiYVwiKSxcblx0XHRcdHRvU3RyaW5nID0gZnVuY3Rpb24oYSl7cmV0dXJuIFN0cmluZyhhKTt9LFxuXHRcdFx0bXlCbG9iID0gKHNlbGYuQmxvYiB8fCBzZWxmLk1vekJsb2IgfHwgc2VsZi5XZWJLaXRCbG9iIHx8IHRvU3RyaW5nKSxcblx0XHRcdGZpbGVOYW1lID0gc3RyRmlsZU5hbWUgfHwgXCJkb3dubG9hZFwiLFxuXHRcdFx0YmxvYixcblx0XHRcdHJlYWRlcjtcblx0XHRcdG15QmxvYj0gbXlCbG9iLmNhbGwgPyBteUJsb2IuYmluZChzZWxmKSA6IEJsb2IgO1xuXHQgIFxuXHRcdGlmKFN0cmluZyh0aGlzKT09PVwidHJ1ZVwiKXsgLy9yZXZlcnNlIGFyZ3VtZW50cywgYWxsb3dpbmcgZG93bmxvYWQuYmluZCh0cnVlLCBcInRleHQveG1sXCIsIFwiZXhwb3J0LnhtbFwiKSB0byBhY3QgYXMgYSBjYWxsYmFja1xuXHRcdFx0cGF5bG9hZD1bcGF5bG9hZCwgbWltZVR5cGVdO1xuXHRcdFx0bWltZVR5cGU9cGF5bG9hZFswXTtcblx0XHRcdHBheWxvYWQ9cGF5bG9hZFsxXTtcblx0XHR9XG5cblxuXHRcdGlmKHVybCAmJiB1cmwubGVuZ3RoPCAyMDQ4KXsgLy8gaWYgbm8gZmlsZW5hbWUgYW5kIG5vIG1pbWUsIGFzc3VtZSBhIHVybCB3YXMgcGFzc2VkIGFzIHRoZSBvbmx5IGFyZ3VtZW50XG5cdFx0XHRmaWxlTmFtZSA9IHVybC5zcGxpdChcIi9cIikucG9wKCkuc3BsaXQoXCI/XCIpWzBdO1xuXHRcdFx0YW5jaG9yLmhyZWYgPSB1cmw7IC8vIGFzc2lnbiBocmVmIHByb3AgdG8gdGVtcCBhbmNob3Jcblx0XHQgIFx0aWYoYW5jaG9yLmhyZWYuaW5kZXhPZih1cmwpICE9PSAtMSl7IC8vIGlmIHRoZSBicm93c2VyIGRldGVybWluZXMgdGhhdCBpdCdzIGEgcG90ZW50aWFsbHkgdmFsaWQgdXJsIHBhdGg6XG4gICAgICAgIFx0XHR2YXIgYWpheD1uZXcgWE1MSHR0cFJlcXVlc3QoKTtcbiAgICAgICAgXHRcdGFqYXgub3BlbiggXCJHRVRcIiwgdXJsLCB0cnVlKTtcbiAgICAgICAgXHRcdGFqYXgucmVzcG9uc2VUeXBlID0gJ2Jsb2InO1xuICAgICAgICBcdFx0YWpheC5vbmxvYWQ9IGZ1bmN0aW9uKGUpeyBcblx0XHRcdFx0ICBkb3dubG9hZChlLnRhcmdldC5yZXNwb25zZSwgZmlsZU5hbWUsIGRlZmF1bHRNaW1lKTtcblx0XHRcdFx0fTtcbiAgICAgICAgXHRcdHNldFRpbWVvdXQoZnVuY3Rpb24oKXsgYWpheC5zZW5kKCk7fSwgMCk7IC8vIGFsbG93cyBzZXR0aW5nIGN1c3RvbSBhamF4IGhlYWRlcnMgdXNpbmcgdGhlIHJldHVybjpcblx0XHRcdCAgICByZXR1cm4gYWpheDtcblx0XHRcdH0gLy8gZW5kIGlmIHZhbGlkIHVybD9cblx0XHR9IC8vIGVuZCBpZiB1cmw/XG5cblxuXHRcdC8vZ28gYWhlYWQgYW5kIGRvd25sb2FkIGRhdGFVUkxzIHJpZ2h0IGF3YXlcblx0XHRpZigvXmRhdGE6KFtcXHcrLV0rXFwvW1xcdysuLV0rKT9bLDtdLy50ZXN0KHBheWxvYWQpKXtcblx0XHRcblx0XHRcdGlmKHBheWxvYWQubGVuZ3RoID4gKDEwMjQqMTAyNCoxLjk5OSkgJiYgbXlCbG9iICE9PSB0b1N0cmluZyApe1xuXHRcdFx0XHRwYXlsb2FkPWRhdGFVcmxUb0Jsb2IocGF5bG9hZCk7XG5cdFx0XHRcdG1pbWVUeXBlPXBheWxvYWQudHlwZSB8fCBkZWZhdWx0TWltZTtcblx0XHRcdH1lbHNle1x0XHRcdFxuXHRcdFx0XHRyZXR1cm4gbmF2aWdhdG9yLm1zU2F2ZUJsb2IgPyAgLy8gSUUxMCBjYW4ndCBkbyBhW2Rvd25sb2FkXSwgb25seSBCbG9iczpcblx0XHRcdFx0XHRuYXZpZ2F0b3IubXNTYXZlQmxvYihkYXRhVXJsVG9CbG9iKHBheWxvYWQpLCBmaWxlTmFtZSkgOlxuXHRcdFx0XHRcdHNhdmVyKHBheWxvYWQpIDsgLy8gZXZlcnlvbmUgZWxzZSBjYW4gc2F2ZSBkYXRhVVJMcyB1bi1wcm9jZXNzZWRcblx0XHRcdH1cblx0XHRcdFxuXHRcdH1lbHNley8vbm90IGRhdGEgdXJsLCBpcyBpdCBhIHN0cmluZyB3aXRoIHNwZWNpYWwgbmVlZHM/XG5cdFx0XHRpZigvKFtcXHg4MC1cXHhmZl0pLy50ZXN0KHBheWxvYWQpKXtcdFx0XHQgIFxuXHRcdFx0XHR2YXIgaT0wLCB0ZW1wVWlBcnI9IG5ldyBVaW50OEFycmF5KHBheWxvYWQubGVuZ3RoKSwgbXg9dGVtcFVpQXJyLmxlbmd0aDtcblx0XHRcdFx0Zm9yKGk7aTxteDsrK2kpIHRlbXBVaUFycltpXT0gcGF5bG9hZC5jaGFyQ29kZUF0KGkpO1xuXHRcdFx0IFx0cGF5bG9hZD1uZXcgbXlCbG9iKFt0ZW1wVWlBcnJdLCB7dHlwZTogbWltZVR5cGV9KTtcblx0XHRcdH1cdFx0ICBcblx0XHR9XG5cdFx0YmxvYiA9IHBheWxvYWQgaW5zdGFuY2VvZiBteUJsb2IgP1xuXHRcdFx0cGF5bG9hZCA6XG5cdFx0XHRuZXcgbXlCbG9iKFtwYXlsb2FkXSwge3R5cGU6IG1pbWVUeXBlfSkgO1xuXG5cblx0XHRmdW5jdGlvbiBkYXRhVXJsVG9CbG9iKHN0clVybCkge1xuXHRcdFx0dmFyIHBhcnRzPSBzdHJVcmwuc3BsaXQoL1s6OyxdLyksXG5cdFx0XHR0eXBlPSBwYXJ0c1sxXSxcblx0XHRcdGRlY29kZXI9IHBhcnRzWzJdID09IFwiYmFzZTY0XCIgPyBhdG9iIDogZGVjb2RlVVJJQ29tcG9uZW50LFxuXHRcdFx0YmluRGF0YT0gZGVjb2RlciggcGFydHMucG9wKCkgKSxcblx0XHRcdG14PSBiaW5EYXRhLmxlbmd0aCxcblx0XHRcdGk9IDAsXG5cdFx0XHR1aUFycj0gbmV3IFVpbnQ4QXJyYXkobXgpO1xuXG5cdFx0XHRmb3IoaTtpPG14OysraSkgdWlBcnJbaV09IGJpbkRhdGEuY2hhckNvZGVBdChpKTtcblxuXHRcdFx0cmV0dXJuIG5ldyBteUJsb2IoW3VpQXJyXSwge3R5cGU6IHR5cGV9KTtcblx0XHQgfVxuXG5cdFx0ZnVuY3Rpb24gc2F2ZXIodXJsLCB3aW5Nb2RlKXtcblxuXHRcdFx0aWYgKCdkb3dubG9hZCcgaW4gYW5jaG9yKSB7IC8vaHRtbDUgQVtkb3dubG9hZF1cblx0XHRcdFx0YW5jaG9yLmhyZWYgPSB1cmw7XG5cdFx0XHRcdGFuY2hvci5zZXRBdHRyaWJ1dGUoXCJkb3dubG9hZFwiLCBmaWxlTmFtZSk7XG5cdFx0XHRcdGFuY2hvci5jbGFzc05hbWUgPSBcImRvd25sb2FkLWpzLWxpbmtcIjtcblx0XHRcdFx0YW5jaG9yLmlubmVySFRNTCA9IFwiZG93bmxvYWRpbmcuLi5cIjtcblx0XHRcdFx0YW5jaG9yLnN0eWxlLmRpc3BsYXkgPSBcIm5vbmVcIjtcblx0XHRcdFx0ZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChhbmNob3IpO1xuXHRcdFx0XHRzZXRUaW1lb3V0KGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRcdGFuY2hvci5jbGljaygpO1xuXHRcdFx0XHRcdGRvY3VtZW50LmJvZHkucmVtb3ZlQ2hpbGQoYW5jaG9yKTtcblx0XHRcdFx0XHRpZih3aW5Nb2RlPT09dHJ1ZSl7c2V0VGltZW91dChmdW5jdGlvbigpeyBzZWxmLlVSTC5yZXZva2VPYmplY3RVUkwoYW5jaG9yLmhyZWYpO30sIDI1MCApO31cblx0XHRcdFx0fSwgNjYpO1xuXHRcdFx0XHRyZXR1cm4gdHJ1ZTtcblx0XHRcdH1cblxuXHRcdFx0Ly8gaGFuZGxlIG5vbi1hW2Rvd25sb2FkXSBzYWZhcmkgYXMgYmVzdCB3ZSBjYW46XG5cdFx0XHRpZigvKFZlcnNpb24pXFwvKFxcZCspXFwuKFxcZCspKD86XFwuKFxcZCspKT8uKlNhZmFyaVxcLy8udGVzdChuYXZpZ2F0b3IudXNlckFnZW50KSkge1xuXHRcdFx0XHRpZigvXmRhdGE6Ly50ZXN0KHVybCkpXHR1cmw9XCJkYXRhOlwiK3VybC5yZXBsYWNlKC9eZGF0YTooW1xcd1xcL1xcLVxcK10rKS8sIGRlZmF1bHRNaW1lKTtcblx0XHRcdFx0aWYoIXdpbmRvdy5vcGVuKHVybCkpeyAvLyBwb3B1cCBibG9ja2VkLCBvZmZlciBkaXJlY3QgZG93bmxvYWQ6XG5cdFx0XHRcdFx0aWYoY29uZmlybShcIkRpc3BsYXlpbmcgTmV3IERvY3VtZW50XFxuXFxuVXNlIFNhdmUgQXMuLi4gdG8gZG93bmxvYWQsIHRoZW4gY2xpY2sgYmFjayB0byByZXR1cm4gdG8gdGhpcyBwYWdlLlwiKSl7IGxvY2F0aW9uLmhyZWY9dXJsOyB9XG5cdFx0XHRcdH1cblx0XHRcdFx0cmV0dXJuIHRydWU7XG5cdFx0XHR9XG5cblx0XHRcdC8vZG8gaWZyYW1lIGRhdGFVUkwgZG93bmxvYWQgKG9sZCBjaCtGRik6XG5cdFx0XHR2YXIgZiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJpZnJhbWVcIik7XG5cdFx0XHRkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKGYpO1xuXG5cdFx0XHRpZighd2luTW9kZSAmJiAvXmRhdGE6Ly50ZXN0KHVybCkpeyAvLyBmb3JjZSBhIG1pbWUgdGhhdCB3aWxsIGRvd25sb2FkOlxuXHRcdFx0XHR1cmw9XCJkYXRhOlwiK3VybC5yZXBsYWNlKC9eZGF0YTooW1xcd1xcL1xcLVxcK10rKS8sIGRlZmF1bHRNaW1lKTtcblx0XHRcdH1cblx0XHRcdGYuc3JjPXVybDtcblx0XHRcdHNldFRpbWVvdXQoZnVuY3Rpb24oKXsgZG9jdW1lbnQuYm9keS5yZW1vdmVDaGlsZChmKTsgfSwgMzMzKTtcblxuXHRcdH0vL2VuZCBzYXZlclxuXG5cblxuXG5cdFx0aWYgKG5hdmlnYXRvci5tc1NhdmVCbG9iKSB7IC8vIElFMTArIDogKGhhcyBCbG9iLCBidXQgbm90IGFbZG93bmxvYWRdIG9yIFVSTClcblx0XHRcdHJldHVybiBuYXZpZ2F0b3IubXNTYXZlQmxvYihibG9iLCBmaWxlTmFtZSk7XG5cdFx0fVxuXG5cdFx0aWYoc2VsZi5VUkwpeyAvLyBzaW1wbGUgZmFzdCBhbmQgbW9kZXJuIHdheSB1c2luZyBCbG9iIGFuZCBVUkw6XG5cdFx0XHRzYXZlcihzZWxmLlVSTC5jcmVhdGVPYmplY3RVUkwoYmxvYiksIHRydWUpO1xuXHRcdH1lbHNle1xuXHRcdFx0Ly8gaGFuZGxlIG5vbi1CbG9iKCkrbm9uLVVSTCBicm93c2Vyczpcblx0XHRcdGlmKHR5cGVvZiBibG9iID09PSBcInN0cmluZ1wiIHx8IGJsb2IuY29uc3RydWN0b3I9PT10b1N0cmluZyApe1xuXHRcdFx0XHR0cnl7XG5cdFx0XHRcdFx0cmV0dXJuIHNhdmVyKCBcImRhdGE6XCIgKyAgbWltZVR5cGUgICArIFwiO2Jhc2U2NCxcIiAgKyAgc2VsZi5idG9hKGJsb2IpICApO1xuXHRcdFx0XHR9Y2F0Y2goeSl7XG5cdFx0XHRcdFx0cmV0dXJuIHNhdmVyKCBcImRhdGE6XCIgKyAgbWltZVR5cGUgICArIFwiLFwiICsgZW5jb2RlVVJJQ29tcG9uZW50KGJsb2IpICApO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cblx0XHRcdC8vIEJsb2IgYnV0IG5vdCBVUkwgc3VwcG9ydDpcblx0XHRcdHJlYWRlcj1uZXcgRmlsZVJlYWRlcigpO1xuXHRcdFx0cmVhZGVyLm9ubG9hZD1mdW5jdGlvbihlKXtcblx0XHRcdFx0c2F2ZXIodGhpcy5yZXN1bHQpO1xuXHRcdFx0fTtcblx0XHRcdHJlYWRlci5yZWFkQXNEYXRhVVJMKGJsb2IpO1xuXHRcdH1cblx0XHRyZXR1cm4gdHJ1ZTtcblx0fTsgLyogZW5kIGRvd25sb2FkKCkgKi9cbn0pKTtcbiJdfQ=="}